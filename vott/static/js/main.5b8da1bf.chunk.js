(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(15),a=n(11),o=n(12),s=n(17),i=n(62),c=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"register",value:function(t,n){s.a.null(t);var r=t;"string"===typeof t&&(s.a.null(n),r={name:t,displayName:t,factory:n}),r.platformSupport||(r.platformSupport=i.a.All),0!==(r.platformSupport&Object(i.c)().type)&&(e.providerRegistry[r.name]=r)}},{key:"createFromConnection",value:function(e){return this.create(e.providerType,e.providerOptions)}},{key:"create",value:function(t,n){s.a.empty(t);var r=e.providerRegistry[t];if(!r)throw new Error("No asset provider has been registered with name '".concat(t,"'"));return r.factory(n)}},{key:"providers",get:function(){return Object(r.a)({},e.providerRegistry)}}]),e}();c.providerRegistry={}},1090:function(e,t,n){},1099:function(e,t,n){},112:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={projectFileExtension:".vott",assetMetadataFileExtension:"-asset.json",exportFileExtension:"-export.json"}},1126:function(e,t){},1127:function(e,t){},1173:function(e,t){},1174:function(e,t){},1175:function(e,t){},1178:function(e){e.exports={type:"object",required:["providerType"],properties:{providerType:{title:"${strings.common.provider}",type:"string"}}}},1179:function(e){e.exports={providerType:{"ui:widget":"exportProviderPicker"}}},1180:function(e,t,n){var r={"./azureCustomVision.json":1181,"./azureCustomVision.ui.json":556,"./cntk.json":1182,"./cntk.ui.json":557,"./csv.json":1183,"./csv.ui.json":558,"./pascalVOC.json":1184,"./pascalVOC.ui.json":559,"./tensorFlowRecords.json":1185,"./tensorFlowRecords.ui.json":560,"./vottJson.json":1186,"./vottJson.ui.json":561};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=1180},1181:function(e){e.exports={type:"object",title:"${strings.export.providers.azureCV.displayName}",required:["assetState","apiKey","region"],properties:{assetState:{type:"string",title:"${strings.export.providers.common.properties.assetState.title}",description:"${strings.export.providers.common.properties.assetState.description}",enum:["all","visited","tagged"],default:"visited",enumNames:["${strings.export.providers.common.properties.assetState.options.all}","${strings.export.providers.common.properties.assetState.options.visited}","${strings.export.providers.common.properties.assetState.options.tagged}"]},region:{type:"string",title:"${strings.export.providers.azureCV.properties.region.title}",description:"${strings.export.providers.azureCV.properties.region.description}",default:"southcentralus",enum:["australiaeast","centralindia","eastus","eastus2","japaneast","northcentralus","northeurope","southcentralus","southeastasia","uksouth","westus2","westeurope"],enumNames:["${strings.export.providers.azureCV.regions.australiaEast}","${strings.export.providers.azureCV.regions.centralIndia}","${strings.export.providers.azureCV.regions.eastUs}","${strings.export.providers.azureCV.regions.eastUs2}","${strings.export.providers.azureCV.regions.japanEast}","${strings.export.providers.azureCV.regions.northCentralUs}","${strings.export.providers.azureCV.regions.northEurope}","${strings.export.providers.azureCV.regions.southCentralUs}","${strings.export.providers.azureCV.regions.southeastAsia}","${strings.export.providers.azureCV.regions.ukSouth}","${strings.export.providers.azureCV.regions.westUs2}","${strings.export.providers.azureCV.regions.westEurope}"]},apiKey:{type:"string",title:"${strings.export.providers.azureCV.properties.apiKey.title}"},newOrExisting:{type:"string",title:"${strings.export.providers.azureCV.properties.newOrExisting.title}",enum:["new","existing"],enumNames:["${strings.export.providers.azureCV.properties.newOrExisting.options.new}","${strings.export.providers.azureCV.properties.newOrExisting.options.existing}"],default:"existing"}},dependencies:{newOrExisting:{oneOf:[{properties:{newOrExisting:{enum:["new"]},name:{type:"string",title:"${strings.export.providers.azureCV.properties.name.title}"},description:{type:"string",title:"${strings.export.providers.azureCV.properties.description.title}"},projectType:{type:"string",title:"${strings.export.providers.azureCV.properties.projectType.title}",default:"Classification",enum:["Classification","ObjectDetection"],enumNames:["${strings.export.providers.azureCV.properties.projectType.options.classification}","${strings.export.providers.azureCV.properties.projectType.options.objectDetection}"]},classificationType:{type:"string",title:"${strings.export.providers.azureCV.properties.classificationType.title}",default:"Multilabel",enum:["Multilabel","Multiclass"],enumNames:["${strings.export.providers.azureCV.properties.classificationType.options.multiLabel}","${strings.export.providers.azureCV.properties.classificationType.options.multiClass}"]},domainId:{type:"string",title:"${strings.export.providers.azureCV.properties.domainId.title}"}},required:["name","projectType","classificationType","domainId"]},{properties:{newOrExisting:{enum:["existing"]},projectId:{type:"string",title:"${strings.export.providers.azureCV.properties.projectId.title}"}},required:["projectId"]}]}}}},1182:function(e){e.exports={type:"object",title:"${strings.export.providers.cntk.displayName}",properties:{assetState:{type:"string",title:"${strings.export.providers.common.properties.assetState.title}",description:"${strings.export.providers.common.properties.assetState.description}",enum:["all","visited","tagged"],default:"visited",enumNames:["${strings.export.providers.common.properties.assetState.options.all}","${strings.export.providers.common.properties.assetState.options.visited}","${strings.export.providers.common.properties.assetState.options.tagged}"]},testTrainSplit:{title:"${strings.export.providers.common.properties.testTrainSplit.title}",description:"${strings.export.providers.common.properties.testTrainSplit.description}",type:"number",default:80}}}},1183:function(e){e.exports={type:"object",title:"${strings.export.providers.csv.displayName}",properties:{assetState:{type:"string",title:"${strings.export.providers.common.properties.assetState.title}",description:"${strings.export.providers.common.properties.assetState.description}",enum:["all","visited","tagged"],default:"visited",enumNames:["${strings.export.providers.common.properties.assetState.options.all}","${strings.export.providers.common.properties.assetState.options.visited}","${strings.export.providers.common.properties.assetState.options.tagged}"]},includeImages:{type:"boolean",default:!0,title:"${strings.export.providers.common.properties.includeImages.title}",description:"${strings.export.providers.common.properties.includeImages.description}"}}}},1184:function(e){e.exports={type:"object",title:"${strings.export.providers.pascalVoc.displayName}",properties:{assetState:{type:"string",title:"${strings.export.providers.common.properties.assetState.title}",description:"${strings.export.providers.common.properties.assetState.description}",enum:["all","visited","tagged"],default:"visited",enumNames:["${strings.export.providers.common.properties.assetState.options.all}","${strings.export.providers.common.properties.assetState.options.visited}","${strings.export.providers.common.properties.assetState.options.tagged}"]},testTrainSplit:{title:"${strings.export.providers.common.properties.testTrainSplit.title}",description:"${strings.export.providers.common.properties.testTrainSplit.description}",type:"number",default:80},exportUnassigned:{title:"${strings.export.providers.pascalVoc.exportUnassigned.title}",description:"${strings.export.providers.pascalVoc.exportUnassigned.description}",type:"boolean",default:!0}}}},1185:function(e){e.exports={type:"object",title:"${strings.export.providers.tfRecords.displayName}",properties:{assetState:{type:"string",title:"${strings.export.providers.common.properties.assetState.title}",description:"${strings.export.providers.common.properties.assetState.description}",enum:["all","visited","tagged"],default:"visited",enumNames:["${strings.export.providers.common.properties.assetState.options.all}","${strings.export.providers.common.properties.assetState.options.visited}","${strings.export.providers.common.properties.assetState.options.tagged}"]}}}},1186:function(e){e.exports={type:"object",title:"${strings.export.providers.vottJson.displayName}",properties:{assetState:{type:"string",title:"${strings.export.providers.common.properties.assetState.title}",description:"${strings.export.providers.common.properties.assetState.description}",enum:["all","visited","tagged"],default:"visited",enumNames:["${strings.export.providers.common.properties.assetState.options.all}","${strings.export.providers.common.properties.assetState.options.visited}","${strings.export.providers.common.properties.assetState.options.tagged}"]},includeImages:{type:"boolean",default:!0,title:"${strings.export.providers.common.properties.includeImages.title}",description:"${strings.export.providers.common.properties.includeImages.description}"}}}},1187:function(e,t,n){var r={"./azureCustomVision.ui.json":556,"./cntk.ui.json":557,"./csv.ui.json":558,"./pascalVOC.ui.json":559,"./tensorFlowRecords.ui.json":560,"./vottJson.ui.json":561};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=1187},123:function(e,t,n){var r=n(738),a=r,o=Function("return this")();a.exportSymbol("proto.tensorflow.BytesList",null,o),a.exportSymbol("proto.tensorflow.Feature",null,o),a.exportSymbol("proto.tensorflow.FeatureList",null,o),a.exportSymbol("proto.tensorflow.FeatureLists",null,o),a.exportSymbol("proto.tensorflow.Features",null,o),a.exportSymbol("proto.tensorflow.FloatList",null,o),a.exportSymbol("proto.tensorflow.Int64List",null,o),a.exportSymbol("proto.tensorflow.TFRecordsImageMessage",null,o),proto.tensorflow.BytesList=function(e){r.Message.initialize(this,e,0,-1,proto.tensorflow.BytesList.repeatedFields_,null)},a.inherits(proto.tensorflow.BytesList,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.BytesList.displayName="proto.tensorflow.BytesList"),proto.tensorflow.BytesList.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.BytesList.prototype.toObject=function(e){return proto.tensorflow.BytesList.toObject(e,this)},proto.tensorflow.BytesList.toObject=function(e,t){var n={valueList:t.getValueList_asB64()};return e&&(n.$jspbMessageInstance=t),n}),proto.tensorflow.BytesList.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.BytesList;return proto.tensorflow.BytesList.deserializeBinaryFromReader(n,t)},proto.tensorflow.BytesList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=t.readBytes();e.addValue(n);break;default:t.skipField()}}return e},proto.tensorflow.BytesList.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.BytesList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.BytesList.serializeBinaryToWriter=function(e,t){var n;(n=e.getValueList_asU8()).length>0&&t.writeRepeatedBytes(1,n)},proto.tensorflow.BytesList.prototype.getValueList=function(){return r.Message.getRepeatedField(this,1)},proto.tensorflow.BytesList.prototype.getValueList_asB64=function(){return r.Message.bytesListAsB64(this.getValueList())},proto.tensorflow.BytesList.prototype.getValueList_asU8=function(){return r.Message.bytesListAsU8(this.getValueList())},proto.tensorflow.BytesList.prototype.setValueList=function(e){r.Message.setField(this,1,e||[])},proto.tensorflow.BytesList.prototype.addValue=function(e,t){r.Message.addToRepeatedField(this,1,e,t)},proto.tensorflow.BytesList.prototype.clearValueList=function(){this.setValueList([])},proto.tensorflow.FloatList=function(e){r.Message.initialize(this,e,0,-1,proto.tensorflow.FloatList.repeatedFields_,null)},a.inherits(proto.tensorflow.FloatList,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.FloatList.displayName="proto.tensorflow.FloatList"),proto.tensorflow.FloatList.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.FloatList.prototype.toObject=function(e){return proto.tensorflow.FloatList.toObject(e,this)},proto.tensorflow.FloatList.toObject=function(e,t){var n={valueList:r.Message.getRepeatedFloatingPointField(t,1)};return e&&(n.$jspbMessageInstance=t),n}),proto.tensorflow.FloatList.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.FloatList;return proto.tensorflow.FloatList.deserializeBinaryFromReader(n,t)},proto.tensorflow.FloatList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=t.readPackedFloat();e.setValueList(n);break;default:t.skipField()}}return e},proto.tensorflow.FloatList.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.FloatList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.FloatList.serializeBinaryToWriter=function(e,t){var n;(n=e.getValueList()).length>0&&t.writePackedFloat(1,n)},proto.tensorflow.FloatList.prototype.getValueList=function(){return r.Message.getRepeatedFloatingPointField(this,1)},proto.tensorflow.FloatList.prototype.setValueList=function(e){r.Message.setField(this,1,e||[])},proto.tensorflow.FloatList.prototype.addValue=function(e,t){r.Message.addToRepeatedField(this,1,e,t)},proto.tensorflow.FloatList.prototype.clearValueList=function(){this.setValueList([])},proto.tensorflow.Int64List=function(e){r.Message.initialize(this,e,0,-1,proto.tensorflow.Int64List.repeatedFields_,null)},a.inherits(proto.tensorflow.Int64List,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.Int64List.displayName="proto.tensorflow.Int64List"),proto.tensorflow.Int64List.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.Int64List.prototype.toObject=function(e){return proto.tensorflow.Int64List.toObject(e,this)},proto.tensorflow.Int64List.toObject=function(e,t){var n={valueList:r.Message.getRepeatedField(t,1)};return e&&(n.$jspbMessageInstance=t),n}),proto.tensorflow.Int64List.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.Int64List;return proto.tensorflow.Int64List.deserializeBinaryFromReader(n,t)},proto.tensorflow.Int64List.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=t.readPackedInt64();e.setValueList(n);break;default:t.skipField()}}return e},proto.tensorflow.Int64List.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.Int64List.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.Int64List.serializeBinaryToWriter=function(e,t){var n;(n=e.getValueList()).length>0&&t.writePackedInt64(1,n)},proto.tensorflow.Int64List.prototype.getValueList=function(){return r.Message.getRepeatedField(this,1)},proto.tensorflow.Int64List.prototype.setValueList=function(e){r.Message.setField(this,1,e||[])},proto.tensorflow.Int64List.prototype.addValue=function(e,t){r.Message.addToRepeatedField(this,1,e,t)},proto.tensorflow.Int64List.prototype.clearValueList=function(){this.setValueList([])},proto.tensorflow.Feature=function(e){r.Message.initialize(this,e,0,-1,null,proto.tensorflow.Feature.oneofGroups_)},a.inherits(proto.tensorflow.Feature,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.Feature.displayName="proto.tensorflow.Feature"),proto.tensorflow.Feature.oneofGroups_=[[1,2,3]],proto.tensorflow.Feature.KindCase={KIND_NOT_SET:0,BYTES_LIST:1,FLOAT_LIST:2,INT64_LIST:3},proto.tensorflow.Feature.prototype.getKindCase=function(){return r.Message.computeOneofCase(this,proto.tensorflow.Feature.oneofGroups_[0])},r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.Feature.prototype.toObject=function(e){return proto.tensorflow.Feature.toObject(e,this)},proto.tensorflow.Feature.toObject=function(e,t){var n,r={bytesList:(n=t.getBytesList())&&proto.tensorflow.BytesList.toObject(e,n),floatList:(n=t.getFloatList())&&proto.tensorflow.FloatList.toObject(e,n),int64List:(n=t.getInt64List())&&proto.tensorflow.Int64List.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.tensorflow.Feature.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.Feature;return proto.tensorflow.Feature.deserializeBinaryFromReader(n,t)},proto.tensorflow.Feature.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=new proto.tensorflow.BytesList;t.readMessage(n,proto.tensorflow.BytesList.deserializeBinaryFromReader),e.setBytesList(n);break;case 2:n=new proto.tensorflow.FloatList;t.readMessage(n,proto.tensorflow.FloatList.deserializeBinaryFromReader),e.setFloatList(n);break;case 3:n=new proto.tensorflow.Int64List;t.readMessage(n,proto.tensorflow.Int64List.deserializeBinaryFromReader),e.setInt64List(n);break;default:t.skipField()}}return e},proto.tensorflow.Feature.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.Feature.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.Feature.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBytesList())&&t.writeMessage(1,n,proto.tensorflow.BytesList.serializeBinaryToWriter),null!=(n=e.getFloatList())&&t.writeMessage(2,n,proto.tensorflow.FloatList.serializeBinaryToWriter),null!=(n=e.getInt64List())&&t.writeMessage(3,n,proto.tensorflow.Int64List.serializeBinaryToWriter)},proto.tensorflow.Feature.prototype.getBytesList=function(){return r.Message.getWrapperField(this,proto.tensorflow.BytesList,1)},proto.tensorflow.Feature.prototype.setBytesList=function(e){r.Message.setOneofWrapperField(this,1,proto.tensorflow.Feature.oneofGroups_[0],e)},proto.tensorflow.Feature.prototype.clearBytesList=function(){this.setBytesList(void 0)},proto.tensorflow.Feature.prototype.hasBytesList=function(){return null!=r.Message.getField(this,1)},proto.tensorflow.Feature.prototype.getFloatList=function(){return r.Message.getWrapperField(this,proto.tensorflow.FloatList,2)},proto.tensorflow.Feature.prototype.setFloatList=function(e){r.Message.setOneofWrapperField(this,2,proto.tensorflow.Feature.oneofGroups_[0],e)},proto.tensorflow.Feature.prototype.clearFloatList=function(){this.setFloatList(void 0)},proto.tensorflow.Feature.prototype.hasFloatList=function(){return null!=r.Message.getField(this,2)},proto.tensorflow.Feature.prototype.getInt64List=function(){return r.Message.getWrapperField(this,proto.tensorflow.Int64List,3)},proto.tensorflow.Feature.prototype.setInt64List=function(e){r.Message.setOneofWrapperField(this,3,proto.tensorflow.Feature.oneofGroups_[0],e)},proto.tensorflow.Feature.prototype.clearInt64List=function(){this.setInt64List(void 0)},proto.tensorflow.Feature.prototype.hasInt64List=function(){return null!=r.Message.getField(this,3)},proto.tensorflow.Features=function(e){r.Message.initialize(this,e,0,-1,null,null)},a.inherits(proto.tensorflow.Features,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.Features.displayName="proto.tensorflow.Features"),r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.Features.prototype.toObject=function(e){return proto.tensorflow.Features.toObject(e,this)},proto.tensorflow.Features.toObject=function(e,t){var n,r={featureMap:(n=t.getFeatureMap())?n.toObject(e,proto.tensorflow.Feature.toObject):[]};return e&&(r.$jspbMessageInstance=t),r}),proto.tensorflow.Features.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.Features;return proto.tensorflow.Features.deserializeBinaryFromReader(n,t)},proto.tensorflow.Features.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=e.getFeatureMap();t.readMessage(n,function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readMessage,proto.tensorflow.Feature.deserializeBinaryFromReader,"")});break;default:t.skipField()}}return e},proto.tensorflow.Features.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.Features.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.Features.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getFeatureMap(!0))&&n.getLength()>0&&n.serializeBinary(1,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeMessage,proto.tensorflow.Feature.serializeBinaryToWriter)},proto.tensorflow.Features.prototype.getFeatureMap=function(e){return r.Message.getMapField(this,1,e,proto.tensorflow.Feature)},proto.tensorflow.Features.prototype.clearFeatureMap=function(){this.getFeatureMap().clear()},proto.tensorflow.FeatureList=function(e){r.Message.initialize(this,e,0,-1,proto.tensorflow.FeatureList.repeatedFields_,null)},a.inherits(proto.tensorflow.FeatureList,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.FeatureList.displayName="proto.tensorflow.FeatureList"),proto.tensorflow.FeatureList.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.FeatureList.prototype.toObject=function(e){return proto.tensorflow.FeatureList.toObject(e,this)},proto.tensorflow.FeatureList.toObject=function(e,t){var n={featureList:r.Message.toObjectList(t.getFeatureList(),proto.tensorflow.Feature.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}),proto.tensorflow.FeatureList.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.FeatureList;return proto.tensorflow.FeatureList.deserializeBinaryFromReader(n,t)},proto.tensorflow.FeatureList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=new proto.tensorflow.Feature;t.readMessage(n,proto.tensorflow.Feature.deserializeBinaryFromReader),e.addFeature(n);break;default:t.skipField()}}return e},proto.tensorflow.FeatureList.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.FeatureList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.FeatureList.serializeBinaryToWriter=function(e,t){var n;(n=e.getFeatureList()).length>0&&t.writeRepeatedMessage(1,n,proto.tensorflow.Feature.serializeBinaryToWriter)},proto.tensorflow.FeatureList.prototype.getFeatureList=function(){return r.Message.getRepeatedWrapperField(this,proto.tensorflow.Feature,1)},proto.tensorflow.FeatureList.prototype.setFeatureList=function(e){r.Message.setRepeatedWrapperField(this,1,e)},proto.tensorflow.FeatureList.prototype.addFeature=function(e,t){return r.Message.addToRepeatedWrapperField(this,1,e,proto.tensorflow.Feature,t)},proto.tensorflow.FeatureList.prototype.clearFeatureList=function(){this.setFeatureList([])},proto.tensorflow.FeatureLists=function(e){r.Message.initialize(this,e,0,-1,null,null)},a.inherits(proto.tensorflow.FeatureLists,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.FeatureLists.displayName="proto.tensorflow.FeatureLists"),r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.FeatureLists.prototype.toObject=function(e){return proto.tensorflow.FeatureLists.toObject(e,this)},proto.tensorflow.FeatureLists.toObject=function(e,t){var n,r={featureListMap:(n=t.getFeatureListMap())?n.toObject(e,proto.tensorflow.FeatureList.toObject):[]};return e&&(r.$jspbMessageInstance=t),r}),proto.tensorflow.FeatureLists.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.FeatureLists;return proto.tensorflow.FeatureLists.deserializeBinaryFromReader(n,t)},proto.tensorflow.FeatureLists.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=e.getFeatureListMap();t.readMessage(n,function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readMessage,proto.tensorflow.FeatureList.deserializeBinaryFromReader,"")});break;default:t.skipField()}}return e},proto.tensorflow.FeatureLists.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.FeatureLists.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.FeatureLists.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getFeatureListMap(!0))&&n.getLength()>0&&n.serializeBinary(1,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeMessage,proto.tensorflow.FeatureList.serializeBinaryToWriter)},proto.tensorflow.FeatureLists.prototype.getFeatureListMap=function(e){return r.Message.getMapField(this,1,e,proto.tensorflow.FeatureList)},proto.tensorflow.FeatureLists.prototype.clearFeatureListMap=function(){this.getFeatureListMap().clear()},proto.tensorflow.TFRecordsImageMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)},a.inherits(proto.tensorflow.TFRecordsImageMessage,r.Message),a.DEBUG&&!COMPILED&&(proto.tensorflow.TFRecordsImageMessage.displayName="proto.tensorflow.TFRecordsImageMessage"),r.Message.GENERATE_TO_OBJECT&&(proto.tensorflow.TFRecordsImageMessage.prototype.toObject=function(e){return proto.tensorflow.TFRecordsImageMessage.toObject(e,this)},proto.tensorflow.TFRecordsImageMessage.toObject=function(e,t){var n,r={context:(n=t.getContext())&&proto.tensorflow.Features.toObject(e,n),featureLists:(n=t.getFeatureLists())&&proto.tensorflow.FeatureLists.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.tensorflow.TFRecordsImageMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.tensorflow.TFRecordsImageMessage;return proto.tensorflow.TFRecordsImageMessage.deserializeBinaryFromReader(n,t)},proto.tensorflow.TFRecordsImageMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var n=new proto.tensorflow.Features;t.readMessage(n,proto.tensorflow.Features.deserializeBinaryFromReader),e.setContext(n);break;case 2:n=new proto.tensorflow.FeatureLists;t.readMessage(n,proto.tensorflow.FeatureLists.deserializeBinaryFromReader),e.setFeatureLists(n);break;default:t.skipField()}}return e},proto.tensorflow.TFRecordsImageMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.tensorflow.TFRecordsImageMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.tensorflow.TFRecordsImageMessage.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getContext())&&t.writeMessage(1,n,proto.tensorflow.Features.serializeBinaryToWriter),null!=(n=e.getFeatureLists())&&t.writeMessage(2,n,proto.tensorflow.FeatureLists.serializeBinaryToWriter)},proto.tensorflow.TFRecordsImageMessage.prototype.getContext=function(){return r.Message.getWrapperField(this,proto.tensorflow.Features,1)},proto.tensorflow.TFRecordsImageMessage.prototype.setContext=function(e){r.Message.setWrapperField(this,1,e)},proto.tensorflow.TFRecordsImageMessage.prototype.clearContext=function(){this.setContext(void 0)},proto.tensorflow.TFRecordsImageMessage.prototype.hasContext=function(){return null!=r.Message.getField(this,1)},proto.tensorflow.TFRecordsImageMessage.prototype.getFeatureLists=function(){return r.Message.getWrapperField(this,proto.tensorflow.FeatureLists,2)},proto.tensorflow.TFRecordsImageMessage.prototype.setFeatureLists=function(e){r.Message.setWrapperField(this,2,e)},proto.tensorflow.TFRecordsImageMessage.prototype.clearFeatureLists=function(){this.setFeatureLists(void 0)},proto.tensorflow.TFRecordsImageMessage.prototype.hasFeatureLists=function(){return null!=r.Message.getField(this,2)},a.object.extend(t,proto.tensorflow)},125:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=n(151)},126:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(86),u=n(1),l=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.context&&this.context.keyboard?this.deregisterBinding=this.context.keyboard.registerBinding(this.props):console.warn("Keyboard Mananger context cannot be found - Keyboard binding has NOT been set.")}},{key:"componentWillUnmount",value:function(){this.deregisterBinding&&this.deregisterBinding()}},{key:"render",value:function(){return null}}]),t}(n.n(u).a.Component);l.contextType=c.b},1341:function(e){e.exports={type:"object",properties:{name:{title:"${strings.common.displayName}",type:"string",pattern:'^[^\\\\\\\\/:*?\\\\\\"<>|]*$'},securityToken:{title:"${strings.projectSettings.securityToken.title}",description:"${strings.projectSettings.securityToken.description}",type:"string"},sourceConnection:{title:"${strings.projectSettings.sourceConnection.title}",description:"${strings.projectSettings.sourceConnection.description}",type:"object"},targetConnection:{title:"${strings.projectSettings.targetConnection.title}",description:"${strings.projectSettings.targetConnection.description}",type:"object"},description:{title:"${strings.common.description}",type:"string"},videoSettings:{title:"${strings.projectSettings.videoSettings.title}",type:"object",properties:{frameExtractionRate:{title:"${strings.projectSettings.videoSettings.frameExtractionRate}",description:"${strings.projectSettings.videoSettings.description}",type:"integer",default:15,minimum:1}},required:["frameExtractionRate"]},tags:{title:"${strings.tags.title}",type:"array"}},required:["name","sourceConnection","targetConnection","videoSettings"]}},1342:function(e){e.exports={securityToken:{"ui:field":"securityToken"},description:{"ui:widget":"textarea"},sourceConnection:{"ui:field":"sourceConnection"},targetConnection:{"ui:field":"targetConnection"},tags:{"ui:field":"tagsInput"}}},135:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(11),a=n(12),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"get",value:function(){return"production"}}]),e}()},1357:function(e,t,n){},1371:function(e,t,n){},1373:function(e,t,n){},1375:function(e,t,n){},1385:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(71),s=n(26),i=n.n(s),c=(n(653),n(655),n(657),n(659),n(604));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(28),l=n(50),p=n(630),d=n(15),f=n(30),g=n(516),m=Object(l.combineReducers)({appSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a.TOGGLE_DEV_TOOLS_SUCCESS:return Object(d.a)({},e,{devToolsEnabled:t.payload});case f.a.REFRESH_APP_SUCCESS:return Object(d.a)({},e);case f.a.SAVE_APP_SETTINGS_SUCCESS:case f.a.ENSURE_SECURITY_TOKEN_SUCCESS:return Object(d.a)({},t.payload);default:return e}},connections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(e||(e=[]),t.type){case f.a.SAVE_CONNECTION_SUCCESS:return[Object(d.a)({},t.payload)].concat(Object(u.a)(e.filter(function(e){return e.id!==t.payload.id})));case f.a.DELETE_CONNECTION_SUCCESS:return Object(u.a)(e.filter(function(e){return e.id!==t.payload.id}));case f.a.LOAD_PROJECT_SUCCESS:return t.payload.sourceConnection.id===t.payload.targetConnection.id?[Object(d.a)({},t.payload.sourceConnection)].concat(Object(u.a)(e.filter(function(e){return e.id!==t.payload.sourceConnection.id}))):[Object(d.a)({},t.payload.sourceConnection),Object(d.a)({},t.payload.targetConnection)].concat(Object(u.a)(e.filter(function(e){return e.id!==t.payload.sourceConnection.id&&e.id!==t.payload.targetConnection.id})));default:return e}},recentProjects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;e||(e=[]);switch(t.type){case f.a.SAVE_PROJECT_SUCCESS:return[Object(d.a)({},t.payload)].concat(Object(u.a)(e.filter(function(e){return e.id!==t.payload.id})));case f.a.DELETE_PROJECT_SUCCESS:return Object(u.a)(e.filter(function(e){return e.id!==t.payload.id}));case f.a.SAVE_CONNECTION_SUCCESS:return e.map(function(e){var n=Object(d.a)({},e);return e.sourceConnection.id===t.payload.id&&(n.sourceConnection=Object(d.a)({},t.payload)),e.targetConnection.id===t.payload.id&&(n.targetConnection=Object(d.a)({},t.payload)),n});default:return e}},currentProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a.DELETE_PROJECT_SUCCESS:case f.a.CLOSE_PROJECT_SUCCESS:return null;case f.a.LOAD_PROJECT_SUCCESS:return Object(d.a)({},t.payload);case f.a.LOAD_ASSET_METADATA_SUCCESS:return e?Object(d.a)({},e,{lastVisitedAssetId:t.payload.asset.id}):e;case f.a.SAVE_ASSET_METADATA_SUCCESS:if(!e)return e;var n=Object(d.a)({},e.assets)||{};n[t.payload.asset.id]=Object(d.a)({},t.payload.asset);var r=new Set;t.payload.regions.forEach(function(e){return e.tags.forEach(function(e){return r.add(e)})});var a=e.tags?Object(u.a)(e.tags):[],o=!1;return r.forEach(function(t){e.tags&&0!==e.tags.length&&e.tags.find(function(e){return t===e.name})||(a.push({name:t,color:g[a.length%g.length]}),o=!0)}),o?Object(d.a)({},e,{tags:a,assets:n}):Object(d.a)({},e,{assets:n});case f.a.SAVE_CONNECTION_SUCCESS:return e?Object(d.a)({},e,{sourceConnection:e.sourceConnection.id===t.payload.id?Object(d.a)({},t.payload):e.sourceConnection,targetConnection:e.targetConnection.id===t.payload.id?Object(d.a)({},t.payload):e.targetConnection}):e;default:return e}},appError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a.SHOW_ERROR:return Object(d.a)({},t.payload);case f.a.CLEAR_ERROR:return null;default:return e}}}),h=n(383),v=n(179);var b=n(135);var y,j={appSettings:{devToolsEnabled:!1,securityTokens:[]},connections:[],recentProjects:[],currentProject:null,appError:null},w=n(93),x=n(631),C=n(4),E=n.n(C),O=n(8),k=n(11),S=n(12),T=n(20),A=n(18),F=n(19),N=n(34),P=n.n(N),R=n(70),L=n.n(R),B=n(85),M=n(17),I=n(53),D=n(181),z=n(7),U=n(33),V=function(e){function t(e,n){var r;return Object(k.a)(this,t),r=Object(T.a)(this,Object(A.a)(t).call(this,e,n)),M.a.null(n),r}return Object(F.a)(t,e),Object(S.a)(t,[{key:"export",value:function(){var e=Object(O.a)(E.a.mark(function e(){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAssetsForExport();case 2:return t=e.sent,Object(d.a)({},this.project).assets=P.a.keyBy(t,function(e){return e.asset.id}),n="".concat(this.project.name.replace(/\s/g,"-"),"-TFRecords-export"),e.next=8,this.storageProvider.createContainer(n);case 8:return e.next=10,this.exportPBTXT(n,this.project);case 10:return e.next=12,this.exportRecords(n,t);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportRecords",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.mapAsync(function(){var e=Object(O.a)(E.a.mark(function e(n){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exportSingleRecord(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportSingleRecord",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(O.a)(E.a.mark(function e(a,o){var s,i,c,u,l,p,d;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.getAssetArray(n.asset);case 3:if(s=e.sent,i=new Uint8Array(s),c=btoa(i.reduce(function(e,t){return e+String.fromCharCode(t)},"")),u={width:n.asset.size?n.asset.size.width:0,height:n.asset.size?n.asset.size.height:0,text:[],label:[],xmin:[],ymin:[],xmax:[],ymax:[],difficult:[],truncated:[],view:[]},n.asset.size&&0!==n.asset.size.width&&0!==n.asset.size.height){e.next=10;break}return e.next=10,r.updateImageSizeInfo(c,u);case 10:return r.updateAssetTagArrays(n,u),(l=new U.b).addFeature("image/height",U.a.Int64,u.height),l.addFeature("image/width",U.a.Int64,u.width),l.addFeature("image/filename",U.a.String,n.asset.name),l.addFeature("image/source_id",U.a.String,n.asset.name),l.addFeature("image/key/sha256",U.a.String,L.a.SHA256(i).toString(L.a.enc.Base64)),l.addFeature("image/encoded",U.a.Binary,i),l.addFeature("image/format",U.a.String,n.asset.name.split(".").pop()),l.addArrayFeature("image/object/bbox/xmin",U.a.Float,u.xmin),l.addArrayFeature("image/object/bbox/ymin",U.a.Float,u.ymin),l.addArrayFeature("image/object/bbox/xmax",U.a.Float,u.xmax),l.addArrayFeature("image/object/bbox/ymax",U.a.Float,u.ymax),l.addArrayFeature("image/object/class/text",U.a.String,u.text),l.addArrayFeature("image/object/class/label",U.a.Int64,u.label),l.addArrayFeature("image/object/difficult",U.a.Int64,u.difficult),l.addArrayFeature("image/object/truncated",U.a.Int64,u.truncated),l.addArrayFeature("image/object/view",U.a.String,u.view),p=n.asset.name.split(".").slice(0,-1).join("."),d="".concat(t,"/").concat(p,".tfrecord"),e.next=32,r.writeTFRecords(d,[l.build()]);case 32:a(),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(0),console.log("Error downloading ".concat(n.asset.path," - ").concat(e.t0)),a();case 39:case"end":return e.stop()}},e,this,[[0,35]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"writeTFRecords",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=U.b.buildTFRecords(n),e.next=3,this.storageProvider.writeBinary(t,r);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateImageSizeInfo",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>10)){e.next=5;break}return e.next=3,I.a.readAssetAttributesWithBuffer(t);case 3:(r=e.sent)?(n.width=r.width,n.height=r.height):console.log("imageInfo not found");case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateAssetTagArrays",value:function(e,t){var n=this;e.regions.filter(function(e){return e.boundingBox}).forEach(function(e){e.tags.forEach(function(r){var a=n.project.tags.findIndex(function(e){return e.name===r});t.text.push(r),t.label.push(a),t.xmin.push(e.boundingBox.left/t.width),t.ymin.push(e.boundingBox.top/t.height),t.xmax.push((e.boundingBox.left+e.boundingBox.width)/t.width),t.ymax.push((e.boundingBox.top+e.boundingBox.height)/t.height),t.difficult.push(0),t.truncated.push(0),t.view.push("Unspecified")})})}},{key:"exportPBTXT",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r,a,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.tags&&n.tags.length>0)){e.next=6;break}return r="".concat(t,"/tf_label_map.pbtxt"),a=1,o=n.tags.map(function(e){var t={id:(a++).toString(),tag:e.name};return Object(z.b)(D.b,t)}),e.next=6,this.storageProvider.writeText(r,o.join(""));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(B.b),_=n(632),$=n(633),W=n(106),q=n(390),K=n(97),J=n.n(K),H=n(14),G=n(64),Y=n(92);!function(e){e.Square="Square",e.Wide="Wide",e.Tall="Tall",e.All="All"}(y||(y={}));var Q=function(){function e(t){Object(k.a)(this,e),this.options=t,M.a.null(t)}return Object(S.a)(e,[{key:"getAssets",value:function(){var t=Object(O.a)(E.a.mark(function t(){var n,r,a,o;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={q:this.options.query,aspect:this.options.aspectRatio},r="".concat(e.SEARCH_URL,"?").concat(Object(Y.a)(n)),t.next=4,J.a.get(r,{headers:{"Ocp-Apim-Subscription-Key":this.options.apiKey,Accept:"application/json"}});case 4:return a=t.sent,o=a.data.value.map(function(e){return e.contentUrl}),t.abrupt("return",o.map(function(e){return G.a.createAssetFromFilePath(e)}).filter(function(e){return e.type!==H.c.Unknown}));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}();Q.SEARCH_URL="https://api.cognitive.microsoft.com/bing/v7.0/images/search";var X,Z,ee=n(153),te=n(72),ne=n(87),re=n(62),ae=function(){function e(t){Object(k.a)(this,e),this.options=t,M.a.null(t)}return Object(S.a)(e,[{key:"create",value:function(){var e=Object(O.a)(E.a.mark(function e(t){var n,r,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.null(t),n={name:t.name,description:t.description,projectType:t.projectType,domainId:t.domainId,classificationType:t.classificationType},r="".concat(this.options.baseUrl,"/projects?").concat(Object(Y.a)(n)),e.next=5,J.a.post(r,null,this.createRequestConfig());case 5:if(200===(a=e.sent).status){e.next=8;break}throw new Error("Error creating new project");case 8:return e.abrupt("return",a.data);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProjectTags",value:function(){var e=Object(O.a)(E.a.mark(function e(t){var n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.empty(t),n="".concat(this.options.baseUrl,"/projects/").concat(t,"/tags"),e.next=4,J.a.get(n,this.createRequestConfig());case 4:if(200===(r=e.sent).status){e.next=7;break}throw new Error("Error retrieving project tags");case 7:return e.abrupt("return",r.data);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createTag",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r,a,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.empty(t),M.a.null(n),r={name:n.name,description:n.description},a="".concat(this.options.baseUrl,"/projects/").concat(t,"/tags?").concat(Object(Y.a)(r)),e.next=6,J.a.post(a,null,this.createRequestConfig());case 6:if(200===(o=e.sent).status){e.next=9;break}throw new Error("Error saving tag");case 9:return e.abrupt("return",o.data);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createImage",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r,a,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.empty(t),M.a.null(n),r="".concat(this.options.baseUrl,"/projects/").concat(t,"/images"),(a=this.createRequestConfig()).headers["Content-Type"]="application/octet-stream",e.next=7,J.a.post(r,n,a);case 7:if(200===(o=e.sent).status){e.next=10;break}throw new Error("Error saving image");case 10:if(o.data.images&&0!==o.data.images.length){e.next=12;break}throw new Error("Error uploading image");case 12:return e.abrupt("return",o.data.images[0].image);case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createRegions",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.empty(t),M.a.null(n),r="".concat(this.options.baseUrl,"/projects/").concat(t,"/images/regions"),e.next=5,J.a.post(r,{regions:n},this.createRequestConfig());case 5:if(200===e.sent.status){e.next=8;break}throw new Error("Error saving image regions");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createRequestConfig",value:function(){return{headers:{"Training-key":this.options.apiKey}}}}]),e}();!function(e){e.New="new",e.Existing="existing"}(X||(X={})),function(e){e.EastUS="eastus",e.EastUS2="eastus2",e.NorthCentralUS="northcentralus",e.SouthCentralUS="southcentralus",e.WestUS2="westus2",e.WestEurope="westeurope",e.NorthEurope="northeurope",e.SoutheastAsia="southeastasia",e.AustraliaEast="australiaeast",e.CentralIndia="centralindia",e.UKSouth="uksouth",e.JapanEast="japaneast"}(Z||(Z={}));var oe=function(e){function t(e,n){var r;Object(k.a)(this,t),r=Object(T.a)(this,Object(A.a)(t).call(this,e,n)),M.a.null(n),n.region||(n.region=Z.SouthCentralUS);var a={apiKey:n.apiKey,baseUrl:"https://".concat(n.region,".api.cognitive.microsoft.com/customvision/v2.2/Training")};return r.customVisionService=new ae(a),r}return Object(F.a)(t,e),Object(S.a)(t,[{key:"export",value:function(){var e=Object(O.a)(E.a.mark(function e(){var t,n,r,a,o=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncTags();case 2:return t=e.sent,e.next=5,this.getAssetsForExport();case 5:return n=e.sent,r=P.a.keyBy(t,"name"),e.next=9,n.mapAsync(function(){var e=Object(O.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.uploadAsset(t,r);case 3:return e.abrupt("return",{asset:t,success:!0});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{asset:t,success:!1,error:e.t0});case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}());case 9:return a=e.sent,e.abrupt("return",{completed:a.filter(function(e){return e.success}),errors:a.filter(function(e){return!e.success}),count:a.length});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(O.a)(E.a.mark(function e(t){var n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.providerOptions).newOrExisting!==X.Existing){e.next=3;break}return e.abrupt("return",Promise.resolve(n));case 3:return r={name:n.name,description:n.description,classificationType:n.classificationType,domainId:n.domainId,projectType:n.projectType},e.next=6,this.customVisionService.create(r);case 6:return r=e.sent,e.abrupt("return",{assetState:n.assetState,region:n.region,apiKey:n.apiKey,projectId:r.id,newOrExisting:X.Existing});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"syncTags",value:function(){var e=Object(O.a)(E.a.mark(function e(){var t,n,r,a,o,s=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.project.exportFormat.providerOptions,e.next=3,this.customVisionService.getProjectTags(t.projectId);case 3:return n=e.sent,r=P.a.keyBy(n,"name"),e.next=7,this.project.tags.filter(function(e){return!r[e.name]}).map(function(e){var n={name:e.name};return s.customVisionService.createTag(t.projectId,n)});case 7:return a=e.sent,e.next=10,Promise.all(a);case 10:return o=e.sent,e.abrupt("return",n.concat(o));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"uploadAsset",value:function(){var e=Object(O.a)(E.a.mark(function e(t,n){var r,a,o,s=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.getAssetBlob(t.asset);case 2:return r=e.sent,e.next=5,this.customVisionService.createImage(this.options.projectId,r);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",Promise.reject('Error uploading asset binary with id "'.concat(t.asset.id,'"')));case 8:if(o=[],t.regions.forEach(function(e){e.boundingBox&&e.tags.forEach(function(r){var i=n[r];if(i){var c=s.getBoundingBoxValue(t.asset.size,e.boundingBox),u=Object(d.a)({imageId:a.id,tagId:i.id},c);o.push(u)}})}),!(o.length>0)){e.next=13;break}return e.next=13,this.customVisionService.createRegions(this.options.projectId,o);case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBoundingBoxValue",value:function(e,t){return{left:t.left/e.width,top:t.top/e.height,width:t.width/e.width,height:t.height/e.height}}}]),t}(B.b),se=n(638);function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(O.a)(E.a.mark(function e(t){var n,r,a,o,s=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:5,M.a.null(this),M.a.null(t),M.a.expression(n,function(e){return e>0}),r=Object(u.a)(this);case 5:if(!(r.length>0)){e.next=13;break}for(a=[];r.length>0&&a.length<n;)a.push(r.pop());return o=a.map(function(e){return t(e)}),e.next=11,Promise.all(o);case 11:e.next=5;break;case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(O.a)(E.a.mark(function e(t){var n,r,a,o,s,i,c=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:5,M.a.null(this),M.a.null(t),M.a.expression(n,function(e){return e>0}),r=[],a=Object(u.a)(this);case 6:if(!(a.length>0)){e.next=16;break}for(o=[];a.length>0&&o.length<n;)o.push(a.pop());return s=o.map(function(e){return t(e)}),e.next=12,Promise.all(s);case 12:i=e.sent,r=r.concat(i),e.next=6;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function pe(e){return de.apply(this,arguments)}function de(){return(de=Object(O.a)(E.a.mark(function e(t){var n,r,a,o,s=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:5,M.a.null(this),M.a.null(t),M.a.expression(n,function(e){return e>0}),r=Object(u.a)(this.entries());case 5:if(!(r.length>0)){e.next=13;break}for(a=[];r.length>0&&a.length<n;)a.push(r.pop());return o=a.map(function(e){return t(e[1],e[0])}),e.next=11,Promise.all(o);case 11:e.next=5;break;case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Object(v.a)(),Array.prototype.forEachAsync||(Array.prototype.forEachAsync=ie),Array.prototype.mapAsync||(Array.prototype.mapAsync=ue),Map.prototype.forEachAsync||(Map.prototype.forEachAsync=pe),te.a.register({name:"localFileSystemProxy",displayName:z.c.connections.providers.local.title,platformSupport:re.a.Electron,factory:function(e){return new ee.a(e)}}),te.a.register({name:"azureBlobStorage",displayName:z.c.connections.providers.azureBlob.title,factory:function(e){return new q.a(e)}}),W.a.register({name:"localFileSystemProxy",displayName:z.c.connections.providers.local.title,platformSupport:re.a.Electron,factory:function(e){return new ee.a(e)}}),W.a.register({name:"azureBlobStorage",displayName:z.c.connections.providers.azureBlob.title,factory:function(e){return new q.a(e)}}),W.a.register({name:"bingImageSearch",displayName:z.c.connections.providers.bing.title,factory:function(e){return new Q(e)}}),w.a.register({name:"vottJson",displayName:z.c.export.providers.vottJson.displayName,factory:function(e,t){return new _.a(e,t)}}),w.a.register({name:"pascalVOC",displayName:z.c.export.providers.pascalVoc.displayName,factory:function(e,t){return new x.a(e,t)}}),w.a.register({name:"tensorFlowRecords",displayName:z.c.export.providers.tfRecords.displayName,factory:function(e,t){return new V(e,t)}}),w.a.register({name:"azureCustomVision",displayName:z.c.export.providers.azureCV.displayName,factory:function(e,t){return new oe(e,t)}}),w.a.register({name:"cntk",displayName:z.c.export.providers.cntk.displayName,factory:function(e,t){return new se.a(e,t)}}),w.a.register({name:"csv",displayName:z.c.export.providers.csv.displayName,factory:function(e,t){return new $.a(e,t)}}),Object(ne.b)();var fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=["appSettings","connections","recentProjects"],a=[p.a,function(e){return function(e){return function(t){return Object(v.c)(t),e(t)}}}];if(t){var o=n(383).createLocalStorage({paths:r});a=[].concat(Object(u.a)(a),[o])}if("development"===b.a.get()){var s=n(1377),i=n(1378);a=[].concat(Object(u.a)(a),[i.default(),s.createLogger()])}return Object(l.createStore)(m,t?Object(h.mergeInitialState)(e,r):e,l.applyMiddleware.apply(void 0,Object(u.a)(a)))}(j,!0);i.a.render(a.a.createElement(o.a,{store:fe},a.a.createElement(c.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},14:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"a",function(){return m}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"g",function(){return f}),n.d(t,"d",function(){return g});var r,a=n(11),o=n(20),s=n(18),i=n(19),c=n(641);!function(e){e.Unknown="unknown",e.GenericRenderError="genericRenderError",e.CanvasError="canvasError",e.V1ImportError="v1ImportError",e.ProjectUploadError="projectUploadError",e.ProjectDeleteError="projectDeleteError",e.ProjectInvalidJson="projectInvalidJson",e.ProjectInvalidSecurityToken="projectInvalidSecurityToken",e.ProjectDuplicateName="projectDuplicateName",e.SecurityTokenNotFound="securityTokenNotFound",e.ExportFormatNotFound="exportFormatNotFound",e.PasteRegionTooBig="pasteRegionTooBig",e.OverloadedKeyBinding="overloadedKeyBinding",e.ActiveLearningPredictionError="activeLearningPredictionError"}(r||(r={}));var u,l,p,d,f,g,m=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(s.a)(t).call(this,n))).errorCode=e,r.message=n,r.title=i,r}return Object(i.a)(t,e),t}(Object(c.a)(Error));!function(e){e.Local="local",e.Cloud="cloud",e.Other="other"}(u||(u={})),function(e){e.Coco="coco",e.File="file",e.Url="url"}(l||(l={})),function(e){e[e.Unknown=0]="Unknown",e[e.Image=1]="Image",e[e.Video=2]="Video",e[e.VideoFrame=3]="VideoFrame",e[e.TFRecord=4]="TFRecord"}(p||(p={})),function(e){e[e.NotVisited=0]="NotVisited",e[e.Visited=1]="Visited",e[e.Tagged=2]="Tagged"}(d||(d={})),function(e){e.Polyline="POLYLINE",e.Point="POINT",e.Rectangle="RECTANGLE",e.Polygon="POLYGON",e.Square="SQUARE"}(f||(f={})),function(e){e.Rectangle="RECT",e.Polygon="POLYGON",e.Polyline="POLYLINE",e.Point="POINT",e.Select="SELECT",e.CopyRect="COPYRECT",e.None="NONE"}(g||(g={}))},151:function(e){e.exports={name:"vott",version:"2.1.0",author:{name:"Microsoft",url:"https://github.com/Microsoft/VoTT"},description:"Visual Object Tagging Tool (VoTT) - an annotation and labeling tool for images and video.",homepage:"https://github.com/Microsoft/VoTT",repository:{type:"git",url:"https://github.com/Microsoft/VoTT.git"},license:"MIT",private:!0,main:"build/main.js",dependencies:{"@azure/storage-blob":"^10.3.0","@tensorflow/tfjs":"^1.0.3","@types/snapsvg":"^0.4.35",axios:"^0.18.0",bootstrap:"^4.1.3","buffer-reverse":"^1.0.1","crypto-js":"^3.1.9-1",dotenv:"^7.0.0","google-protobuf":"^3.6.1","jpeg-js":"^0.3.4",json2csv:"^4.5.0",lodash:"^4.17.11","md5.js":"^1.3.5","node-fetch":"^2.3.0","node-int64":"^0.4.0","rc-align":"^2.4.5","rc-checkbox":"^2.1.6","rc-menu":"^7.4.21","rc-slider":"^8.6.7",react:"^16.7.0","react-appinsights":"^3.0.0-rc.5","react-color":"^2.17.0","react-dom":"^16.7.0","react-jsonschema-form":"^1.3.0","react-localization":"^1.0.13","react-modal":"^3.8.1","react-redux":"^5.1.1","react-router-dom":"^4.3.1","react-scripts":"2.1.1","react-split-pane":"^0.1.87","react-tag-input":"^6.1.0","react-toastify":"^4.5.2","react-virtualized":"^9.21.0","react-vis":"^1.11.6",reactstrap:"^6.5.0",redux:"^4.0.1","redux-thunk":"^2.3.0",rimraf:"^2.6.2",shortid:"^2.2.14","video-react":"^0.13.2","vott-ct":"2.1.24","vott-react":"^0.2.10"},scripts:{start:"nf start -p 3000",compile:"tsc",build:"react-scripts build","webpack:dev":"webpack --config ./config/webpack.dev.js","webpack:prod":"webpack -p --config ./config/webpack.prod.js","react-start":"react-scripts start","electron:run:dev":"npm run webpack:dev && electron . --remote-debugging-port=9223","electron:run:prod":"npm run webpack:prod && electron . --remote-debugging-port=9223","electron:start:dev":"npm run webpack:dev && npm run electron-start","electron:start:prod":"npm run webpack:prod && npm run electron-start","electron-start":"node src/electron/start",eject:"react-scripts eject","release-pr":"./scripts/release-pr.sh","release-web":"npm run build && npm run webpack:prod","release-ci":"bash ./scripts/build.sh",release:"npm run build && npm run webpack:prod && electron-builder",pretest:"./node_modules/.bin/tslint 'src/**/*.ts*'",lintfix:"./node_modules/.bin/tslint 'src/**/*.ts*' --fix",test:"react-scripts test --env=jsdom --silent","test:ci":"cross-env CI=true npm run test","test:coverage":"npm run test -- --coverage",plato:"scripts/generate-report.sh -o report -v $(node -pe \"require('./package.json').version\") -c $(git rev-parse --short HEAD)",postinstall:"electron-builder install-app-deps",predebug:"npm run build && npm run webpack:dev"},eslintConfig:{extends:"react-app"},browserslist:[">0.2%","not dead","not ie <= 11","not op_mini all"],devDependencies:{"@fortawesome/fontawesome-free":"^5.5.0","@types/axios":"^0.14.0","@types/dotenv":"^6.1.0","@types/enzyme":"^3.1.15","@types/jest":"23.3.9","@types/json2csv":"^4.4.0","@types/node":"10.12.7","@types/react":"16.7.6","@types/react-dom":"16.0.9","@types/react-jsonschema-form":"^1.0.12","@types/react-router-dom":"^4.3.1","@types/react-split-pane":"^0.1.67","@types/react-toastify":"^4.0.1","@types/reactstrap":"^6.4.3","@types/redux-logger":"^3.0.6","@types/redux-mock-store":"^1.0.0","cross-env":"^5.2.0",electron:"^3.0.13","electron-builder":"^20.38.3",enzyme:"^3.7.0","enzyme-adapter-react-16":"^1.7.0",foreman:"^3.0.1","jest-enzyme":"^7.0.1",jquery:"^3.3.1","node-sass":"^4.10.0","popper.js":"^1.14.6","redux-immutable-state-invariant":"^2.1.0","redux-logger":"^3.0.6","redux-mock-store":"^1.5.3","ts-loader":"^5.3.0",tslint:"^5.11.0",typescript:"^3.1.6",webpack:"^4.19.1","webpack-cli":"^3.1.2","webpack-merge":"^4.1.5"},engines:{node:">=10.14.2",npm:">=6.4.1"}}},152:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return i});var r=n(70),a=n(17);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return r.lib.WordArray.random(e).toString(r.enc.Base64)}function s(e,t){return a.a.null(e),function(e,t){a.a.empty(e),a.a.empty(t);try{var n=r.enc.Base64.parse(t),o=r.lib.WordArray.random(24),s={ciphertext:r.AES.encrypt(e,n,{iv:o}).ciphertext.toString(),iv:o.toString()},i=r.enc.Utf8.parse(JSON.stringify(s));return r.enc.Base64.stringify(i)}catch(c){throw new Error("Error encrypting data - ".concat(c.message))}}(JSON.stringify(e),t)}function i(e,t){var n=function(e,t){a.a.empty(e),a.a.empty(t);try{var n=r.enc.Base64.parse(t),o=r.enc.Base64.parse(e).toString(r.enc.Utf8),s=JSON.parse(o),i=r.enc.Hex.parse(s.iv),c=r.lib.CipherParams.create({ciphertext:r.enc.Hex.parse(s.ciphertext),iv:r.enc.Hex.parse(s.iv)});return r.AES.decrypt(c,n,{iv:i}).toString(r.enc.Utf8)}catch(u){throw new Error("Error decrypting data - ".concat(u.message))}}(e,t);return JSON.parse(n)}},153:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(11),a=n(12),o=n(94),s="LocalFileSystem",i=function(){function e(t){Object(r.a)(this,e),this.options=t,this.options||(this.options={folderPath:null})}return Object(a.a)(e,[{key:"selectContainer",value:function(){return o.a.send("".concat(s,":selectContainer"))}},{key:"readText",value:function(e){var t=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":readText"),[t])}},{key:"readBinary",value:function(e){var t=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":readBinary"),[t])}},{key:"deleteFile",value:function(e){var t=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":deleteFile"),[t])}},{key:"writeText",value:function(e,t){var n=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":writeText"),[n,t])}},{key:"writeBinary",value:function(e,t){var n=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":writeBinary"),[n,t])}},{key:"listFiles",value:function(e,t){var n=e?[this.options.folderPath,e].join("/"):this.options.folderPath;return o.a.send("".concat(s,":listFiles"),[n])}},{key:"listContainers",value:function(e){var t=e?[this.options.folderPath,e].join("/"):this.options.folderPath;return o.a.send("".concat(s,":listContainers"),[t])}},{key:"createContainer",value:function(e){var t=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":createContainer"),[t])}},{key:"deleteContainer",value:function(e){var t=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":deleteContainer"),[t])}},{key:"getAssets",value:function(e){var t=[this.options.folderPath,e].join("/");return o.a.send("".concat(s,":getAssets"),[t])}}]),e}()},17:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(11),a=n(12),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"empty",value:function(e,t,n){if(!1===!!e||0===e.trim().length)throw n=n||"'".concat(t||"value","' cannot be null or empty"),new Error(n)}},{key:"null",value:function(e,t,n){if(!1===!!e)throw n=n||"'".concat(t||"value","' cannot be null or undefined"),new Error(n)}},{key:"expression",value:function(e,t,n,r){if(!1===!!e||!t(e))throw r=r||"'".concat(n||"value","' is not a valid value"),new Error(r)}}]),e}()},177:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(11),a=n(12),o=n(17),s=n(123),i=n(82),c=n(33),u=function(){function e(t){Object(r.a)(this,e),o.a.null(t),this.imageMessages=[];for(var n=0;n<t.length;){var a=t.slice(n,n+8),c=Object(i.e)(a),u=Object(i.d)(Object(i.a)(a));n+=8;var l=t.readUInt32LE(n);if(n+=4,u!==l){console.log("Wrong Length CRC");break}var p=t.slice(n,n+c),d=Object(i.d)(Object(i.a)(p));n+=c;var f=t.readUInt32LE(n);if(n+=4,d!==f){console.log("Wrong Data CRC");break}var g=s.TFRecordsImageMessage.deserializeBinary(p);this.imageMessages.push(g)}}return Object(a.a)(e,[{key:"toArray",value:function(){return this.imageMessages.map(function(e){return e.toObject()})}},{key:"getFeature",value:function(e,t,n){var r=this.imageMessages[e].getContext().getFeatureMap().get(t);switch(n){case c.a.String:return Object(i.f)(r.getBytesList().array[0][0]);case c.a.Binary:return r.getBytesList().array[0][0];case c.a.Int64:return r.getInt64List().array[0][0];case c.a.Float:return r.getFloatList().array[0][0]}}},{key:"getArrayFeature",value:function(e,t,n){var r=this.imageMessages[e].getContext().getFeatureMap().get(t);switch(n){case c.a.String:return r.getBytesList().array[0].map(function(e){return Object(i.f)(e)});case c.a.Binary:return r.getBytesList().array[0];case c.a.Int64:return r.getInt64List().array[0];case c.a.Float:return r.getFloatList().array[0]}}},{key:"length",get:function(){return this.imageMessages.length}}]),e}()},178:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(16),u=n(1),l=n.n(u),p=n(74),d=function(e){function t(e,n){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e,n))).getMessage=function(e){return"function"===typeof e?e.apply(Object(c.a)(Object(c.a)(a)),a.props.params):e},a.state={isOpen:e.show,isRendered:e.show,isButtonSelected:!1},a.toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.open=a.open.bind(Object(c.a)(Object(c.a)(a))),a.close=a.close.bind(Object(c.a)(Object(c.a)(a))),a.onFooterClick=a.onFooterClick.bind(Object(c.a)(Object(c.a)(a))),a.onClosed=a.onClosed.bind(Object(c.a)(Object(c.a)(a))),a}return Object(i.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return this.state.isRendered?l.a.createElement(p.Modal,{className:"messagebox-modal",isOpen:this.state.isOpen,onClosed:this.onClosed},l.a.createElement(p.ModalHeader,{toggle:this.toggle},this.props.title),l.a.createElement(p.ModalBody,null,this.getMessage(this.props.message)),!this.props.hideFooter&&l.a.createElement(p.ModalFooter,{onClick:this.onFooterClick},this.props.children)):null}},{key:"open",value:function(){this.setState({isOpen:!0,isRendered:!0,isButtonSelected:!1})}},{key:"close",value:function(){var e=this;this.setState({isOpen:!1},function(){!e.state.isButtonSelected&&e.props.onCancel&&e.props.onCancel()})}},{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&this.setState({isOpen:this.props.show,isRendered:this.props.show})}},{key:"onFooterClick",value:function(e){var t=this,n=e.target;"BUTTON"===n.tagName&&this.setState({isButtonSelected:!0},function(){t.close(),t.props.onButtonSelect&&t.props.onButtonSelect(n)})}},{key:"toggle",value:function(){this.state.isOpen?this.close():this.open()}},{key:"onClosed",value:function(){this.setState({isRendered:!1})}}]),t}(l.a.Component)},179:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return b});var r=n(269),a=n(135),o=n(394),s=n(272),i=n(1386),c=n(592),u=n(151),l=n(62),p=n(623);Object(p.config)();var d,f="0b9e5117-c78d-40c9-9338-921092cde49a",g=!1,m=250;function h(){if(!Object(l.e)()){o.a.setContext({AppVersion:u.version});var e={instrumentationKey:f,maxBatchSize:m,extensions:[o.a],extensionConfig:Object(r.a)({},o.a.extensionId,{debug:g,history:s.a})};(d=new i.a({config:e})).loadAppInsights()}}function v(e){if(!Object(l.e)()){var t={error:new Error(e.errorCode),properties:{message:e.message},severityLevel:c.a.Error};d.trackException(t)}}function b(e){Object(l.e)()||d.trackEvent({name:e.type})}"production"!==a.a.get()&&(g=!0,m=0)},181:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o});var r="item {\n id: ${id}\n name: '${tag}'\n}\n",a='<annotation verified="yes">\n    <folder>Annotation</folder>\n    <filename>${fileName}</filename>\n    <path>${filePath}</path>\n    <source>\n        <database>Unknown</database>\n    </source>\n    <size>\n        <width>${width}</width>\n        <height>${height}</height>\n        <depth>3</depth>\n    </size>\n    <segmented>0</segmented>\n    ${objects}\n</annotation>\n',o="<object>\n    <name>${name}</name>\n    <pose>Unspecified</pose>\n    <truncated>0</truncated>\n    <difficult>0</difficult>\n    <bndbox>\n        <xmin>${xmin}</xmin>\n        <ymin>${ymin}</ymin>\n        <xmax>${xmax}</xmax>\n        <ymax>${ymax}</ymax>\n    </bndbox>\n</object>"},271:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(16),u=n(1),l=n.n(u),p=n(74),d=n(178),f=function(e){function t(e,n){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e,n))).state={params:null},a.messageBox=l.a.createRef(),a.open=a.open.bind(Object(c.a)(Object(c.a)(a))),a.close=a.close.bind(Object(c.a)(Object(c.a)(a))),a.onCloseClick=a.onCloseClick.bind(Object(c.a)(Object(c.a)(a))),a}return Object(i.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,{ref:this.messageBox,title:this.props.title,message:this.props.message,params:this.state.params,show:this.props.show},l.a.createElement(p.Button,{autoFocus:!0,color:this.props.closeButtonColor||"primary",onClick:this.onCloseClick},this.props.closeButtonText||"OK"))}},{key:"open",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.setState({params:n},function(){return e.messageBox.current.open()})}},{key:"close",value:function(){this.messageBox.current.close()}},{key:"onCloseClick",value:function(){this.props.onClose&&this.props.onClose.apply(null,this.state.params)}}]),t}(l.a.Component)},272:function(e,t,n){"use strict";var r=n(276);t.a=Object(r.a)()},30:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.TOGGLE_DEV_TOOLS_SUCCESS="TOGGLE_DEV_TOOLS_SUCCESS",e.OPEN_LOCAL_FOLDER_SUCCESS="OPEN_LOCAL_FOLDER_SUCCESS",e.REFRESH_APP_SUCCESS="REFRESH_APP_SUCCESS",e.SAVE_APP_SETTINGS_SUCCESS="SAVE_APP_SETTINGS_SUCCESS",e.ENSURE_SECURITY_TOKEN_SUCCESS="ENSURE_SECURITY_TOKEN_SUCCESS",e.LOAD_PROJECT_SUCCESS="LOAD_PROJECT_SUCCESS",e.SAVE_PROJECT_SUCCESS="SAVE_PROJECT_SUCCESS",e.DELETE_PROJECT_SUCCESS="DELETE_PROJECT_SUCCESS",e.CLOSE_PROJECT_SUCCESS="CLOSE_PROJECT_SUCCESS",e.LOAD_PROJECT_ASSETS_SUCCESS="LOAD_PROJECT_ASSETS_SUCCESS",e.EXPORT_PROJECT_SUCCESS="EXPORT_PROJECT_SUCCESS",e.UPDATE_PROJECT_TAG_SUCCESS="UPDATE_PROJECT_TAG_SUCCESS",e.DELETE_PROJECT_TAG_SUCCESS="DELETE_PROJECT_TAG_SUCCESS",e.LOAD_CONNECTION_SUCCESS="LOAD_CONNECTION_SUCCESS",e.SAVE_CONNECTION_SUCCESS="SAVE_CONNECTION_SUCCESS",e.DELETE_CONNECTION_SUCCESS="DELETE_CONNECTION_SUCCESS",e.SAVE_ASSET_METADATA_SUCCESS="SAVE_ASSET_METADATA_SUCCESS",e.LOAD_ASSET_METADATA_SUCCESS="LOAD_ASSET_METADATA_SUCCESS",e.ANY_OTHER_ACTION="ANY_OTHER_ACTION_SUCCESS",e.SHOW_ERROR="SHOW_ERROR",e.CLEAR_ERROR="CLEAR_ERROR"}(r||(r={}))},33:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c});var r,a=n(11),o=n(12),s=n(123),i=n(82);!function(e){e[e.String=0]="String",e[e.Binary=1]="Binary",e[e.Int64=2]="Int64",e[e.Float=3]="Float"}(r||(r={}));var c=function(){function t(){Object(a.a)(this,t),this.features=new s.Features}return Object(o.a)(t,null,[{key:"buildTFRecords",value:function(t){return e.concat(t.map(function(t){var n=t.length,r=Object(i.c)(n),a=Object(i.b)(Object(i.d)(Object(i.a)(r))),o=Object(i.b)(Object(i.d)(Object(i.a)(t)));return e.concat([r,a,t,o])}))}}]),Object(o.a)(t,[{key:"addFeature",value:function(e,t,n){this.addArrayFeature(e,t,[n])}},{key:"addArrayFeature",value:function(e,t,n){var a=new s.Feature;switch(t){case r.String:var o=new s.BytesList;n.forEach(function(e){o.addValue(Object(i.g)(e))}),a.setBytesList(o);break;case r.Binary:var c=new s.BytesList;n.forEach(function(e){c.addValue(e)}),a.setBytesList(c);break;case r.Int64:var u=new s.Int64List;n.forEach(function(e){u.addValue(e)}),a.setInt64List(u);break;case r.Float:var l=new s.FloatList;n.forEach(function(e){l.addValue(e)}),a.setFloatList(l)}this.features.getFeatureMap().set(e,a)}},{key:"build",value:function(){var t=new s.TFRecordsImageMessage;t.setContext(this.features);var n=t.serializeBinary();return new e(n)}}]),t}()}).call(this,n(39).Buffer)},383:function(e,t,n){"use strict";n.r(t),n.d(t,"createLocalStorage",function(){return a}),n.d(t,"mergeInitialState",function(){return o});var r=n(15);function a(e){return function(t){return function(n){return function(r){var a=n(r),o=t.getState();return e.paths.forEach(function(e){if(o[e]){var t=JSON.stringify(o[e]);localStorage.setItem(e,t)}}),a}}}}function o(e,t){var n=Object(r.a)({},e);return t.forEach(function(e){var t=localStorage.getItem(e);t&&(n[e]=JSON.parse(t))}),n}},390:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r=n(4),a=n.n(r),o=n(8),s=n(11),i=n(12),c=n(14),u=n(64),l=n(157),p=n(1391),d=n(1390),f=n(156),g=n(1389),m=n(1388),h=n(1387),v=function(){function t(e){Object(s.a)(this,t),this.options=e,this.storageType=c.h.Cloud}return Object(i.a)(t,[{key:"initialize",value:function(){var e=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options.containerName,!this.options.createContainer){e.next=6;break}return e.next=4,this.createContainer(t);case 4:e.next=11;break;case 6:return e.next=8,this.listContainers(null);case 8:if(-1!==e.sent.indexOf(t)){e.next=11;break}throw new Error('Container "'.concat(t,'" does not exist'));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readText",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getBlockBlobURL(t),e.next=3,n.download(l.a.none,0);case 3:return r=e.sent,e.next=6,this.bodyToString(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readBinary",value:function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readText(n);case 2:return r=t.sent,t.abrupt("return",e.from(r));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"writeText",value:function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getBlockBlobURL(t),e.next=3,r.upload(l.a.none,n,n.length);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"writeBinary",value:function(e,t){return this.writeText(e,t)}},{key:"deleteFile",value:function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlockBlobURL(t).delete(l.a.none);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listFiles",value:function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r,o,s,i,c,u,p,d,f,g;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=this.getContainerURL();case 2:return e.next=4,s.listBlobFlatSegment(l.a.none,o);case 4:for(i=e.sent,o=i.nextMarker,c=!0,u=!1,p=void 0,e.prev=9,d=i.segment.blobItems[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)g=f.value,(n&&g.name.endsWith(n)||!n)&&r.push(g.name);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),u=!0,p=e.t0;case 17:e.prev=17,e.prev=18,c||null==d.return||d.return();case 20:if(e.prev=20,!u){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:if(o){e.next=2;break}case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"listContainers",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o,s,i,c,u,p,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[];case 1:return e.next=3,this.getServiceURL().listContainersSegment(l.a.none,r);case 3:for(o=e.sent,r=o.nextMarker,s=!0,i=!1,c=void 0,e.prev=8,u=o.containerItems[Symbol.iterator]();!(s=(p=u.next()).done);s=!0)d=p.value,n.push(d.name);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),i=!0,c=e.t0;case 16:e.prev=16,e.prev=17,s||null==u.return||u.return();case 19:if(e.prev=19,!i){e.next=22;break}throw c;case 22:return e.finish(19);case 23:return e.finish(16);case 24:if(r){e.next=1;break}case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(t){return e.apply(this,arguments)}}()},{key:"createContainer",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getContainerURL(),e.prev=1,e.next=4,n.create(l.a.none);case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),409!==e.t0.statusCode){e.next=10;break}return e.abrupt("return");case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteContainer",value:function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerURL().delete(l.a.none);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAssets",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o,s,i,l,p,d,f,g;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||this.options.containerName,e.next=3,this.listFiles(t);case 3:for(n=e.sent,r=[],o=!0,s=!1,i=void 0,e.prev=8,l=n[Symbol.iterator]();!(o=(p=l.next()).done);o=!0)d=p.value,f=this.getUrl(d),(g=u.a.createAssetFromFilePath(f,this.getFileName(f))).type!==c.c.Unknown&&r.push(g);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),s=!0,i=e.t0;case 16:e.prev=16,e.prev=17,o||null==l.return||l.return();case 19:if(e.prev=19,!s){e.next=22;break}throw i;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getFileName",value:function(e){var t=e.split("/");return t[t.length-1].split("?")[0]}},{key:"getAccountUrl",value:function(){return"https://".concat(this.options.accountName,".blob.core.windows.net")+(this.options.sas||"")}},{key:"getCredential",value:function(){return this.options.oauthToken?new p.a(this.options.oauthToken):new d.a}},{key:"getServiceURL",value:function(){var e=this.getCredential(),t=f.a.newPipeline(e),n=this.getAccountUrl();return new g.a(n,t)}},{key:"getContainerURL",value:function(e,t){return m.a.fromServiceURL(e||this.getServiceURL(),t||this.options.containerName)}},{key:"getBlockBlobURL",value:function(e){var t=this.getContainerURL();return h.a.fromContainerURL(t,e)}},{key:"getUrl",value:function(e){return this.getBlockBlobURL(e).url}},{key:"bodyToString",value:function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.blobBody;case 2:return r=e.sent,e.abrupt("return",this.blobToString(r));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"blobToString",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise(function(e,r){n.onloadend=function(t){e(t.target.result)},n.onerror=r,n.readAsText(t)}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(39).Buffer)},392:function(e,t){},411:function(e,t,n){},449:function(e){e.exports={sas:{"ui:widget":"protectedInput"},createContainer:{"ui:widget":"checkbox"}}},450:function(e){e.exports={apiKey:{"ui:widget":"protectedInput"}}},451:function(e){e.exports={folderPath:{"ui:widget":"localFolderPicker"}}},515:function(e,t,n){},516:function(e){e.exports=["#5db300","#e81123","#6917aa","#015cda","#4894fe","#6b849c","#70c400","#f7929a","#257ffe","#ddabe9","#ff8c00","#386300","#b40e1b","#68217a","#33cccc","#016afe","#595959","#808080","#990066","#00bcf2"]},53:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var r=n(4),a=n.n(r),o=n(8),s=n(11),i=n(12),c=n(97),u=n.n(c),l=n(14),p=n(17),d=n(177),f=n(33),g=function(){function t(){Object(s.a)(this,t)}return Object(i.a)(t,null,[{key:"readAsText",value:function(e){var t;return p.a.null(e),new Promise(function(n,r){var a=new FileReader;a.onerror=r,a.onload=function(){a.result?(t={content:a.result,file:e},n(t)):r()};try{a.readAsText(e)}catch(o){r(o)}})}},{key:"readAssetAttributes",value:function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.a.null(t),e.t0=t.type,e.next=e.t0===l.c.Image?4:e.t0===l.c.Video?7:e.t0===l.c.TFRecord?10:13;break;case 4:return e.next=6,this.readImageAttributes(t.path);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,this.readVideoAttributes(t.path);case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,this.readTFRecordAttributes(t);case 12:return e.abrupt("return",e.sent);case 13:throw new Error("Asset not supported");case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readAssetAttributesWithBuffer",value:function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.a.null(t),e.next=3,this.readImageAttributes("data:image;base64,"+t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetBlob",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.a.null(t),n={responseType:"blob"},r=null,t.type!==l.c.VideoFrame){e.next=9;break}return e.next=6,this.getAssetFrameImage(t);case 6:r=e.sent,e.next=17;break;case 9:return e.next=11,u.a.get(t.path,n);case 11:if(200===(o=e.sent).status){e.next=14;break}throw new Error("Error downloading asset binary");case 14:return e.next=16,o.data;case 16:r=e.sent;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetArray",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAssetBlob(t);case 2:return n=e.sent,e.next=5,new Response(n).arrayBuffer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetFrameImage",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var a=!0,o=n.videoAssetFiles[t.parent.name];t.name.toLowerCase().endsWith(".jpg")||(t.name+=".jpg"),o||(o=document.createElement("video")),o.onloadedmetadata=function(){o.currentTime=t.timestamp},o.onseeked=function(){var t=document.createElement("canvas");t.height=o.videoHeight,t.width=o.videoWidth,t.getContext("2d").drawImage(o,0,0,t.width,t.height),t.toBlob(e)},o.onerror=r,a?o.src=t.parent.path:o.currentTime=t.timestamp}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readVideoAttributes",value:function(e){return new Promise(function(t,n){var r=document.createElement("video");r.onloadedmetadata=function(){t({width:r.videoWidth,height:r.videoHeight,duration:r.duration})},r.onerror=n,r.src=e})}},{key:"readImageAttributes",value:function(e){return new Promise(function(t,n){var r=document.createElement("img");r.onload=function(){t({width:r.naturalWidth,height:r.naturalHeight})},r.onerror=n,r.src=e})}},{key:"readTFRecordAttributes",value:function(){var t=Object(o.a)(a.a.mark(function t(n){var r,o,s,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,this.getAssetArray(n);case 3:return t.t1=t.sent,r=new t.t0(t.t1),o=new d.a(r),s=o.getFeature(0,"image/width",f.a.Int64),i=o.getFeature(0,"image/height",f.a.Int64),t.abrupt("return",{width:s,height:i});case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();g.videoAssetFiles={}}).call(this,n(39).Buffer)},556:function(e){e.exports={apiKey:{"ui:widget":"protectedInput"},description:{"ui:widget":"textarea"},projectId:{"ui:widget":"externalPicker","ui:options":{method:"GET",url:"https://${props.formContext.providerOptions.region}.api.cognitive.microsoft.com/customvision/v2.2/Training/projects",authHeaderName:"Training-key",authHeaderValue:"${props.formContext.providerOptions.apiKey}",keySelector:"${item.id}",valueSelector:"${item.name}"}},domainId:{"ui:widget":"externalPicker","ui:options":{method:"GET",url:"https://${props.formContext.providerOptions.region}.api.cognitive.microsoft.com/customvision/v2.2/Training/domains",authHeaderName:"Training-key",authHeaderValue:"${props.formContext.providerOptions.apiKey}",keySelector:"${item.id}",valueSelector:"${item.name}",filter:{left:"${item.type}",operator:"eq",right:"${props.formContext.providerOptions.projectType}"}}}}},557:function(e){e.exports={testTrainSplit:{"ui:widget":"slider"}}},558:function(e){e.exports={includeImages:{"ui:widget":"checkbox"}}},559:function(e){e.exports={testTrainSplit:{"ui:widget":"slider"},exportUnassigned:{"ui:widget":"checkbox"}}},560:function(e){e.exports={}},561:function(e){e.exports={includeImages:{"ui:widget":"checkbox"}}},587:function(e,t,n){},604:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return k});var r,a=n(11),o=n(12),s=n(20),i=n(18),c=n(19),u=n(1),l=n.n(u),p=n(71),d=n(1392),f=n(48),g=n(643),m=n(639),h=n(14),v=(n(1357),n(1359),n(621)),b=n(50),y=n(622),j=n(86),w=n(624),x=n(627),C=n(628),E=n(629),O=n(272);var k=Object(p.b)(function(e){return{currentProject:e.currentProject,appError:e.appError}},function(e){return{actions:Object(b.bindActionCreators)(v,e)}})(r=function(t){function n(e,t){var r;return Object(a.a)(this,n),(r=Object(s.a)(this,Object(i.a)(n).call(this,e,t))).state={currentProject:r.props.currentProject},r}return Object(c.a)(n,t),Object(o.a)(n,[{key:"componentDidCatch",value:function(e){this.props.actions.showError({errorCode:h.e.GenericRenderError,title:e.name,message:e.message})}},{key:"render",value:function(){var t=e&&e.process?e.process.platform:"web";return l.a.createElement(u.Fragment,null,l.a.createElement(y.a,{error:this.props.appError,onError:this.props.actions.showError,onClearError:this.props.actions.clearError}),(!this.props.appError||this.props.appError.errorCode!==h.e.GenericRenderError)&&l.a.createElement(j.c,null,l.a.createElement(d.a,{history:O.a},l.a.createElement("div",{className:"app-shell platform-".concat(t)},l.a.createElement(w.a,{icon:"fas fa-tags",title:this.props.currentProject?this.props.currentProject.name:""},l.a.createElement("div",{className:"app-help-menu-icon"},l.a.createElement(E.a,null))),l.a.createElement("div",{className:"app-main"},l.a.createElement(g.a,{project:this.props.currentProject}),l.a.createElement(m.a,null)),l.a.createElement(x.a,null,l.a.createElement(C.a,{project:this.props.currentProject})),l.a.createElement(f.ToastContainer,{className:"vott-toast-container"})))))}}]),n}(l.a.Component))||r}).call(this,n(49))},614:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(4),a=n.n(r),o=n(8),s=n(11),i=n(12),c=n(20),u=n(18),l=n(19),p=n(1),d=n.n(p),f=n(53),g=n(177),m=n(33),h=function(t){function n(){var e,t;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(t=Object(c.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(i)))).state={tfRecordImage64:"",hasError:!1},t.image=d.a.createRef(),t.updateImage=Object(o.a)(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getTFRecordBase64Image(t.props.asset);case 3:n=e.sent,t.setState({tfRecordImage64:n,hasError:!n}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t.setState({hasError:!0}),t.onError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,7]])})),t.onLoad=function(){t.props.onLoaded&&t.props.onLoaded(t.image.current),t.props.onActivated&&t.props.onActivated(t.image.current),t.props.onDeactivated&&t.props.onDeactivated(t.image.current)},t.onError=function(e){t.props.onError&&(t.state.tfRecordImage64||t.state.hasError)&&t.props.onError(e)},t}return Object(l.a)(n,t),Object(i.a)(n,[{key:"render",value:function(){return d.a.createElement("img",{ref:this.image,src:this.state.tfRecordImage64,onLoad:this.onLoad,onError:this.onError,crossOrigin:"anonymous"})}},{key:"componentDidMount",value:function(){var e=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateImage();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.asset===t.asset){e.next=3;break}return e.next=3,this.updateImage();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTFRecordBase64Image",value:function(){var t=Object(o.a)(a.a.mark(function t(n){var r,o,s,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,f.a.getAssetArray(n);case 3:return t.t1=t.sent,r=new t.t0(t.t1),o=new g.a(r),s=o.getFeature(0,"image/encoded",m.a.Binary),i=btoa(s.reduce(function(e,t){return e+String.fromCharCode(t)},"")),t.abrupt("return","data:image;base64,"+i);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),n}(d.a.Component)}).call(this,n(39).Buffer)},62:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return u});var r,a,o=n(128),s=n.n(o);function i(){var e,t=s.a.release().toLowerCase();return e=t.indexOf("electron")>-1||"electron"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_COMMIT_SHA:"4464203",REACT_APP_VERSION:"2.1.0",REACT_APP_INSTRUMENTATION_KEY:"0b9e5117-c78d-40c9-9338-921092cde49a"}).HOST_TYPE?r.Electron:r.Browser,{release:t,type:e}}function c(){return i().type===r.Electron}function u(){return i().type===r.Browser}!function(e){e[e.Electron=1]="Electron",e[e.Browser=2]="Browser",e[e.All=3]="All"}(r||(r={})),function(e){e.Web="web",e.Windows="win32",e.Linux="linux",e.MacOS="darwin"}(a||(a={})),t.c=i},621:function(e,t,n){"use strict";n.r(t),n.d(t,"showError",function(){return o}),n.d(t,"clearError",function(){return s}),n.d(t,"showErrorAction",function(){return i}),n.d(t,"clearErrorAction",function(){return c});var r=n(65),a=n(30);function o(e){return function(t){t(i(e))}}function s(){return function(e){e(c())}}var i=Object(r.b)(a.a.SHOW_ERROR),c=Object(r.a)(a.a.CLEAR_ERROR)},622:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(16),u=n(1),l=n.n(u),p=n(14),d=n(7),f=n(271),g=n(135),m=n(179),h=function(e){function t(e,n){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e,n))).onWindowError=a.onWindowError.bind(Object(c.a)(Object(c.a)(a))),a.onUnhandedRejection=a.onUnhandedRejection.bind(Object(c.a)(Object(c.a)(a))),a}return Object(i.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("error",this.onWindowError,!0),window.addEventListener("unhandledrejection",this.onUnhandedRejection,!0)}},{key:"componentWillMount",value:function(){window.removeEventListener("error",this.onWindowError),window.removeEventListener("unhandledrejection",this.onUnhandedRejection)}},{key:"render",value:function(){var e=!!this.props.error,t=null;return e&&(t=this.getLocalizedError(this.props.error)),e?l.a.createElement(f.a,{title:t?t.title:"",message:t?t.message:"",closeButtonColor:"secondary",show:e,onClose:this.props.onClearError}):null}},{key:"onWindowError",value:function(e){this.handleError(e.error),e.preventDefault()}},{key:"onUnhandedRejection",value:function(e){this.handleError(e.reason||e.detail),e.preventDefault()}},{key:"handleError",value:function(e){if(e&&!this.isReactDnDError(e)){var t=null;if("string"===typeof e)t={errorCode:p.e.Unknown,message:e||this.getUnknownErrorMessage(e)};else if(e instanceof p.a){var n=e;t={title:n.title||d.c.errors.unknown.title,errorCode:n.errorCode,message:n.message||this.getUnknownErrorMessage(e)}}else if(e instanceof Error){var r=e;t={title:r.name||d.c.errors.unknown.title,errorCode:p.e.Unknown,message:r.message||this.getUnknownErrorMessage(e)}}else t={title:d.c.errors.unknown.title,errorCode:p.e.Unknown,message:this.getUnknownErrorMessage(e)};Object(m.b)(t),this.props.onError(t)}}},{key:"getUnknownErrorMessage",value:function(e){return"production"!==g.a.get()?l.a.createElement("pre",null,JSON.stringify(e,null,2)):d.c.errors.unknown.message}},{key:"getLocalizedError",value:function(e){if(e.errorCode===p.e.Unknown)return e;var t=d.c.errors[e.errorCode];return t?{errorCode:e.errorCode,message:t.message,title:t.title}:e}},{key:"isReactDnDError",value:function(e){return e&&"Invariant Violation"===e.name&&"Expected to find a valid target."===e.message}}]),t}(l.a.Component)},624:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var r=n(15),a=n(11),o=n(12),s=n(20),i=n(18),c=n(19),u=n(1),l=n.n(u),p=n(184),d=n(62),f=(n(1371),n(7)),g=function(t){function n(){var t,r;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return(r=Object(s.a)(this,(t=Object(i.a)(n)).call.apply(t,[this].concat(c)))).state={isElectron:!1,platform:e&&e.process&&e.process.platform?e.process.platform:"web",maximized:!1,fullscreen:!1,menu:null},r.menu=l.a.createRef(),r.onMaximize=function(e){r.setState({maximized:e})},r.onFullScreen=function(e){r.setState({fullscreen:e})},r.renderMenu=function(e){return e?e.items.map(r.renderMenuItem):null},r.renderMenuItem=function(e,t){if(!e.visible)return null;switch(e.type){case"submenu":return l.a.createElement(p.c,{title:e.label,key:e.label,popupOffset:[0,0]},r.renderMenu(e.submenu));case"separator":return l.a.createElement(p.a,{key:t});case"checkbox":return l.a.createElement(p.b,{key:e.label,disabled:!e.enabled,onClick:function(t){return r.onMenuItemClick(t,e)}},l.a.createElement("div",{className:"menu-item-container"},Boolean(e.checked)&&l.a.createElement("div",{className:"menu-item-checkbox"},l.a.createElement("i",{className:"fas fa-check"})),l.a.createElement("div",{className:"menu-item-label"},e.label,e.sublabel),l.a.createElement("div",{className:"menu-item-accelerator"},r.getAcceleratorString(e))));case"normal":return l.a.createElement(p.b,{key:e.label,disabled:!e.enabled,onClick:function(t){return r.onMenuItemClick(t,e)}},l.a.createElement("div",{className:"menu-item-container"},l.a.createElement("div",{className:"menu-item-label"},e.label,e.sublabel),l.a.createElement("div",{className:"menu-item-accelerator"},r.getAcceleratorString(e))))}},r.syncTitle=function(){r.state.isElectron&&r.currentWindow.setTitle("".concat(r.props.title," - VoTT"))},r.minimizeWindow=function(){r.currentWindow.minimize()},r.maximizeWindow=function(){r.currentWindow.maximize()},r.unmaximizeWindow=function(){r.currentWindow.unmaximize()},r.closeWindow=function(){r.currentWindow.close()},r.onMenuItemSelected=function(e,t){r.menu.current.store.setState({openKeys:[],selectedKeys:[]})},r}return Object(c.a)(n,t),Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;!!window.require&&(this.remote=window.require("electron").remote,this.currentWindow=this.remote.getCurrentWindow(),this.currentWindow.on("maximize",function(){return e.onMaximize(!0)}),this.currentWindow.on("unmaximize",function(){return e.onMaximize(!1)}),this.currentWindow.on("enter-full-screen",function(){return e.onFullScreen(!0)}),this.currentWindow.on("leave-full-screen",function(){return e.onFullScreen(!1)}),this.setState({isElectron:!0,maximized:this.currentWindow.isMaximized(),fullscreen:this.currentWindow.isFullScreen(),menu:this.remote.Menu.getApplicationMenu()}))}},{key:"componentDidUpdate",value:function(e){this.props.title!==e.title&&this.syncTitle()}},{key:"render",value:function(){return this.state.fullscreen?null:l.a.createElement("div",{className:"title-bar bg-lighter-3"},(this.state.platform===d.b.Windows||this.state.platform===d.b.Web)&&l.a.createElement("div",{className:"title-bar-icon"},"string"===typeof this.props.icon&&l.a.createElement("i",{className:"".concat(this.props.icon)}),"string"!==typeof this.props.icon&&this.props.icon),this.state.platform===d.b.Windows&&l.a.createElement("div",{className:"title-bar-menu"},l.a.createElement(p.d,{ref:this.menu,mode:"horizontal",selectable:!1,triggerSubMenuAction:"click",onClick:this.onMenuItemSelected},this.renderMenu(this.state.menu))),l.a.createElement("div",{className:"title-bar-main"},this.props.title||"Welcome"," - VoTT"),l.a.createElement("div",{className:"title-bar-controls"},this.props.children,this.state.platform===d.b.Windows&&l.a.createElement("ul",null,l.a.createElement("li",{title:f.c.titleBar.minimize,className:"btn-window-minimize",onClick:this.minimizeWindow},l.a.createElement("i",{className:"far fa-window-minimize"})),!this.state.maximized&&l.a.createElement("li",{title:f.c.titleBar.maximize,className:"btn-window-maximize",onClick:this.maximizeWindow},l.a.createElement("i",{className:"far fa-window-maximize"})),this.state.maximized&&l.a.createElement("li",{title:f.c.titleBar.restore,className:"btn-window-restore",onClick:this.unmaximizeWindow},l.a.createElement("i",{className:"far fa-window-restore"})),l.a.createElement("li",{title:f.c.titleBar.close,className:"btn-window-close",onClick:this.closeWindow},l.a.createElement("i",{className:"fas fa-times"})))))}},{key:"onMenuItemClick",value:function(e,t){t.click&&t.click.call(t,t,this.currentWindow),this.setState({menu:Object(r.a)({},this.state.menu)})}},{key:"getAcceleratorString",value:function(e){var t=e.accelerator||this.getAcceleratorFromRole(e.role);return t?t.replace("CmdOrCtrl","Ctrl"):null}},{key:"getAcceleratorFromRole",value:function(e){switch(e){case"undo":return"CmdOrCtrl+Z";case"redo":return"CmdOrCtrl+Y";case"cut":return"CmdOrCtrl+X";case"copy":return"CmdOrCtrl+C";case"paste":return"CmdOrCtrl+V";case"selectall":return"CmdOrCtrl+A";case"minimize":return"CmdOrCtrl+M";case"close":return"CmdOrCtrl+W";case"quit":return"CmdOrCtrl+Q";case"reload":return"CmdOrCtrl+R";case"togglefullscreen":return"F11";case"toggledevtools":return"CmdOrCtrl+Shift+I";case"resetzoom":return"CmdOrCtrl+0";case"zoomin":return"CmdOrCtrl+Shift+=";case"zoomout":return"CmdOrCtrl+-"}}}]),n}(l.a.Component)}).call(this,n(49))},627:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(1),u=n.n(c),l=n(125),p=(n(1373),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"status-bar"},u.a.createElement("div",{className:"status-bar-main"},this.props.children),u.a.createElement("div",{className:"status-bar-version"},u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement("i",{className:"fas fa-code-branch"}),u.a.createElement("span",null,l.a.version)))))}}]),t}(u.a.Component))},628:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(1),u=n.n(c),l=n(34),p=n.n(l),d=n(14),f=n(7),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.project;if(!e)return null;var t=p.a.values(e.assets),n=t.filter(function(e){return e.state===d.b.Visited||e.state===d.b.Tagged}),r=t.filter(function(e){return e.state===d.b.Tagged});return u.a.createElement("ul",null,u.a.createElement("li",{title:f.c.projectSettings.sourceConnection.title},u.a.createElement("i",{className:"fas fa-upload"}),u.a.createElement("span",{className:"metric-source-connection-name"},e.sourceConnection.name)),u.a.createElement("li",{title:f.c.projectSettings.targetConnection.title},u.a.createElement("i",{className:"fas fa-download"}),u.a.createElement("span",{className:"metric-target-connection-name"},e.targetConnection.name)),u.a.createElement("li",{title:Object(f.b)(f.c.projectMetrics.taggedAssets,{count:r.length})},u.a.createElement("i",{className:"fas fa-tag"}),u.a.createElement("span",{className:"metric-tagged-asset-count"},r.length)),u.a.createElement("li",{title:Object(f.b)(f.c.projectMetrics.visitedAssets,{count:n.length})},u.a.createElement("i",{className:"fas fa-eye"}),u.a.createElement("span",{className:"metric-visited-asset-count"},n.length)))}}]),t}(u.a.Component)},629:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(11),a=n(12),o=n(20),s=n(18),i=n(19),c=n(1),u=n.n(c),l=n(178),p=n(7),d=n(86),f=n(126),g=(n(1375),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={show:!1},n.icon="fa-question-circle",n.onClose=function(){n.setState({show:!1}),n.props.onClose&&n.props.onClose()},n.getHelpBody=function(){var e=n.context.keyboard.getRegistrations()[d.a.KeyDown];if(e){var t=n.groupKeys(e);return u.a.createElement("div",{className:"help-body container"},t.map(function(t){return t.length?n.getRegistrationRow(t,e):null}))}},n.groupKeys=function(e){var t=Object.keys(e),r=n.consolidateKeyCasings(t),a=[],o=new Set,s=!0,i=!1,c=void 0;try{for(var u,l=r[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var p=u.value,d=[p];if(!o.has(p)){o.add(p);var f=!0,g=!1,m=void 0;try{for(var h,v=r[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var b=h.value;!o.has(b)&&n.bindingEquals(e[p],e[b])&&(d.push(b),o.add(b))}}catch(y){g=!0,m=y}finally{try{f||null==v.return||v.return()}finally{if(g)throw m}}a.push(d)}}}catch(y){i=!0,c=y}finally{try{s||null==l.return||l.return()}finally{if(i)throw c}}return a},n.consolidateKeyCasings=function(e){var t={},n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value,c=i.toLowerCase();t[c]||(t[c]=i)}}catch(u){r=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return Object.keys(t).map(function(e){return t[e]})},n.getRegistrationRow=function(e,t){var r=t[e[0]];if(r)return u.a.createElement("div",{key:r.displayName,className:"help-key row"},u.a.createElement("div",{className:"col-1 keybinding-icon ".concat(r.icon?"fas ".concat(r.icon):"")}),u.a.createElement("div",{className:"col-4 keybinding-accelerator"},n.stringifyGroup(e)),u.a.createElement("div",{className:"col-6 keybinding-name"},r.displayName))},n}return Object(i.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"help-menu-button",onClick:function(){return e.setState({show:!0})}},u.a.createElement("i",{className:"fas ".concat(this.icon)}),u.a.createElement(f.a,{displayName:p.c.editorPage.help.title,accelerators:["CmdOrCtrl+H","CmdOrCtrl+h"],handler:function(){return e.setState({show:!e.state.show})},icon:this.icon,keyEventType:d.a.KeyDown}),u.a.createElement(l.a,{title:p.c.titleBar.help,message:this.getHelpBody(),show:this.state.show,onCancel:this.onClose,hideFooter:!0}))}},{key:"bindingEquals",value:function(e,t){return e&&t&&e.displayName===t.displayName&&e.handler===t.handler}},{key:"stringifyGroup",value:function(e){return e.length<3?e.join(", "):"".concat(e[0]," - ").concat(e[e.length-1])}}]),t}(u.a.Component));g.contextType=d.b},631:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return w});var r=n(4),a=n.n(r),o=n(15),s=n(8),i=n(11),c=n(12),u=n(20),l=n(18),p=n(19),d=n(34),f=n.n(d),g=n(85),m=n(17),h=n(53),v=n(181),b=n(7),y=n(128),j=n.n(y),w=function(t){function n(e,t){var r;return Object(i.a)(this,n),(r=Object(u.a)(this,Object(l.a)(n).call(this,e,t))).imagesInfo=new Map,m.a.null(t),r}return Object(p.a)(n,t),Object(c.a)(n,[{key:"export",value:function(){var e=Object(s.a)(a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAssetsForExport();case 2:return t=e.sent,Object(o.a)({},this.project).assets=f.a.keyBy(t,function(e){return e.asset.id}),n="".concat(this.project.name.replace(/\s/g,"-"),"-PascalVOC-export"),e.next=8,this.storageProvider.createContainer(n);case 8:return e.next=10,this.exportImages(n,t);case 10:return e.next=12,this.exportPBTXT(n,this.project);case 12:return e.next=14,this.exportAnnotations(n,t);case 14:return r=(100-(this.options.testTrainSplit||80))/100,e.next=17,this.exportImageSets(n,t,this.project.tags,r,this.options.exportUnassigned);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportImages",value:function(){var e=Object(s.a)(a.a.mark(function e(t,n){var r,o=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/JPEGImages"),e.next=3,this.storageProvider.createContainer(r);case 3:return e.next=5,n.mapAsync(function(){var e=Object(s.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.exportSingleImage(r,t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportSingleImage",value:function(){var t=Object(s.a)(a.a.mark(function t(n,r){var o,s,i,c,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.getAssetArray(r.asset);case 3:return o=t.sent,s=e.from(o),i="".concat(n,"/").concat(r.asset.name),t.next=8,this.storageProvider.writeBinary(i,s);case 8:if(c=this.getAssetTagArray(r),u={width:r.asset.size?r.asset.size.width:0,height:r.asset.size?r.asset.size.height:0,objects:c},this.imagesInfo.set(r.asset.name,u),r.asset.size&&0!==r.asset.size.width&&0!==r.asset.size.height){t.next=14;break}return t.next=14,this.updateImageSizeInfo(o,i,r.asset.name);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log("Error downloading asset ".concat(r.asset.path," - ").concat(t.t0));case 19:case"end":return t.stop()}},t,this,[[0,16]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getAssetTagArray",value:function(e){var t=[];return e.regions.forEach(function(e){e.tags.forEach(function(n){var r={name:n,xmin:e.boundingBox.left,ymin:e.boundingBox.top,xmax:e.boundingBox.left+e.boundingBox.width,ymax:e.boundingBox.top+e.boundingBox.height};t.push(r)})}),t}},{key:"updateImageSizeInfo",value:function(){var e=Object(s.a)(a.a.mark(function e(t,n,r){var o,s,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=btoa(new Uint8Array(t).reduce(function(e,t){return e+String.fromCharCode(t)},""))).length<10)){e.next=5;break}console.log("Image not valid ".concat(n)),e.next=10;break;case 5:return e.next=7,h.a.readAssetAttributesWithBuffer(o);case 7:s=e.sent,(i=this.imagesInfo.get(r))&&s?(i.width=s.width,i.height=s.height):console.log("imageInfo for element ".concat(r," not found (").concat(s,")"));case 10:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"exportPBTXT",value:function(){var e=Object(s.a)(a.a.mark(function e(t,n){var r,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.tags&&n.tags.length>0)){e.next=6;break}return r="".concat(t,"/pascal_label_map.pbtxt"),o=1,s=n.tags.map(function(e){var t={id:(o++).toString(),tag:e.name};return Object(b.b)(v.b,t)}),e.next=6,this.storageProvider.writeText(r,s.join(""));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportAnnotations",value:function(){var e=Object(s.a)(a.a.mark(function e(t,n){var r,o=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/Annotations"),e.next=3,this.storageProvider.createContainer(r);case 3:return e.prev=3,e.next=6,this.imagesInfo.forEachAsync(function(){var e=Object(s.a)(a.a.mark(function e(t,n){var s,i,c,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s="".concat(r,"/").concat(n),i="".concat(s.substr(0,s.lastIndexOf("."))||s,".xml"),c=t.objects.map(function(e){var t={name:e.name,xmin:e.xmin.toString(),ymin:e.ymin.toString(),xmax:e.xmax.toString(),ymax:e.ymax.toString()};return Object(b.b)(v.c,t)}),u={fileName:n,filePath:s,width:t.width.toString(),height:t.height.toString(),objects:c.join("")},e.next=6,o.storageProvider.writeText(i,Object(b.b)(v.a,u));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Error writing Pascal VOC annotation file");case 11:case"end":return e.stop()}},e,this,[[3,8]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportImageSets",value:function(){var e=Object(s.a)(a.a.mark(function e(t,n,r,o,i){var c,u,l,p,d=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return c="".concat(t,"/ImageSets"),e.next=5,this.storageProvider.createContainer(c);case 5:return u="".concat(t,"/ImageSets/Main"),e.next=8,this.storageProvider.createContainer(u);case 8:return l=new Map,p=new Map,n.forEach(function(e){var t=new Set;l.set(e.asset.name,t),e.regions.length>0&&e.regions.forEach(function(e){r.forEach(function(n){var r=p.get(n.name)||0;e.tags.filter(function(e){return e===n.name}).length>0&&(t.add(n.name),p.set(n.name,r+=1))})})}),e.next=13,r.forEachAsync(function(){var e=Object(s.a)(a.a.mark(function e(t){var n,r,s,c,f,g,m,h,v;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.get(t.name)||0,i||0!==n){e.next=3;break}return e.abrupt("return");case 3:if(r=[],l.forEach(function(e,n){e.has(t.name)?r.push("".concat(n," 1")):r.push("".concat(n," -1"))}),!(o>0&&o<=1)){e.next=18;break}return s=l.size,c=Math.ceil(s*o),f=r.slice(0,c),g=r.slice(c,s),m="".concat(u,"/").concat(t.name,"_val.txt"),e.next=13,d.storageProvider.writeText(m,f.join(j.a.EOL));case 13:return h="".concat(u,"/").concat(t.name,"_train.txt"),e.next=16,d.storageProvider.writeText(h,g.join(j.a.EOL));case 16:e.next=21;break;case 18:return v="".concat(u,"/").concat(t.name,".txt"),e.next=21,d.storageProvider.writeText(v,r.join(j.a.EOL));case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}()}]),n}(g.b)}).call(this,n(39).Buffer)},632:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r=n(15),a=n(4),o=n.n(a),s=n(8),i=n(11),c=n(12),u=n(20),l=n(18),p=n(19),d=n(34),f=n.n(d),g=n(85),m=n(17),h=n(112),v=n(53),b=function(t){function n(e,t){var r;return Object(i.a)(this,n),r=Object(u.a)(this,Object(l.a)(n).call(this,e,t)),m.a.null(t),r}return Object(p.a)(n,t),Object(c.a)(n,[{key:"export",value:function(){var t=Object(s.a)(o.a.mark(function t(){var n,a,i,c=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAssetsForExport();case 2:if(n=t.sent,!this.options.includeImages){t.next=6;break}return t.next=6,n.forEachAsync(function(){var t=Object(s.a)(o.a.mark(function t(n){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.getAssetArray(n.asset);case 2:return r=t.sent,a="vott-json-export/".concat(n.asset.name),t.next=6,c.storageProvider.writeBinary(a,e.from(r));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 6:return(a=Object(r.a)({},this.project)).assets=f.a.keyBy(n,function(e){return e.asset.id}),delete a.sourceConnection,delete a.targetConnection,delete a.exportFormat,i="vott-json-export/".concat(this.project.name.replace(/\s/g,"-")).concat(h.a.exportFileExtension),t.next=14,this.storageProvider.writeText(i,JSON.stringify(a,null,4));case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),n}(g.b)}).call(this,n(39).Buffer)},633:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),a=n.n(r),o=n(8),s=n(11),i=n(12),c=n(20),u=n(18),l=n(19),p=n(85),d=n(17),f=n(53),g=n(634),m=function(t){function n(e,t){var r;return Object(s.a)(this,n),r=Object(c.a)(this,Object(u.a)(n).call(this,e,t)),d.a.null(t),r}return Object(l.a)(n,t),Object(i.a)(n,[{key:"export",value:function(){var t=Object(o.a)(a.a.mark(function t(){var n,r,s,i,c,u,l=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAssetsForExport();case 2:return n=t.sent,r=[],t.next=6,n.forEachAsync(function(){var t=Object(o.a)(a.a.mark(function t(n){var o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.options.includeImages){t.next=7;break}return t.next=3,f.a.getAssetArray(n.asset);case 3:return o=t.sent,s="vott-csv-export/".concat(n.asset.name),t.next=7,l.storageProvider.writeBinary(s,e.from(o));case 7:n.regions.forEach(function(e){e.tags.forEach(function(t){var a={image:n.asset.name,xmin:e.boundingBox.left,ymin:e.boundingBox.top,xmax:e.boundingBox.left+e.boundingBox.width,ymax:e.boundingBox.top+e.boundingBox.height,label:t};r.push(a)})});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 6:return s={fields:["image","xmin","ymin","xmax","ymax","label"]},i=new g.Parser(s),c=i.parse(r),u="vott-csv-export/".concat(this.project.name.replace(/\s/g,"-"),"-export.csv"),t.next=12,this.storageProvider.writeText(u,c);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),n}(p.b)}).call(this,n(39).Buffer)},638:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r,a=n(4),o=n.n(a),s=n(8),i=n(11),c=n(12),u=n(20),l=n(18),p=n(19),d=n(128),f=n.n(d),g=n(85),m=n(53),h=n(17);!function(e){e[e.Test=0]="Test",e[e.Train=1]="Train"}(r||(r={}));var v=function(t){function n(e,t){var r;return Object(i.a)(this,n),r=Object(u.a)(this,Object(l.a)(n).call(this,e,t)),h.a.null(t),r.exportFolderName="".concat(r.project.name.replace(/\s/g,"-"),"-CNTK-export"),r}return Object(p.a)(n,t),Object(c.a)(n,[{key:"export",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,i,c,u=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createFolderStructure();case 2:return e.next=4,this.getAssetsForExport();case 4:return t=e.sent,n=(100-(this.options.testTrainSplit||80))/100,a=Math.ceil(t.length*n),i=t.slice(0,a),e.next=10,t.mapAsync(function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=i.find(function(e){return e.asset.id===t.asset.id})?r.Test:r.Train,e.next=4,u.exportAssetFrame(t,n);case 4:return e.abrupt("return",{asset:t,success:!0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{asset:t,success:!1,error:e.t0});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}());case 10:return c=e.sent,e.abrupt("return",{completed:c.filter(function(e){return e.success}),errors:c.filter(function(e){return!e.success}),count:c.length});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportAssetFrame",value:function(){var t=Object(s.a)(o.a.mark(function t(n,a){var s,i,c,u,l,p,d;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=[],i=[],n.regions.forEach(function(e){e.tags.forEach(function(t){s.push(t),i.push("".concat(e.boundingBox.left,"\t").concat(e.boundingBox.left+e.boundingBox.width,"\t").concat(e.boundingBox.top,"\t").concat(e.boundingBox.top+e.boundingBox.height))})}),t.next=5,m.a.getAssetArray(n.asset);case 5:return c=t.sent,u=a===r.Train?"positive":"testImages",l="".concat(this.exportFolderName,"/").concat(u,"/").concat(n.asset.name,".bboxes.labels.tsv"),p="".concat(this.exportFolderName,"/").concat(u,"/").concat(n.asset.name,".bboxes.tsv"),d="".concat(this.exportFolderName,"/").concat(u,"/").concat(n.asset.name),t.next=12,Promise.all([this.storageProvider.writeText(l,s.join(f.a.EOL)),this.storageProvider.writeText(p,i.join(f.a.EOL)),this.storageProvider.writeBinary(d,e.from(c))]);case 12:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"createFolderStructure",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,r,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.exportFolderName,"/positive"),n="".concat(this.exportFolderName,"/negative"),r="".concat(this.exportFolderName,"/testImages"),e.next=5,this.storageProvider.createContainer(this.exportFolderName);case 5:return e.next=7,[t,n,r].forEachAsync(function(){var e=Object(s.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.storageProvider.createContainer(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(g.b)}).call(this,n(39).Buffer)},639:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"loadProject",function(){return V}),n.d(r,"saveProject",function(){return _}),n.d(r,"deleteProject",function(){return $}),n.d(r,"closeProject",function(){return W}),n.d(r,"loadAssets",function(){return q}),n.d(r,"loadAssetMetadata",function(){return K}),n.d(r,"saveAssetMetadata",function(){return J}),n.d(r,"updateProjectTag",function(){return H}),n.d(r,"deleteProjectTag",function(){return G}),n.d(r,"exportProject",function(){return Y}),n.d(r,"loadProjectAction",function(){return Q}),n.d(r,"closeProjectAction",function(){return X}),n.d(r,"saveProjectAction",function(){return Z}),n.d(r,"deleteProjectAction",function(){return ee}),n.d(r,"loadProjectAssetsAction",function(){return te}),n.d(r,"loadAssetMetadataAction",function(){return ne}),n.d(r,"saveAssetMetadataAction",function(){return re}),n.d(r,"exportProjectAction",function(){return ae}),n.d(r,"updateProjectTagAction",function(){return oe}),n.d(r,"deleteProjectTagAction",function(){return se});var a={};n.r(a),n.d(a,"toggleDevTools",function(){return le}),n.d(a,"reloadApplication",function(){return pe}),n.d(a,"saveAppSettings",function(){return de}),n.d(a,"ensureSecurityToken",function(){return fe}),n.d(a,"toggleDevToolsAction",function(){return ge}),n.d(a,"refreshApplicationAction",function(){return me}),n.d(a,"saveAppSettingsAction",function(){return he}),n.d(a,"ensureSecurityTokenAction",function(){return ve});var o={};n.r(o),n.d(o,"loadConnection",function(){return rt}),n.d(o,"saveConnection",function(){return at}),n.d(o,"deleteConnection",function(){return ot}),n.d(o,"loadConnectionAction",function(){return st}),n.d(o,"saveConnectionAction",function(){return it}),n.d(o,"deleteConnectionAction",function(){return ct});var s=n(1),i=n.n(s),c=n(1403),u=n(605),l=n(4),p=n.n(l),d=n(8),f=n(11),g=n(12),m=n(20),h=n(18),v=n(19),b=n(71),y=n(50),j=n(7),w=n(15),x=n(34),C=n.n(x),E=n(68),O=n.n(E),k=n(72),S=n(14),T=n(17),A=n(112),F=n(93),N=n(92),P=n(151),R=n(85),L={autoDetect:!1,predictTag:!0,modelPathType:S.f.Coco},B={providerType:"vottJson",providerOptions:{assetState:R.a.Visited,includeImages:!0}},M=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,[{key:"load",value:function(e,t){T.a.null(e);try{var n=Object(N.b)(e,t);return n.tags||(n.tags=[]),n.activeLearningSettings||(n.activeLearningSettings=L),n.exportFormat||(n.exportFormat=B),this.ensureBackwardsCompatibility(n),Promise.resolve(Object(w.a)({},n))}catch(a){var r=new S.a(S.e.ProjectInvalidSecurityToken,"Error decrypting project settings");return Promise.reject(r)}}},{key:"save",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.a.null(t),t.id||(t.id=O.a.generate()),t.tags||(t.tags=[]),t.activeLearningSettings||(t.activeLearningSettings=L),t.exportFormat||(t.exportFormat=B),t.version=P.version,r=k.a.createFromConnection(t.targetConnection),e.next=9,this.saveExportSettings(t);case 9:return t=Object(N.d)(t,n),e.next=12,r.writeText("".concat(t.name).concat(A.a.projectFileExtension),JSON.stringify(t,null,4));case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.a.null(t),n=k.a.createFromConnection(t.targetConnection),r=C.a.values(t.assets).map(function(e){return n.deleteFile("".concat(e.id).concat(A.a.assetMetadataFileExtension))}),e.next=5,Promise.all(r);case 5:return e.next=7,n.deleteFile("".concat(t.name).concat(A.a.projectFileExtension));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isDuplicate",value:function(e,t){return void 0!==t.find(function(t){return t.id!==e.id&&t.name===e.name&&JSON.stringify(t.targetConnection.providerOptions)===JSON.stringify(e.targetConnection.providerOptions)})}},{key:"saveExportSettings",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.exportFormat&&t.exportFormat.providerType){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if((n=F.a.createFromProject(t)).save){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return e.next=7,n.save(t.exportFormat);case 7:t.exportFormat.providerOptions=e.sent;case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"ensureBackwardsCompatibility",value:function(e){e.version.toLowerCase().startsWith("2.0.0")&&"tensorFlowPascalVOC"===e.exportFormat.providerType&&(e.exportFormat.providerType="pascalVOC")}}]),e}(),I=n(30),D=n(64),z=n(65),U=n(125);function V(e){return function(){var t=Object(d.a)(p.a.mark(function t(n,r){var a,o,s,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=new M,s=a.appSettings.securityTokens.find(function(t){return t.name===e.securityToken})){t.next=5;break}throw new S.a(S.e.SecurityTokenNotFound,"Security Token Not Found");case 5:return t.next=7,o.load(e,s);case 7:return i=t.sent,n(Q(i)),t.abrupt("return",i);case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function _(e){return function(){var t=Object(d.a)(p.a.mark(function t(n,r){var a,o,s,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),!(o=new M).isDuplicate(e,a.recentProjects)){t.next=4;break}throw new S.a(S.e.ProjectDuplicateName,"Project with name '".concat(e.name,"\n                already exists with the same target connection '").concat(e.targetConnection.name,"'"));case 4:if(s=a.appSettings.securityTokens.find(function(t){return t.name===e.securityToken})){t.next=7;break}throw new S.a(S.e.SecurityTokenNotFound,"Security Token Not Found");case 7:return t.next=9,o.save(e,s);case 9:return i=t.sent,n(Z(i)),t.next=13,V(i)(n,r);case 13:return t.abrupt("return",i);case 14:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function $(e){return function(){var t=Object(d.a)(p.a.mark(function t(n,r){var a,o,s,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=new M,s=a.appSettings.securityTokens.find(function(t){return t.name===e.securityToken})){t.next=5;break}throw new S.a(S.e.SecurityTokenNotFound,"Security Token Not Found");case 5:return t.next=7,o.load(e,s);case 7:return i=t.sent,t.next=10,o.delete(i);case 10:n(ee(i));case 11:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function W(){return function(e){e({type:I.a.CLOSE_PROJECT_SUCCESS})}}function q(e){return function(){var t=Object(d.a)(p.a.mark(function t(n){var r,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new D.a(e),t.next=3,r.getAssets();case 3:return a=t.sent,n(te(a)),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}function K(e,t){return function(){var n=Object(d.a)(p.a.mark(function n(r){var a,o;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=new D.a(e),n.next=3,a.getAssetMetadata(t);case 3:return o=n.sent,r(ne(o)),n.abrupt("return",Object(w.a)({},o));case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}function J(e,t){var n=Object(w.a)({},t,{version:U.a.version});return function(){var t=Object(d.a)(p.a.mark(function t(r){var a,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new D.a(e),t.next=3,a.save(n);case 3:return o=t.sent,r(re(o)),t.abrupt("return",Object(w.a)({},o));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}function H(e,t,n){return function(){var r=Object(d.a)(p.a.mark(function r(a,o){var s,i,c,u;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=new D.a(e),r.next=3,s.renameTag(t,n);case 3:return i=r.sent,r.next=6,i.forEachAsync(function(){var t=Object(d.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e,n)(a);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 6:return c=o().currentProject,u=Object(w.a)({},c,{tags:e.tags.map(function(e){return e.name===t?Object(w.a)({},e,{name:n}):e})}),r.next=10,_(u)(a,o);case 10:return a(oe(u)),r.abrupt("return",i);case 12:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}()}function G(e,t){return function(){var n=Object(d.a)(p.a.mark(function n(r,a){var o,s,i,c;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=new D.a(e),n.next=3,o.deleteTag(t);case 3:return s=n.sent,n.next=6,s.forEachAsync(function(){var t=Object(d.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e,n)(r);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 6:return i=a().currentProject,c=Object(w.a)({},i,{tags:e.tags.filter(function(e){return e.name!==t})}),n.next=10,_(c)(r,a);case 10:return r(se(c)),n.abrupt("return",s);case 12:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()}function Y(e){return function(){var t=Object(d.a)(p.a.mark(function t(n){var r,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.exportFormat){t.next=2;break}throw new S.a(S.e.ExportFormatNotFound,j.c.errors.exportFormatNotFound.message);case 2:if(!e.exportFormat||!e.exportFormat.providerType){t.next=9;break}return r=F.a.create(e.exportFormat.providerType,e,e.exportFormat.providerOptions),t.next=6,r.export();case 6:return a=t.sent,n(ae(e)),t.abrupt("return",a);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}var Q=Object(z.b)(I.a.LOAD_PROJECT_SUCCESS),X=Object(z.a)(I.a.CLOSE_PROJECT_SUCCESS),Z=Object(z.b)(I.a.SAVE_PROJECT_SUCCESS),ee=Object(z.b)(I.a.DELETE_PROJECT_SUCCESS),te=Object(z.b)(I.a.LOAD_PROJECT_ASSETS_SUCCESS),ne=Object(z.b)(I.a.LOAD_ASSET_METADATA_SUCCESS),re=Object(z.b)(I.a.SAVE_ASSET_METADATA_SUCCESS),ae=Object(z.b)(I.a.EXPORT_PROJECT_SUCCESS),oe=Object(z.b)(I.a.UPDATE_PROJECT_TAG_SUCCESS),se=Object(z.b)(I.a.DELETE_PROJECT_TAG_SUCCESS),ie=n(28),ce=n(94),ue=n(152);function le(e){return function(t){return ce.a.send("TOGGLE_DEV_TOOLS",e).then(function(){t(ge(e))})}}function pe(){return function(e){return ce.a.send("RELOAD_APP").then(function(){e(me())})}}function de(e){return function(t){return t(he(e)),Promise.resolve(e)}}function fe(e){var t=this;return function(){var n=Object(d.a)(p.a.mark(function n(r,a){var o,s,i;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),!(s=o.appSettings.securityTokens.find(function(t){return t.name===e.securityToken}))){n.next=4;break}return n.abrupt("return",o.appSettings);case 4:return s={name:"".concat(e.name," Token"),key:Object(ue.c)()},i={devToolsEnabled:o.appSettings.devToolsEnabled,securityTokens:[].concat(Object(ie.a)(o.appSettings.securityTokens),[s])},n.next=8,t.saveAppSettings(i);case 8:return e.securityToken=s.name,r(ve(i)),n.abrupt("return",i);case 11:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()}var ge=Object(z.b)(I.a.TOGGLE_DEV_TOOLS_SUCCESS),me=Object(z.a)(I.a.REFRESH_APP_SUCCESS),he=Object(z.b)(I.a.SAVE_APP_SETTINGS_SUCCESS),ve=Object(z.b)(I.a.ENSURE_SECURITY_TOKEN_SUCCESS),be=n(16),ye=n(74),je=(n(411),n(607)),we=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).onItemClick=function(e,t){r.props.onClick&&r.props.onClick(t)},r.onItemDelete=function(e,t){e.stopPropagation(),e.preventDefault(),r.props.onDelete&&r.props.onDelete(t)},r.onItemClick=r.onItemClick.bind(Object(be.a)(Object(be.a)(r))),r.onItemDelete=r.onItemDelete.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.items,a=t.newLinkTo,o=t.Component;return i.a.createElement("div",{className:"condensed-list"},i.a.createElement("h6",{className:"condensed-list-header bg-darker-2 p-2"},i.a.createElement("span",null,n),a&&i.a.createElement(je.a,{to:a,className:"float-right"},i.a.createElement("i",{className:"fas fa-plus-square"}))),i.a.createElement("div",{className:"condensed-list-body"},!r&&i.a.createElement("div",{className:"p-3 text-center"},i.a.createElement("i",{className:"fas fa-circle-notch fa-spin"})),r&&0===r.length&&i.a.createElement("div",{className:"p-3 text-center"},"No items found"),r&&r.length>0&&i.a.createElement("ul",{className:"condensed-list-items"},r.map(function(t){return i.a.createElement(o,{key:t.id,item:t,onClick:function(n){return e.onItemClick(n,t)},onDelete:function(n){return e.onItemDelete(n,t)}})}))))}}]),t}(i.a.Component);function xe(e){var t=e.item,n=e.onClick;return i.a.createElement("li",null,i.a.createElement("a",{onClick:n},i.a.createElement("span",{className:"px-2"},t.name)))}var Ce=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).open=n.open.bind(Object(be.a)(Object(be.a)(n))),n.close=n.close.bind(Object(be.a)(Object(be.a)(n))),n.getInitialState=n.getInitialState.bind(Object(be.a)(Object(be.a)(n))),n.ok=n.ok.bind(Object(be.a)(Object(be.a)(n))),n.back=n.back.bind(Object(be.a)(Object(be.a)(n))),n.connectionList=n.connectionList.bind(Object(be.a)(Object(be.a)(n))),n.onClickConnection=n.onClickConnection.bind(Object(be.a)(Object(be.a)(n))),n.fileList=n.fileList.bind(Object(be.a)(Object(be.a)(n))),n.onClickFile=n.onClickFile.bind(Object(be.a)(Object(be.a)(n))),n.state=n.getInitialState(),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=i.a.createElement("button",{className:"close",onClick:this.close},"\xd7");return i.a.createElement(ye.Modal,{isOpen:this.state.isOpen,centered:!0},i.a.createElement(ye.ModalHeader,{toggle:this.close,close:e},this.state.modalHeader),i.a.createElement(ye.ModalBody,null,this.state.condensedList),i.a.createElement(ye.ModalFooter,null,this.state.selectedFile||"",i.a.createElement(ye.Button,{className:"btn btn-success mr-1",onClick:this.ok,disabled:this.state.okDisabled},"Ok"),i.a.createElement(ye.Button,{onClick:this.back,disabled:this.state.backDisabled},"Go Back")))}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"close",value:function(){var e=this;this.setState(this.getInitialState(),function(){e.props.onCancel&&e.props.onCancel()})}},{key:"getInitialState",value:function(){return{isOpen:!1,modalHeader:j.c.homePage.openCloudProject.selectConnection,condensedList:this.connectionList(),selectedConnection:null,selectedFile:null,okDisabled:!0,backDisabled:!0}}},{key:"ok",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.selectedConnection||!this.state.selectedFile){e.next=6;break}return t=k.a.createFromConnection(this.state.selectedConnection),e.next=4,t.readText(this.state.selectedFile);case 4:n=e.sent,this.props.onSubmit(n);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"back",value:function(){this.setState(Object(w.a)({},this.getInitialState(),{isOpen:!0}))}},{key:"getCondensedList",value:function(e,t,n){return i.a.createElement(we,{title:e,items:t,Component:xe,onClick:n})}},{key:"isCloudConnection",value:function(e){try{return k.a.createFromConnection(e).storageType===S.h.Cloud}catch(t){return!1}}},{key:"getCloudConnections",value:function(e){return e.filter(this.isCloudConnection)}},{key:"connectionList",value:function(){var e=this,t=this.getCloudConnections(this.props.connections);return this.getCondensedList("Cloud Connections",t,function(t){return e.onClickConnection(t)})}},{key:"onClickConnection",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(w.a)({},t),e.next=3,this.fileList(n);case 3:r=e.sent,this.setState({selectedConnection:n,modalHeader:'Select a file from "'.concat(n.name,'"'),condensedList:r,backDisabled:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fileList",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.a.createFromConnection(t),e.next=3,n.listFiles(t.providerOptions.containerName,this.props.fileExtension);case 3:for(r=e.sent,a=[],o=0;o<r.length;o++)a.push({id:"file-".concat(o+1),name:r[o]});return e.abrupt("return",this.getCondensedList("".concat(this.props.fileExtension||"All",' Files in "').concat(t.name,'"'),a,this.onClickFile));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onClickFile",value:function(e){var t=e.name;this.setState({selectedFile:t,okDisabled:!1})}}]),t}(i.a.Component),Ee=n(178),Oe=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).state={params:null},r.messageBox=i.a.createRef(),r.open=r.open.bind(Object(be.a)(Object(be.a)(r))),r.close=r.close.bind(Object(be.a)(Object(be.a)(r))),r.onConfirmClick=r.onConfirmClick.bind(Object(be.a)(Object(be.a)(r))),r.onCancelClick=r.onCancelClick.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement(Ee.a,{ref:this.messageBox,title:this.props.title,message:this.props.message,params:this.state.params,onCancel:this.onCancelClick},i.a.createElement(ye.Button,{autoFocus:!0,color:this.props.confirmButtonColor||"primary",onClick:this.onConfirmClick},this.props.confirmButtonText||"Yes"),i.a.createElement(ye.Button,{color:this.props.cancelButtonColor||"secondary",onClick:this.onCancelClick},this.props.cancelButtonText||"No"))}},{key:"open",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.setState({params:n},function(){return e.messageBox.current.open()})}},{key:"close",value:function(){this.messageBox.current.close()}},{key:"onConfirmClick",value:function(){this.props.onConfirm.apply(null,this.state.params)}},{key:"onCancelClick",value:function(){this.props.onCancel&&this.props.onCancel.apply(null,this.state.params)}}]),t}(i.a.Component),ke=n(53),Se=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).upload=function(){r.fileInput.current.click()},r.onFileUploaded=function(e){0===e.target.files.length&&r.props.onError(e,"No files were selected"),ke.a.readAsText(e.target.files[0]).then(function(t){return r.props.onChange(e,t)}).catch(function(t){return r.props.onError(e,t)})},r.fileInput=i.a.createRef(),r.onFileUploaded=r.onFileUploaded.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("input",{id:O.a.generate(),ref:this.fileInput,type:"file",onChange:this.onFileUploaded})}}]),t}(i.a.Component);n(740);function Te(e){var t=e.item,n=e.onClick,r=e.onDelete;return i.a.createElement("li",{className:"recent-project-item"},i.a.createElement("a",{onClick:n},i.a.createElement("i",{className:"fas fa-folder-open"}),i.a.createElement("span",{className:"px-2"},t.name),i.a.createElement("div",{className:"float-right delete-btn",onClick:r},i.a.createElement("i",{className:"fas fa-trash"}))))}var Ae,Fe=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,[{key:"convertProject",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.a.null(t),e.prev=1,n=JSON.parse(t.content),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),new S.a(S.e.ProjectInvalidJson,"Error parsing JSON");case 8:return a=this.parseTags(n),r=this.generateConnection(t),e.abrupt("return",{id:O.a.generate(),name:t.file.name.split(".")[0],version:P.version,securityToken:"".concat(t.file.name.split(".")[0]," Token"),description:"Converted V1 Project",tags:a,sourceConnection:r,targetConnection:r,exportFormat:null,videoSettings:{frameExtractionRate:n.framerate?Number(n.framerate):15},activeLearningSettings:null,autoSave:!0});case 11:case"end":return e.stop()}},e,this,[[1,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"generateAssets",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.a.null(t),T.a.null(n),a=[],this.assetService=new D.a(n),r=JSON.parse(t.content),o=Object.keys(r.frames).map(function(e){return{name:e,regions:r.frames[e]}}),!this.isVideoProject(t)){e.next=12;break}return e.next=9,this.generateVideoAssets(t,o);case 9:a=e.sent,e.next=15;break;case 12:return e.next=14,this.generateImageAssets(t,o);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"generateImageAssets",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r,a=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(N.e)(t.file.path.replace(/\.[^\/.]+$/,"")),e.next=3,n.mapAsync(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,o,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(r,"/").concat(t.name),o=D.a.createAssetFromFilePath(n),s=a.getAssetState(t),e.next=5,a.createAssetMetadata(o,s,t.regions);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"generateVideoAssets",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r,a,o,s,i,c,u=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createParentVideoAsset(t);case 2:return r=e.sent,a=JSON.parse(t.content),e.next=6,n.mapAsync(function(){var e=Object(d.a)(p.a.mark(function e(t){var n,o,s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Number(t.name),o=(n-1)/Number(a.framerate),s=u.createVideoFrameAsset(r,o),i=u.getAssetState(t),e.next=6,u.createAssetMetadata(s,i,t.regions,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 6:return o=e.sent,s=o.filter(function(e){return e.asset.state===S.b.Tagged}),i=s.length>0?S.b.Tagged:S.b.Visited,e.next=11,this.createAssetMetadata(r,i,[]);case 11:return c=e.sent,e.abrupt("return",[c].concat(o));case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"isVideoProject",value:function(e){var t=e.file.path.split(/[\\\/]/),n=t[t.length-1].split(".");return n[1]&&D.a.getAssetType(n[1])===S.c.Video}},{key:"createParentVideoAsset",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file.path.replace(/\.[^\/.]+$/,""),r=D.a.createAssetFromFilePath(n,n.replace(/^.*[\\\/]/,"")),e.next=4,ke.a.readAssetAttributes(r);case 4:return a=e.sent,r.size={height:a.height,width:a.width},r.state=S.b.Visited,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"generateConnection",value:function(e){var t=this.isVideoProject(e)?e.file.path.replace(/[^(\/|\\)]*$/,""):e.file.path.replace(".json","");return{id:O.a.generate(),name:"".concat(e.file.name.split(".")[0]," Connection"),providerType:"localFileSystemProxy",providerOptions:{folderPath:Object(N.e)(t)}}}},{key:"parseTags",value:function(e){return e.inputTags.split(",").map(function(t,n){return{name:t,color:e.tag_colors[n]}}).filter(function(e){return!!e.name})}},{key:"addRegions",value:function(e,t){t.forEach(function(t){var n={id:t.UID,type:S.g.Rectangle,tags:t.tags,points:[{x:t.x1,y:t.y1},{x:t.x1,y:t.y2},{x:t.x2,y:t.y1},{x:t.x2,y:t.y2}],boundingBox:{height:t.y2-t.y1,width:t.x2-t.x1,left:t.x1,top:t.y1}};e.regions.push(n)})}},{key:"createVideoFrameAsset",value:function(e,t){return Object(w.a)({},D.a.createAssetFromFilePath("".concat(e.path,"#t=").concat(t)),{timestamp:t,parent:e,type:S.c.VideoFrame,size:e.size})}},{key:"getAssetState",value:function(e){return e.regions.length>0?S.b.Tagged:S.b.Visited}},{key:"createAssetMetadata",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n,r,a){var o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assetService.getAssetMetadata(t);case 2:if(o=e.sent,this.addRegions(o,r),o.asset.state=n,a&&(o.asset.parent=a),o.asset.size){e.next=10;break}return e.next=9,ke.a.readAssetAttributes(t);case 9:o.asset.size=e.sent;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()}]),e}(),Ne=n(48),Pe=n(62);var Re=Object(b.b)(function(e){return{recentProjects:e.recentProjects,connections:e.connections,appSettings:e.appSettings,project:e.currentProject}},function(e){return{actions:Object(y.bindActionCreators)(r,e),applicationActions:Object(y.bindActionCreators)(a,e)}})(Ae=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={cloudPickerOpen:!1},n.filePicker=i.a.createRef(),n.deleteConfirm=i.a.createRef(),n.cloudFilePicker=i.a.createRef(),n.importConfirm=i.a.createRef(),n.createNewProject=function(e){n.props.actions.closeProject(),n.props.history.push("/projects/create"),e.preventDefault()},n.handleOpenCloudProjectClick=function(){n.cloudFilePicker.current.open()},n.onProjectFileUpload=function(){var e=Object(d.a)(p.a.mark(function e(t,r){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=JSON.parse(r.content),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new S.a(S.e.ProjectInvalidJson,"Error parsing JSON");case 7:if(null!==a.name&&void 0!==a.name){e.next=18;break}return e.prev=8,e.next=11,n.importConfirm.current.open(r);case 11:e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(8),new Error(e.t1.message);case 16:e.next=20;break;case 18:return e.next=20,n.loadSelectedProject(a);case 20:case"end":return e.stop()}},e,this,[[0,4],[8,13]])}));return function(t,n){return e.apply(this,arguments)}}(),n.onProjectFileUploadError=function(e,t){if(t instanceof S.a)throw t;throw new S.a(S.e.ProjectUploadError,"Error uploading project file")},n.loadSelectedProject=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.loadProject(t);case 2:n.props.history.push("/projects/".concat(t.id,"/edit"));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.deleteProject=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.actions.deleteProject(t);case 3:Ne.toast.info(Object(j.b)(j.c.homePage.messages.deleteSuccess,{project:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new S.a(S.e.ProjectDeleteError,"Error deleting project file");case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),n.convertProject=function(){var e=Object(d.a)(p.a.mark(function e(t){var r,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Fe,e.prev=1,e.next=4,r.convertProject(t);case 4:o=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new S.a(S.e.V1ImportError,"Error converting v1 project file");case 10:return n.props.applicationActions.ensureSecurityToken(o),e.prev=11,e.next=14,r.generateAssets(t,o);case 14:return a=e.sent,e.next=17,n.props.actions.saveProject(o);case 17:return e.next=19,n.props.actions.loadProject(o);case 19:return e.next=21,a.mapAsync(function(e){return n.props.actions.saveAssetMetadata(n.props.project,e)});case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(11),new Error("Error importing project information - ".concat(e.t1.message));case 26:return e.next=28,n.props.actions.saveProject(n.props.project);case 28:return e.next=30,n.loadSelectedProject(n.props.project);case 30:case"end":return e.stop()}},e,this,[[1,7],[11,23]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app-homepage"},i.a.createElement("div",{className:"app-homepage-main"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:this.createNewProject,className:"p-5 new-project"},i.a.createElement("i",{className:"fas fa-folder-plus fa-9x"}),i.a.createElement("h6",null,j.c.homePage.newProject))),Object(Pe.e)()&&i.a.createElement("li",null,i.a.createElement("a",{href:"#",className:"p-5 file-upload",onClick:function(){return e.filePicker.current.upload()}},i.a.createElement("i",{className:"fas fa-folder-open fa-9x"}),i.a.createElement("h6",null,j.c.homePage.openLocalProject.title)),i.a.createElement(Se,{ref:this.filePicker,onChange:this.onProjectFileUpload,onError:this.onProjectFileUploadError})),i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:this.handleOpenCloudProjectClick,className:"p-5 cloud-open-project"},i.a.createElement("i",{className:"fas fa-cloud fa-9x"}),i.a.createElement("h6",null,j.c.homePage.openCloudProject.title)),i.a.createElement(Ce,{ref:this.cloudFilePicker,connections:this.props.connections,onSubmit:function(t){return e.loadSelectedProject(JSON.parse(t))},fileExtension:A.a.projectFileExtension})))),this.props.recentProjects&&this.props.recentProjects.length>0&&i.a.createElement("div",{className:"app-homepage-recent bg-lighter-1"},i.a.createElement(we,{title:j.c.homePage.recentProjects,Component:Te,items:this.props.recentProjects,onClick:this.loadSelectedProject,onDelete:function(t){return e.deleteConfirm.current.open(t)}})),i.a.createElement(Oe,{title:"Delete Project",ref:this.deleteConfirm,message:function(e){return"".concat(j.c.homePage.deleteProject.confirmation," ").concat(e.name,"?")},confirmButtonColor:"danger",onConfirm:this.deleteProject}),i.a.createElement(Oe,{title:"Import Project",ref:this.importConfirm,message:function(e){return Object(j.b)(j.c.homePage.importProject.confirmation,{project:e})},confirmButtonColor:"danger",onConfirm:this.convertProject}))}}]),t}(i.a.Component))||Ae,Le=n(120),Be=n.n(Le);function Me(e){var t=e.id,n=e.label,r=e.required,a=e.description,o=e.rawErrors,c=e.schema,u=e.uiSchema,l=e.children,p=[];return"object"===e.schema.type?p.push("object-wrapper"):p.push("form-group"),o&&o.length>0?p.push("is-invalid"):p.push("is-valid"),i.a.createElement("div",{className:p.join(" ")},"array"!==c.type&&("object"!==c.type||"object"===c.type&&u["ui:field"])&&i.a.createElement("label",{htmlFor:t},n,r?"*":null),"array"===c.type&&i.a.createElement(s.Fragment,null,i.a.createElement("h4",null,n),a&&i.a.createElement("small",null,a)),l,"array"!==c.type&&a&&i.a.createElement("small",{className:"text-muted"},a),o&&o.length>0&&i.a.createElement("div",{className:"invalid-feedback"},o.map(function(e,t){return i.a.createElement("div",{key:t},n," ",e)})))}var Ie=n(153),De=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).selectLocalFolder=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.localFileSystem.selectContainer();case 2:(t=e.sent)&&r.setState({value:t},function(){return r.props.onChange(t)});case 4:case"end":return e.stop()}},e,this)})),r.state={value:r.props.value||""},r.localFileSystem=new Ie.a,r.selectLocalFolder=r.selectLocalFolder.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.id,t=this.state.value;return i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{id:e,type:"text",className:"form-control",value:t,readOnly:!0}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.selectLocalFolder},j.c.connections.providers.local.selectFolder)))}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value})}}]),t}(i.a.Component);function ze(e,t){return T.a.null(e),function(n){var r=t?t(n):n;return i.a.createElement(e,r)}}function Ue(e,t){return T.a.null(e),function(n){var r=t?t(n):n;return i.a.createElement(e,r)}}var Ve,_e=n(180),$e=Object(j.a)(n(871)),We=Object(j.a)(n(872)),qe=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={classNames:["needs-validation"],uiSchema:Object(w.a)({},We),formSchema:Object(w.a)({},$e),formData:Object(w.a)({},n.props.settings)},n.widgets={localFolderPicker:De,checkbox:Ue(_e.a,function(e){return{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},disabled:e.disabled}})},n.onFormChange=function(e){var t=e.formData;e.formData.modelPathType!==n.state.formData.modelPathType&&(t=Object(w.a)({},e.formData,{modelPath:null,modelUrl:null})),n.setState({formData:t},function(){n.props.onChange&&n.props.onChange(t)})},n.onFormSubmit=function(e){var t=Object(w.a)({},e.formData);n.setState({formData:t}),n.props.onSubmit(t)},n.onFormCancel=function(){n.props.onCancel&&n.props.onCancel()},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.settings!==e.settings&&this.setState({formData:this.props.settings})}},{key:"render",value:function(){return i.a.createElement(Be.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,FieldTemplate:Me,widgets:this.widgets,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.formData,onChange:this.onFormChange,onSubmit:this.onFormSubmit},i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-success mr-1",type:"submit"},j.c.projectSettings.save),i.a.createElement("button",{className:"btn btn-secondary btn-cancel",type:"button",onClick:this.onFormCancel},j.c.common.cancel)))}}]),t}(i.a.Component);var Ke=Object(b.b)(function(e){return{project:e.currentProject,recentProjects:e.recentProjects}},function(e){return{actions:Object(y.bindActionCreators)(r,e)}})(Ve=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={settings:n.props.project?n.props.project.activeLearningSettings:null},n.onFormSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(w.a)({},n.props.project,{activeLearningSettings:t}),e.next=3,n.props.actions.saveProject(r);case 3:Ne.toast.success(j.c.activeLearning.messages.saveSuccess),n.props.history.goBack();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onFormCancel=function(){n.props.history.goBack()},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.projectId,this.props.project||!t){e.next=6;break}if(!(n=this.props.recentProjects.find(function(e){return e.id===t}))){e.next=6;break}return e.next=6,this.props.actions.loadProject(n);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.project!==this.props.project&&this.setState({settings:this.props.project.activeLearningSettings})}},{key:"render",value:function(){return i.a.createElement("div",{className:"project-settings-page"},i.a.createElement("div",{className:"project-settings-page-settings m-3"},i.a.createElement("h3",null,i.a.createElement("i",{className:"fas fa-graduation-cap"}),i.a.createElement("span",{className:"px-2"},j.c.activeLearning.title)),i.a.createElement("div",{className:"m-3"},i.a.createElement(qe,{settings:this.state.settings,onSubmit:this.onFormSubmit,onCancel:this.onFormCancel}))))}}]),t}(i.a.Component))||Ve;n(873);function Je(e){return i.a.createElement(s.Fragment,null,e.title,e.description,e.properties.map(function(e){return e.content}))}function He(e){return i.a.createElement("div",null,e.canAdd&&i.a.createElement("div",{className:"array-field-toolbar my-3"},i.a.createElement("button",{type:"button",className:"btn btn-info",onClick:e.onAddClick},i.a.createElement("i",{className:"fas fa-plus-circle"}),i.a.createElement("span",{className:"ml-1"},"Add ",e.schema.title))),e.items.map(function(e){return i.a.createElement("div",{className:"form-row",key:e.index},e.children,e.hasRemove&&i.a.createElement("div",{className:"array-item-toolbar"},i.a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:e.onDropIndexClick(e.index)},i.a.createElement("i",{className:"fas fa-trash"}),i.a.createElement("span",{className:"ml-1"},j.c.common.delete))))}))}var Ge,Ye=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).inputElement=i.a.createRef(),n.state={showKey:!1,value:n.props.value||""},n.toggleKeyVisibility=n.toggleKeyVisibility.bind(Object(be.a)(Object(be.a)(n))),n.copyKey=n.copyKey.bind(Object(be.a)(Object(be.a)(n))),n.onChange=n.onChange.bind(Object(be.a)(Object(be.a)(n))),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.onChange(this.props.value)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.readOnly,r=this.state,a=r.showKey,o=r.value;return i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{id:t,ref:this.inputElement,type:a?"text":"password",readOnly:n,className:"form-control",value:o,onChange:this.onChange}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{type:"button",title:a?"Hide":"Show",className:"btn btn-primary btn-visibility",onClick:this.toggleKeyVisibility},i.a.createElement("i",{className:a?"fas fa-eye-slash":"fas fa-eye"})),i.a.createElement("button",{type:"button",title:"Copy",className:"btn btn-primary btn-copy",onClick:this.copyKey},i.a.createElement("i",{className:"fas fa-copy"}))))}},{key:"onChange",value:function(e){var t=this,n=e.target,r=n.value?n.value:void 0;this.setState({value:r},function(){return t.props.onChange(r)})}},{key:"toggleKeyVisibility",value:function(){this.setState({showKey:!this.state.showKey})}},{key:"copyKey",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=navigator.clipboard,e.next=3,t.writeText(this.inputElement.current.value);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(i.a.Component),Qe=Object(j.a)(n(875)),Xe=Object(j.a)(n(876)),Ze=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).fields={securityToken:ze(Ye,function(e){return{id:e.idSchema.$id,value:e.formData||Object(ue.c)(),onChange:e.onChange}})},n.state={formSchema:Object(w.a)({},Qe),uiSchema:Object(w.a)({},Xe),appSettings:Object(w.a)({},n.props.appSettings),classNames:["needs-validation"]},n.onFormValidate=n.onFormValidate.bind(Object(be.a)(Object(be.a)(n))),n.onFormCancel=n.onFormCancel.bind(Object(be.a)(Object(be.a)(n))),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){e.appSettings!==this.props.appSettings&&this.setState({appSettings:Object(w.a)({},this.props.appSettings)})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app-settings-page-form p-3"},i.a.createElement("h3",{className:"mb-3"},i.a.createElement("i",{className:"fas fa-cog fa-1x"}),i.a.createElement("span",{className:"px-2"},j.c.appSettings.title)),i.a.createElement("div",{className:"m-3"},i.a.createElement(Be.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,fields:this.fields,ObjectFieldTemplate:Je,FieldTemplate:Me,ArrayFieldTemplate:He,validate:this.onFormValidate,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.appSettings,onSubmit:function(t){return e.props.onSubmit(t.formData)}},i.a.createElement("div",null,i.a.createElement("button",{type:"submit",className:"btn btn-success mr-1"},j.c.appSettings.save),i.a.createElement("button",{type:"button",className:"btn btn-secondary btn-cancel",onClick:this.onFormCancel},j.c.common.cancel)))))}},{key:"onFormValidate",value:function(e,t){return-1===this.state.classNames.indexOf("was-validated")&&this.setState({classNames:[].concat(Object(ie.a)(this.state.classNames),["was-validated"])}),t}},{key:"onFormCancel",value:function(){this.props.onCancel&&this.props.onCancel()}}]),t}(i.a.Component);var et=Object(b.b)(function(e){return{appSettings:e.appSettings}},function(e){return{actions:Object(y.bindActionCreators)(a,e)}})(Ge=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).toggleDevTools=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.toggleDevTools(!n.props.appSettings.devToolsEnabled);case 2:case"end":return e.stop()}},e,this)})),n.reloadApp=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.reloadApplication();case 2:case"end":return e.stop()}},e,this)})),n.toggleDevTools=n.toggleDevTools.bind(Object(be.a)(Object(be.a)(n))),n.reloadApp=n.reloadApp.bind(Object(be.a)(Object(be.a)(n))),n.onFormSubmit=n.onFormSubmit.bind(Object(be.a)(Object(be.a)(n))),n.onFormCancel=n.onFormCancel.bind(Object(be.a)(Object(be.a)(n))),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-settings-page"},i.a.createElement(Ze,{appSettings:this.props.appSettings,onSubmit:this.onFormSubmit,onCancel:this.onFormCancel}),i.a.createElement("div",{className:"app-settings-page-sidebar p-3 bg-lighter-1"},i.a.createElement("div",{className:"my-3"},i.a.createElement("p",null,"".concat(j.c.appSettings.version.description," ").concat(U.a.version))),i.a.createElement("div",{className:"my-3"},i.a.createElement("p",null,"".concat(j.c.appSettings.commit,": ")," ","4464203")),Object(Pe.e)()&&i.a.createElement("span",null,i.a.createElement("div",{className:"my-3"},i.a.createElement("p",null,j.c.appSettings.devTools.description),i.a.createElement("button",{id:"toggleDevTools",className:"btn btn-primary btn-sm",onClick:this.toggleDevTools},j.c.appSettings.devTools.button)),i.a.createElement("div",{className:"my-3"},i.a.createElement("p",null,j.c.appSettings.reload.description),i.a.createElement("button",{id:"refreshApp",className:"btn btn-primary btn-sm",onClick:this.reloadApp},j.c.appSettings.reload.button)))))}},{key:"onFormSubmit",value:function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actions.saveAppSettings(t);case 2:Ne.toast.success(j.c.appSettings.messages.saveSuccess),this.props.history.goBack();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onFormCancel",value:function(){this.props.history.goBack()}}]),t}(i.a.Component))||Ge,tt=n(106),nt=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,[{key:"save",value:function(e){return T.a.null(e),new Promise(function(){var t=Object(d.a)(p.a.mark(function t(n,r){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.id||(e.id=O.a.generate()),!(a=tt.a.createFromConnection(e)).initialize){t.next=6;break}return t.next=6,a.initialize();case 6:n(e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,n){return t.apply(this,arguments)}}())}}]),e}();function rt(e){return function(t){return t(st(e)),Promise.resolve(e)}}function at(e){return function(){var t=Object(d.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new nt,t.next=3,r.save(e);case 3:return n(it(e)),t.abrupt("return",Promise.resolve(e));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}function ot(e){return function(t){return t(ct(e)),Promise.resolve()}}var st=Object(z.b)(I.a.LOAD_CONNECTION_SUCCESS),it=Object(z.b)(I.a.SAVE_CONNECTION_SUCCESS),ct=Object(z.b)(I.a.DELETE_CONNECTION_SUCCESS);function ut(e){var t=C.a.values(k.a.providers),n=C.a.values(tt.a.providers),r=C()([]).concat(n).concat(t).uniqBy("name").orderBy("displayName").value();return i.a.createElement("select",{id:e.id,className:"form-control",value:e.value,onChange:function(t){e.onChange(t.target.value)}},i.a.createElement("option",{value:""},"Select Provider"),r.map(function(e){return i.a.createElement("option",{key:e.name,value:e.name},e.displayName)}))}n(448);var lt=Object(j.a)(n(878)),pt=Object(j.a)(n(879)),dt=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).widgets={localFolderPicker:De,connectionProviderPicker:ut,protectedInput:Ye,checkbox:Ue(_e.a,function(e){return{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},disabled:e.disabled}})},r.onFormChange=function(e){e.formData.providerType!==r.state.providerName?r.bindForm(e.formData,!0):r.setState({formData:e.formData})},r.state={classNames:["needs-validation"],formSchema:Object(w.a)({},lt),uiSchema:Object(w.a)({},pt),providerName:r.props.connection?r.props.connection.providerType:null,formData:r.props.connection},r.props.connection&&r.bindForm(r.props.connection),r.onFormCancel=r.onFormCancel.bind(Object(be.a)(Object(be.a)(r))),r.onFormValidate=r.onFormValidate.bind(Object(be.a)(Object(be.a)(r))),r.onFormChange=r.onFormChange.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){e.connection!==this.props.connection&&this.bindForm(this.props.connection)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app-connections-page-detail m-3"},i.a.createElement("h3",null,i.a.createElement("i",{className:"fas fa-plug fa-1x"}),i.a.createElement("span",{className:"px-2"},j.c.connections.settings)),i.a.createElement("div",{className:"m-3"},Object(Pe.d)()&&"bingImageSearch"===this.state.providerName&&i.a.createElement("div",{className:"alert alert-warning",role:"alert"},i.a.createElement("i",{className:"fas fa-exclamation-circle mr-1","aria-hidden":"true"}),j.c.connections.imageCorsWarning),Object(Pe.d)()&&"azureBlobStorage"===this.state.providerName&&i.a.createElement("div",{className:"alert alert-warning",role:"alert"},i.a.createElement("i",{className:"fas fa-exclamation-circle mr-1","aria-hidden":"true"}),j.c.formatString(j.c.connections.blobCorsWarning,i.a.createElement("a",{href:"https://aka.ms/blob-cors",target:"_blank"},j.c.connections.azDocLinkText))),i.a.createElement(Be.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,FieldTemplate:Me,validate:this.onFormValidate,widgets:this.widgets,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.formData,onChange:this.onFormChange,onSubmit:function(t){return e.props.onSubmit(t.formData)}},i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-success mr-1",type:"submit"},j.c.connections.save),i.a.createElement("button",{className:"btn btn-secondary btn-cancel",type:"button",onClick:this.onFormCancel},j.c.common.cancel)))))}},{key:"onFormValidate",value:function(e,t){return""===e.providerType&&t.providerType.addError("is a required property"),-1===this.state.classNames.indexOf("was-validated")&&this.setState({classNames:[].concat(Object(ie.a)(this.state.classNames),["was-validated"])}),t}},{key:"onFormCancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"bindForm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e?e.providerType:null,a=this.state.formSchema,o=this.state.uiSchema;if(r){var s=Object(j.a)(n(880)("./".concat(r,".json"))),i=Object(j.a)(n(884)("./".concat(r,".ui.json")));(a=Object(w.a)({},lt)).properties.providerOptions=s,(o=Object(w.a)({},pt)).providerOptions=i}else delete(a=Object(w.a)({},lt)).properties.providerOptions,delete(o=Object(w.a)({},pt)).providerOptions,t=!0;var c=Object(w.a)({},e);t&&(c.providerOptions={}),this.setState({providerName:r,formSchema:a,uiSchema:o,formData:c})}}]),t}(i.a.Component),ft=n(1401);function gt(e){var t=e.item,n=e.onClick,r=e.onDelete;return i.a.createElement("li",{onClick:n},i.a.createElement(ft.a,{to:"/connections/".concat(t.id)},i.a.createElement("i",{className:"fas fa-edit"}),i.a.createElement("span",{className:"px-2"},t.name),i.a.createElement("div",{className:"float-right delete-btn",onClick:r},i.a.createElement("i",{className:"fas fa-trash"}))))}var mt;n(885);var ht=Object(b.b)(function(e){return{connections:e.connections}},function(e){return{actions:Object(y.bindActionCreators)(o,e)}})(mt=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).componentDidUpdate=function(e){var t=e.match.params.connectionId,n=r.props.match.params.connectionId;t!==n&&r.loadConnection(n)},r.onConnectionDelete=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.actions.deleteConnection(t);case 2:Ne.toast.info(Object(j.b)(j.c.connections.messages.deleteSuccess,{connection:t})),r.state.connection===t&&(r.props.history.push("/connections"),r.setState({connection:null}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r.onFormSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.actions.saveConnection(t);case 2:Ne.toast.success(Object(j.b)(j.c.connections.messages.saveSuccess,{connection:t})),r.props.history.goBack();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r.state={connection:null},r.confirmDelete=i.a.createRef(),r.onFormSubmit=r.onFormSubmit.bind(Object(be.a)(Object(be.a)(r))),r.onFormCancel=r.onFormCancel.bind(Object(be.a)(Object(be.a)(r))),r.onConnectionDelete=r.onConnectionDelete.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.props.match.params.connectionId)&&this.loadConnection(t);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app-connections-page"},i.a.createElement("div",{className:"app-connections-page-list bg-lighter-1"},i.a.createElement(we,{title:j.c.connections.title,newLinkTo:"/connections/create",onDelete:function(t){return e.confirmDelete.current.open(t)},Component:gt,items:this.props.connections})),i.a.createElement(Oe,{ref:this.confirmDelete,title:"Delete Connection",message:function(e){return"Are you sure you want to delete the connection '".concat(e.name,"'?")},confirmButtonColor:"danger",onConfirm:function(t){return e.onConnectionDelete(t)}}),i.a.createElement(u.a,{exact:!0,path:"/connections",render:function(e){return i.a.createElement("div",{className:"app-connections-page-detail m-3"},i.a.createElement("h6",null,j.c.connections.instructions))}}),i.a.createElement(u.a,{exact:!0,path:"/connections/:connectionId",render:function(t){return i.a.createElement(dt,{connection:e.state.connection,onSubmit:e.onFormSubmit,onCancel:e.onFormCancel})}}))}},{key:"loadConnection",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.props.connections.find(function(e){return e.id===t}))?this.setState({connection:n}):this.setState({connection:null});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onFormCancel",value:function(){this.props.history.goBack()}}]),t}(i.a.Component))||mt,vt=n(613),bt=n(103),yt=n(88),jt=n(87),wt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).image=i.a.createRef(),n.onLoad=function(){n.props.onLoaded&&n.props.onLoaded(n.image.current),n.props.onActivated&&n.props.onActivated(n.image.current),n.props.onDeactivated&&n.props.onDeactivated(n.image.current)},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("img",{ref:this.image,src:this.props.asset.path,onLoad:this.onLoad,onError:this.props.onError,crossOrigin:"anonymous"})}}]),t}(i.a.Component),xt=n(26),Ct=n.n(xt),Et=n(137),Ot=n(126),kt=n(86),St=function(e){function t(){return Object(f.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement(s.Fragment,null,this.props.accelerators&&i.a.createElement(Ot.a,{keyEventType:kt.a.KeyDown,displayName:this.props.tooltip,accelerators:this.props.accelerators,handler:this.props.onClick,icon:this.props.icon}),i.a.createElement("button",{type:"button",title:this.props.tooltip,className:"video-react-control video-react-button",onClick:this.props.onClick},this.props.children))}}]),t}(i.a.Component),Tt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={loaded:!1},n.videoPlayer=i.a.createRef(),n.timelineElement=null,n.movePreviousTaggedFrame=function(){var e=n.getVideoPlayerState().currentTime,t=C.a.reverse(n.props.childAssets).find(function(t){return t.state===S.b.Tagged&&t.timestamp<e});t&&n.seekToTime(t.timestamp)},n.moveNextTaggedFrame=function(){var e=n.getVideoPlayerState().currentTime,t=n.props.childAssets.find(function(t){return t.state===S.b.Tagged&&t.timestamp>e});t&&n.seekToTime(t.timestamp)},n.moveNextExpectedFrame=function(){var e=n.getVideoPlayerState().currentTime+1/n.props.additionalSettings.videoSettings.frameExtractionRate;n.seekToTime(e)},n.movePreviousExpectedFrame=function(){var e=n.getVideoPlayerState().currentTime-1/n.props.additionalSettings.videoSettings.frameExtractionRate;n.seekToTime(e)},n.seekToTime=function(e){var t=n.getVideoPlayerState();if(e>=0&&t.currentTime!==e){if(n.props.onBeforeAssetChanged&&!n.props.onBeforeAssetChanged())return;t.paused||n.videoPlayer.current.pause(),n.videoPlayer.current.seek(e)}},n.onVideoStateChange=function(e,t){n.state.loaded||4!==e.readyState||e.readyState===t.readyState?!e.paused||e.currentTime===t.currentTime&&e.seeking===t.seeking?e.paused||e.paused===t.paused||n.raiseActivated():n.isValidKeyFrame()&&(n.raiseChildAssetSelected(e),n.raiseDeactivated()):(n.raiseLoaded(),n.raiseActivated(),n.props.autoPlay&&n.videoPlayer.current.play())},n.raiseLoaded=function(){n.setState({loaded:!0},function(){n.props.onLoaded&&n.props.onLoaded(n.videoPlayer.current.video.video),n.addAssetTimelineTags(n.props.childAssets,n.getVideoPlayerState().duration)})},n.raiseChildAssetSelected=function(e){if(n.props.onChildAssetSelected){var t=n.props.asset.parent||n.props.asset,r="".concat(t.path,"#t=").concat(e.currentTime),a=D.a.createAssetFromFilePath(r);a.state=S.b.NotVisited,a.type=S.c.VideoFrame,a.parent=t,a.timestamp=e.currentTime,a.size=Object(w.a)({},n.props.asset.size),n.props.onChildAssetSelected(a)}},n.raiseActivated=function(){n.props.onActivated&&n.props.onActivated(n.videoPlayer.current.video.video)},n.raiseDeactivated=function(){n.props.onDeactivated&&n.props.onDeactivated(n.videoPlayer.current.video.video)},n.isValidKeyFrame=function(){if(!n.props.additionalSettings)return!1;var e=1/n.props.additionalSettings.videoSettings.frameExtractionRate,t=n.getVideoPlayerState().currentTime,r=+(Math.round(t/e)*e).toFixed(6);return r!==t&&n.seekToTime(r),r===t},n.addAssetTimelineTags=function(e,t){if(n.props.autoPlay){var r=n.renderTimeline(e,t);if(n.timelineElement=document.querySelector(".editor-page-content-main-body .video-react-progress-control .video-timeline-root"),!n.timelineElement){var a=document.querySelector(".editor-page-content-main-body .video-react-progress-control");a&&(n.timelineElement=document.createElement("div"),n.timelineElement.className="video-timeline-root",a.appendChild(n.timelineElement))}n.timelineElement&&Ct.a.render(r,n.timelineElement)}},n.renderTimeline=function(e,t){return i.a.createElement("div",{className:"video-timeline-container"},e.map(function(e){return n.renderChildAssetMarker(e,t)}))},n.renderChildAssetMarker=function(e,t){var r=e.state===S.b.Tagged?"video-timeline-tagged":"video-timeline-visited",a=e.timestamp/t,o={left:"".concat(100*a,"%")};return i.a.createElement("div",{key:e.timestamp,onClick:function(){return n.seekToTime(e.timestamp)},className:r,style:o})},n.getVideoPlayerState=function(){return n.videoPlayer.current.getState().player},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.autoPlay,n=e.asset,r=n.path;return t||(r="".concat(n.path,"#t=5.0")),i.a.createElement(Et.Player,{ref:this.videoPlayer,fluid:!1,width:"100%",height:"100%",autoPlay:t,src:r,onError:this.props.onError,crossOrigin:"anonymous"},i.a.createElement(Et.BigPlayButton,{position:"center"}),t&&i.a.createElement(Et.ControlBar,{autoHide:!1},!this.props.controlsEnabled&&i.a.createElement(s.Fragment,null,i.a.createElement("div",{className:"video-react-control-bar-disabled"})),i.a.createElement(St,{order:1.1,accelerators:["ArrowLeft","A","a"],tooltip:j.c.editorPage.videoPlayer.previousExpectedFrame.tooltip,onClick:this.movePreviousExpectedFrame,icon:"fa-caret-left fa-lg"},i.a.createElement("i",{className:"fas fa-caret-left fa-lg"})),i.a.createElement(St,{order:1.2,accelerators:["ArrowRight","D","d"],tooltip:j.c.editorPage.videoPlayer.nextExpectedFrame.tooltip,onClick:this.moveNextExpectedFrame,icon:"fa-caret-right fa-lg"},i.a.createElement("i",{className:"fas fa-caret-right fa-lg"})),i.a.createElement(Et.CurrentTimeDisplay,{order:1.3}),i.a.createElement(Et.TimeDivider,{order:1.4}),i.a.createElement(Et.PlaybackRateMenuButton,{rates:[5,2,1,.5,.25],order:7.1}),i.a.createElement(Et.VolumeMenuButton,{enabled:!0,order:7.2}),i.a.createElement(St,{order:8.1,accelerators:["Q","q"],tooltip:j.c.editorPage.videoPlayer.previousTaggedFrame.tooltip,onClick:this.movePreviousTaggedFrame,icon:"fas fa-step-backward"},i.a.createElement("i",{className:"fas fa-step-backward"})),i.a.createElement(St,{order:8.2,accelerators:["E","e"],tooltip:j.c.editorPage.videoPlayer.nextTaggedFrame.tooltip,onClick:this.moveNextTaggedFrame,icon:"fa-step-forward"},i.a.createElement("i",{className:"fas fa-step-forward"}))))}},{key:"componentDidMount",value:function(){this.props.autoPlay&&this.videoPlayer.current.subscribeToStateChange(this.onVideoStateChange)}},{key:"componentDidUpdate",value:function(e){this.props.asset.id!==e.asset.id&&this.setState({loaded:!1}),this.props.childAssets!==e.childAssets&&this.addAssetTimelineTags(this.props.childAssets,this.getVideoPlayerState().duration),this.props.timestamp!==e.timestamp&&this.seekToTime(this.props.timestamp)}}]),t}(i.a.Component);Tt.defaultProps={autoPlay:!0,controlsEnabled:!0,timestamp:null,asset:null,childAssets:[]};var At=n(614),Ft=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={loaded:!1,hasError:!1},n.renderAsset=function(){var e=n.props,t=e.asset,r=e.childAssets,a=e.autoPlay,o=t.parent||t;switch(t.type){case S.c.Image:return i.a.createElement(wt,{asset:o,additionalSettings:n.props.additionalSettings,onLoaded:n.onAssetLoad,onError:n.onError,onActivated:n.props.onActivated,onDeactivated:n.props.onDeactivated});case S.c.Video:case S.c.VideoFrame:return i.a.createElement(Tt,{asset:o,controlsEnabled:n.props.controlsEnabled,additionalSettings:n.props.additionalSettings,childAssets:r,timestamp:t.timestamp,autoPlay:a,onLoaded:n.onAssetLoad,onError:n.onError,onBeforeAssetChanged:n.props.onBeforeAssetChanged,onChildAssetSelected:n.onChildAssetSelected,onActivated:n.props.onActivated,onDeactivated:n.props.onDeactivated});case S.c.TFRecord:return i.a.createElement(At.a,{asset:t,onLoaded:n.onAssetLoad,onError:n.onError,onActivated:n.props.onActivated,onDeactivated:n.props.onDeactivated});default:return i.a.createElement("div",{className:"asset-error"},j.c.editorPage.assetError)}},n.onAssetLoad=function(e){n.setState({loaded:!0},function(){n.props.onLoaded&&n.props.onLoaded(e)})},n.onError=function(e){n.setState({hasError:!0,loaded:!0},function(){n.props.onError&&n.props.onError(e)})},n.onChildAssetSelected=function(e){n.props.onBeforeAssetChanged&&!n.props.onBeforeAssetChanged()||(n.props.onChildAssetSelected&&n.props.onChildAssetSelected(e),n.props.onAssetChanged&&n.props.onAssetChanged(e))},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.asset.id!==e.asset.id&&(this.setState({loaded:!1,hasError:!1}),this.props.onAssetChanged&&this.props.onAssetChanged(this.props.asset))}},{key:"render",value:function(){var e=this.state,t=e.loaded,n=e.hasError,r=this.props.asset.size,a=["asset-preview"];return r&&(r.width>r.height?a.push("landscape"):a.push("portrait")),i.a.createElement("div",{className:a.join(" ")},i.a.createElement("div",{className:"asset-preview-container"},!t&&i.a.createElement("div",{className:"asset-loading"},i.a.createElement("div",{className:"asset-loading-spinner"},i.a.createElement("i",{className:"fas fa-circle-notch fa-spin"}))),n&&i.a.createElement("div",{className:"asset-error text-danger"},i.a.createElement("i",{className:"fas fa-2x fa-exclamation-circle"}),i.a.createElement("p",{className:"m-2"},j.c.editorPage.assetError)),!n&&this.renderAsset()))}}]),t}(i.a.Component);Ft.defaultProps={asset:null,childAssets:[],autoPlay:!1,controlsEnabled:!0};var Nt,Pt=n(219),Rt=n(388),Lt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).pickerBackground="#252526",n.onChange=function(e){n.props.onEditColor(e.hex)},n.GithubPicker=function(){return i.a.createElement("div",{className:"color-picker"},i.a.createElement(Rt.GithubPicker,{color:{hex:n.props.color},onChangeComplete:n.onChange,colors:n.props.colors,width:160,styles:{default:{card:{background:n.pickerBackground}}},triangle:"hide"}))},n.CirclePicker=function(){return i.a.createElement("div",{className:"circle-picker-container"},i.a.createElement(Rt.CirclePicker,{width:200,onChange:n.onChange,colors:n.props.colors,hex:n.props.color,circleSize:25}))},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return this.props.show&&this.GithubPicker()}}]),t}(i.a.Component);n(515);!function(e){e.Color="color",e.Name="name"}(Nt||(Nt={}));var Bt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={isBeingEdited:!1,isLocked:!1,tagEditMode:null},n.onColorClick=function(e){e.stopPropagation();var t=e.ctrlKey||e.metaKey,r=e.altKey;n.setState({tagEditMode:Nt.Color},function(){return n.props.onClick(n.props.tag,{ctrlKey:t,altKey:r,clickedColor:!0})})},n.onNameClick=function(e){e.stopPropagation();var t=e.ctrlKey||e.metaKey,r=e.altKey;n.setState({tagEditMode:Nt.Name},function(){return n.props.onClick(n.props.tag,{ctrlKey:t,altKey:r})})},n.getItemClassName=function(){var e=["tag-item"];return n.props.isSelected&&e.push("tag-item-selected"),n.props.appliedToSelectedRegions&&e.push("tag-item-applied"),e.join(" ")},n.getTagContent=function(){var e=n.getDisplayIndex();return i.a.createElement("div",{className:"tag-name-container"},i.a.createElement("div",{className:"tag-name-body"},n.state.isBeingEdited&&n.state.tagEditMode===Nt.Name?i.a.createElement("input",{className:"tag-name-editor ".concat(n.getContentClassName()),type:"text",defaultValue:n.props.tag.name,onKeyDown:function(e){return n.handleNameEdit(e)},autoFocus:!0}):i.a.createElement("span",{title:n.props.tag.name,className:n.getContentClassName()},n.props.tag.name)),i.a.createElement("div",{className:"tag-lock-icon"},n.props.isLocked&&i.a.createElement("i",{className:"fas fa-lock"})),i.a.createElement("div",{className:"tag-index"},null!==e&&i.a.createElement("span",null,"[",e,"]")))},n.handleNameEdit=function(e){if("Enter"===e.key){var t=e.target.value;n.props.onChange(n.props.tag,Object(w.a)({},n.props.tag,{name:t}))}else"Escape"===e.key&&n.setState({isBeingEdited:!1})},n.getContentClassName=function(){var e=["tag-name-text px-2"];return n.state.isBeingEdited&&n.state.tagEditMode===Nt.Color&&e.push(" tag-color-edit"),e.join(" ")},n.getDisplayIndex=function(){var e=n.props.index,t=9===e?0:e+1;return t<10?t:null},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e={background:this.props.tag.color};return i.a.createElement("div",{className:"tag-item-block"},this.props.tag&&i.a.createElement("li",{className:this.getItemClassName(),style:e},i.a.createElement("div",{className:"tag-color",onClick:this.onColorClick}),i.a.createElement("div",{className:"tag-content",onClick:this.onNameClick},this.getTagContent()),this.state.isLocked&&i.a.createElement("div",null)))}},{key:"componentDidUpdate",value:function(e){e.isBeingEdited!==this.props.isBeingEdited&&this.setState({isBeingEdited:this.props.isBeingEdited}),e.isLocked!==this.props.isLocked&&this.setState({isLocked:this.props.isLocked})}}]),t}(i.a.Component),Mt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).onToolbarItemClick=function(e,t){e.stopPropagation(),t.handler()},n.getToolbarItems=function(){return[{displayName:j.c.tags.toolbar.add,className:"plus",icon:"fa-plus-circle",handler:n.handleAdd},{displayName:j.c.tags.toolbar.search,className:"search",icon:"fa-search",handler:n.handleSearch},{displayName:j.c.tags.toolbar.lock,className:"lock",icon:"fa-lock",handler:n.handleLock},{displayName:j.c.tags.toolbar.edit,className:"edit",icon:"fa-edit",handler:n.handleEdit},{displayName:j.c.tags.toolbar.moveUp,className:"up",icon:"fa-arrow-circle-up",handler:n.handleArrowUp},{displayName:j.c.tags.toolbar.moveDown,className:"down",icon:"fa-arrow-circle-down",handler:n.handleArrowDown},{displayName:j.c.tags.toolbar.delete,className:"delete",icon:"fa-trash",handler:n.handleDelete}]},n.handleAdd=function(){n.props.onAddTags()},n.handleSearch=function(){n.props.onSearchTags()},n.handleLock=function(){n.props.onLockTag(n.props.selectedTag)},n.handleEdit=function(){n.props.onEditTag(n.props.selectedTag)},n.handleArrowUp=function(){n.props.onReorder(n.props.selectedTag,-1)},n.handleArrowDown=function(){n.props.onReorder(n.props.selectedTag,1)},n.handleDelete=function(){n.props.onDelete(n.props.selectedTag)},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"tag-input-toolbar"},this.getToolbarItems().map(function(t){return i.a.createElement("div",{key:t.displayName,className:"tag-input-toolbar-item ".concat(t.className),onClick:function(n){return e.onToolbarItemClick(n,t)}},i.a.createElement("i",{className:"tag-input-toolbar-icon fas ".concat(t.icon)}))}))}}]),t}(i.a.Component),It=n(516);function Dt(){return document.createElement("div")}var zt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={tags:n.props.tags||[],clickedColor:!1,showColorPicker:!1,addTags:n.props.showTagInputBox,searchTags:n.props.showSearchBox,searchQuery:"",selectedTag:null,editingTag:null,editingTagNode:null,portalElement:Dt()},n.tagItemRefs=new Map,n.portalDiv=document.createElement("div"),n.getTagNode=function(e){var t=e?n.tagItemRefs.get(e.name):null;return t?Ct.a.findDOMNode(t):Dt()},n.onEditTag=function(e){var t=n.state.editingTag,r=t&&t.name===e.name?null:e;n.setState({editingTag:r,editingTagNode:n.getTagNode(r)}),n.state.clickedColor&&n.setState({showColorPicker:!n.state.showColorPicker})},n.onLockTag=function(e){if(e){var t=Object(ie.a)(n.props.lockedTags);t.find(function(t){return t===e.name})?t=t.filter(function(t){return t!==e.name}):t.push(e.name),n.props.onLockedTagsChange(t)}},n.onReOrder=function(e,t){if(e){var r=Object(ie.a)(n.state.tags),a=r.indexOf(e),o=a+t;o<0||o>=r.length||(r.splice(a,1),r.splice(o,0,e),n.setState({tags:r},function(){return n.props.onChange(r)}))}},n.handleColorChange=function(e){var t=n.state.editingTag,r=n.state.tags.map(function(n){return n.name===t.name?{name:n.name,color:e}:n});n.setState({tags:r,editingTag:null,showColorPicker:!1},function(){return n.props.onChange(r)})},n.updateTag=function(e,t){if(e.name!==t.name||e.color!==t.color)if(t.name.length){var r=e.name!==t.name;if(r&&n.state.tags.some(function(e){return e.name===t.name}))Ne.toast.warn(j.c.tags.warnings.existingName);else if(r&&n.props.onTagRenamed)n.props.onTagRenamed(e.name,t.name);else{var a=n.state.tags.map(function(n){return n.name===e.name?t:n});n.setState({tags:a,editingTag:null,selectedTag:t},function(){n.props.onChange(a)})}}else Ne.toast.warn(j.c.tags.warnings.emptyName)},n.getColorPickerPortal=function(){return i.a.createElement("div",null,Ct.a.createPortal(i.a.createElement(Pt.a,{align:n.getAlignConfig(),target:n.getTarget},i.a.createElement("div",{className:"tag-input-color-picker"},n.state.showColorPicker&&i.a.createElement(Lt,{color:n.state.editingTag&&n.state.editingTag.color,colors:It,onEditColor:n.handleColorChange,show:n.state.showColorPicker}))),n.state.portalElement))},n.getAlignConfig=function(){var e=n.getEditingTagCoords(),t=e&&e.top>window.innerHeight/2,r=t?"b":"t",a=t?6:-6;return{points:["".concat(r,"r"),"".concat(r,"l")],offset:[0,a]}},n.getEditingTagCoords=function(){var e=n.state.editingTagNode;return e?e.getBoundingClientRect():null},n.getTarget=function(){return n.state.editingTagNode||document},n.renderTagItems=function(){var e=n.createTagItemProps(),t=n.state.searchQuery;return n.tagItemRefs.clear(),t.length&&(e=e.filter(function(e){return e.tag.name.toLowerCase().includes(t.toLowerCase())})),e.map(function(e){return i.a.createElement(Bt,Object.assign({key:e.tag.name,ref:function(t){return n.setTagItemRef(t,e.tag)}},e))})},n.setTagItemRef=function(e,t){return n.tagItemRefs.set(t.name,e),e},n.createTagItemProps=function(){var e=n.state.tags,t=n.getSelectedRegionTagSet();return e.map(function(r){return{tag:r,index:e.findIndex(function(e){return e.name===r.name}),isLocked:n.props.lockedTags&&n.props.lockedTags.findIndex(function(e){return e===r.name})>-1,isBeingEdited:n.state.editingTag&&n.state.editingTag.name===r.name,isSelected:n.state.selectedTag&&n.state.selectedTag.name===r.name,appliedToSelectedRegions:t.has(r.name),onClick:n.handleClick,onChange:n.updateTag}})},n.getSelectedRegionTagSet=function(){var e=new Set;if(n.props.selectedRegions){var t=!0,r=!1,a=void 0;try{for(var o,s=n.props.selectedRegions[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var i=o.value,c=!0,u=!1,l=void 0;try{for(var p,d=i.tags[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;e.add(f)}}catch(g){u=!0,l=g}finally{try{c||null==d.return||d.return()}finally{if(u)throw l}}}}catch(g){r=!0,a=g}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}}return e},n.onAltClick=function(e,t){var r=n.state.editingTag,a=r&&r.name===e.name?null:e;n.setState({editingTag:a,editingTagNode:n.getTagNode(a),clickedColor:t,showColorPicker:!n.state.showColorPicker&&t})},n.handleClick=function(e,t){if(t.ctrlKey&&n.props.onCtrlTagClick)n.props.onCtrlTagClick(e),n.setState({clickedColor:t.clickedColor});else if(t.altKey)n.onAltClick(e,t.clickedColor);else{var r=n.state,a=r.editingTag,o=r.selectedTag,s=a&&e.name===a.name,i=o&&o.name===e.name,c=s?null:a;n.setState({editingTag:c,editingTagNode:n.getTagNode(c),selectedTag:i&&!s?null:e,clickedColor:t.clickedColor,showColorPicker:!1}),n.props.selectedRegions&&n.props.selectedRegions.length>0&&n.props.onTagClick&&!s&&n.props.onTagClick(e)}},n.deleteTag=function(e){if(e)if(n.props.onTagDeleted)n.props.onTagDeleted(e.name);else{var t=n.state.tags.indexOf(e),r=n.state.tags.filter(function(t){return t.name!==e.name});n.setState({tags:r,selectedTag:n.getNewSelectedTag(r,t)},function(){return n.props.onChange(r)}),n.props.lockedTags.find(function(t){return t===e.name})&&n.props.onLockedTagsChange(n.props.lockedTags.filter(function(t){return t!==e.name}))}},n.getNewSelectedTag=function(e,t){return e.length?e[Math.min(e.length-1,t)]:null},n.onSearchKeyDown=function(e){"Escape"===e.key&&n.setState({searchTags:!1})},n.onAddTagKeyDown=function(e){if("Enter"===e.key){var t={name:e.target.value,color:n.getNextColor()};t.name.length&&!n.state.tags.find(function(e){return e.name===t.name})?(n.addTag(t),e.target.value=""):t.name.length?Ne.toast.warn(j.c.tags.warnings.existingName):Ne.toast.warn(j.c.tags.warnings.emptyName)}"Escape"===e.key&&n.setState({addTags:!1})},n.getNextColor=function(){var e=n.state.tags;if(e.length>0){var t,r=e[e.length-1].color,a=It.findIndex(function(e){return e===r});return t=a>-1?(a+1)%It.length:Object(N.f)(0,It.length-1),It[t]}return It[0]},n.addTag=function(e){if(!n.state.tags.find(function(t){return t.name===e.name})){var t=[].concat(Object(ie.a)(n.state.tags),[e]);n.setState({tags:t},function(){return n.props.onChange(t)})}},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"tag-input condensed-list"},i.a.createElement("h6",{className:"condensed-list-header tag-input-header bg-darker-2 p-2"},i.a.createElement("span",{className:"condensed-list-title tag-input-title"},"Tags"),i.a.createElement(Mt,{selectedTag:this.state.selectedTag,onAddTags:function(){return e.setState({addTags:!e.state.addTags})},onSearchTags:function(){return e.setState({searchTags:!e.state.searchTags,searchQuery:""})},onEditTag:this.onEditTag,onLockTag:this.onLockTag,onDelete:this.deleteTag,onReorder:this.onReOrder})),i.a.createElement("div",{className:"condensed-list-body"},this.state.searchTags&&i.a.createElement("div",{className:"tag-input-text-input-row search-input"},i.a.createElement("input",{className:"tag-search-box",type:"text",onKeyDown:this.onSearchKeyDown,onChange:function(t){return e.setState({searchQuery:t.target.value})},placeholder:"Search tags",autoFocus:!0}),i.a.createElement("i",{className:"tag-row-icon fas fa-search"})),this.getColorPickerPortal(),i.a.createElement("div",{className:"tag-input-items"},this.renderTagItems()),this.state.addTags&&i.a.createElement("div",{className:"tag-input-text-input-row new-tag-input"},i.a.createElement("input",{className:"tag-input-box",type:"text",onKeyDown:this.onAddTagKeyDown,placeholder:"Add new tag",autoFocus:!0}),i.a.createElement("i",{className:"tag-input-row-icon fas fa-tag"}))))}},{key:"componentDidMount",value:function(){document.body.appendChild(this.portalDiv),this.setState({portalElement:Ct.a.findDOMNode(this.portalDiv)})}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.portalDiv)}},{key:"componentDidUpdate",value:function(e){e.tags!==this.props.tags&&this.setState({tags:this.props.tags}),e.selectedRegions!==this.props.selectedRegions&&this.props.selectedRegions.length>0&&this.setState({selectedTag:null})}}]),t}(i.a.Component),Ut=n(616),Vt=n(60),_t=n(102),$t=n(261),Wt=n(381),qt=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,null,[{key:"toggleTag",value:function(e,t){return-1===e.findIndex(function(e){return e===t})?[].concat(Object(ie.a)(e),[t]):e.filter(function(e){return e!==t})}},{key:"addIfMissing",value:function(e,t){return e.find(function(e){return e===t})?e:[].concat(Object(ie.a)(e),[t])}},{key:"addAllIfMissing",value:function(t,n){var r=Object(ie.a)(t),a=!0,o=!1,s=void 0;try{for(var i,c=n[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var u=i.value;r=e.addIfMissing(r,u)}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return r}},{key:"removeIfContained",value:function(e,t){return e.filter(function(e){return e!==t})}},{key:"updateRegions",value:function(e,t){if(!e||!t||!t.length)return e;var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=function(){var e=s.value,r=t.find(function(t){return t.id===e.id});r?n.push(r):n.push(e)},c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)i()}catch(u){a=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}},{key:"getRegionData",value:function(e){return new _t.RegionData(e.boundingBox.left,e.boundingBox.top,e.boundingBox.width,e.boundingBox.height,e.points.map(function(e){return new Vt.Point2D(e.x,e.y)}),this.regionTypeToType(e.type))}},{key:"fromRegionData",value:function(e,t){return T.a.null(e),{id:O.a.generate(),type:t,boundingBox:{left:e.x,top:e.y,width:e.width,height:e.height},points:e.points.map(function(e){return new Vt.Point2D(e.x,e.y)}),tags:[]}}},{key:"isEmpty",value:function(e){return 0===e.area&&0===e.x&&0===e.y}},{key:"getTagsDescriptor",value:function(e,t){if(!e||!e.length)return null;T.a.null(t);var n=t.tags.map(function(t){var n=e.find(function(e){return e.name===t});return n?new $t.Tag(n.name,n.color):null}).filter(function(e){return null!==e});return new Wt.TagsDescriptor(n)}}]),e}();qt.pasteMargin=10,qt.regionTypeToType=function(e){var t;switch(e){case S.g.Rectangle:t=_t.RegionDataType.Rect;break;case S.g.Polygon:t=_t.RegionDataType.Polygon;break;case S.g.Point:t=_t.RegionDataType.Point;break;case S.g.Polyline:t=_t.RegionDataType.Polyline}return t},qt.duplicateRegionsAndMove=function(e,t,n,r){var a=[],o=!0,s=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value,p=qt.getShiftCoordinates(l.boundingBox,t,n,r),d=Object(w.a)({},l,{id:O.a.generate(),boundingBox:qt.shiftBoundingBox(l.boundingBox,p),points:qt.shiftPoints(l.points,p)});a.push(d)}}catch(f){s=!0,i=f}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}return a},qt.boundingBoxWithin=function(e,t,n){return e.left+e.width<t&&e.top+e.height<n},qt.fromBoundingBox=function(e){return[{x:e.left,y:e.top},{x:e.left+e.width,y:e.top},{x:e.left+e.width,y:e.top+e.height},{x:e.left,y:e.top+e.height}]},qt.shiftBoundingBox=function(e,t){return Object(w.a)({},e,{left:e.left+t.x,top:e.top+t.y})},qt.shiftPoints=function(e,t){return e.map(function(e){return{x:e.x+t.x,y:e.y+t.y}})},qt.existsRegionAt=function(e,t,n){var r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var c=s.value;if(c.boundingBox.left===t&&c.boundingBox.top===n)return!0}}catch(u){a=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return!1},qt.getShiftCoordinates=function(e,t,n,r){var a=e.left,o=e.top,s=0;if(e.height>r||e.width>n)throw new S.a(S.e.PasteRegionTooBig,j.c.errors.pasteRegionTooBigError.message);qt.boundingBoxWithin(e,n,r)||(a=s,o=0);for(var i=!1;!i;)if(qt.existsRegionAt(t,a,o))a+=qt.pasteMargin,o+=qt.pasteMargin,i=!1;else{var c={x:a-e.left,y:o-e.top},u=Object(w.a)({},e,{left:e.left+c.x,top:e.top+c.y});if(qt.boundingBoxWithin(u,n,r))return c;a=s,o=0,qt.existsRegionAt(t,s,0)&&(s+=qt.pasteMargin)}};var Kt=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,null,[{key:"writeText",value:function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",navigator.clipboard.writeText(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"writeObject",value:function(){var t=Object(d.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.writeText(JSON.stringify(n)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"readText",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",navigator.clipboard.readText());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readObject",value:function(){var t=Object(d.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.readText().then(function(e){return Promise.resolve(JSON.parse(e))}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(),Jt=n(84);function Ht(e,t){T.a.null(e);var n={width:e.offsetWidth,height:e.offsetWidth/t};return{width:n.width,height:n.height,left:e.offsetLeft,top:e.offsetTop+(e.offsetHeight-n.height)/2}}function Gt(e,t){T.a.null(e);var n={width:e.offsetHeight*t,height:e.offsetHeight};return{width:n.width,height:n.height,left:e.offsetLeft+(e.offsetWidth-n.width)/2,top:e.offsetTop}}var Yt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={currentAsset:n.props.selectedAsset,contentSource:null,enabled:!1},n.canvasZone=i.a.createRef(),n.clearConfirm=i.a.createRef(),n.template=new Jt.Rect(20,20),n.componentDidMount=function(){var e=document.getElementById("editor-zone");n.editor=new Ut.CanvasTools.Editor(e),n.editor.autoResize=!1,n.editor.onSelectionEnd=n.onSelectionEnd,n.editor.onRegionMoveEnd=n.onRegionMoveEnd,n.editor.onRegionDelete=n.onRegionDelete,n.editor.onRegionSelected=n.onRegionSelected,n.editor.AS.setSelectionMode({mode:n.props.selectionMode}),window.addEventListener("resize",n.onWindowResize)},n.componentDidUpdate=function(){var e=Object(d.a)(p.a.mark(function e(t,r){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.selectedAsset!==t.selectedAsset&&n.setState({currentAsset:n.props.selectedAsset}),n.props.selectionMode!==t.selectionMode&&(a=n.props.selectionMode===bt.SelectionMode.COPYRECT?n.template:null,n.editor.AS.setSelectionMode({mode:n.props.selectionMode,template:a})),n.state.currentAsset.asset.id!==r.currentAsset.asset.id||n.state.currentAsset===r.currentAsset||n.refreshCanvasToolsRegions(),n.props.project.tags!==t.project.tags&&n.updateCanvasToolsRegionTags(),r.enabled!==n.state.enabled&&(n.state.enabled?(n.refreshCanvasToolsRegions(),n.setContentSource(n.state.contentSource),n.editor.AS.setSelectionMode(n.props.selectionMode),n.editor.AS.enable(),n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged(n.getSelectedRegions())):(n.editor.AS.disable(),n.clearAllRegions(),n.editor.AS.setSelectionMode(bt.SelectionMode.NONE)));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.render=function(){var e=n.state.enabled?"canvas-enabled":"canvas-disabled";return i.a.createElement(s.Fragment,null,i.a.createElement(Oe,{title:j.c.editorPage.canvas.removeAllRegions.title,ref:n.clearConfirm,message:j.c.editorPage.canvas.removeAllRegions.confirmation,confirmButtonColor:"danger",onConfirm:n.removeAllRegions}),i.a.createElement("div",{id:"ct-zone",ref:n.canvasZone,className:e,onClick:function(e){return e.stopPropagation()}},i.a.createElement("div",{id:"selection-zone"},i.a.createElement("div",{id:"editor-zone",className:"full-size"}))),n.renderChildren())},n.applyTag=function(e){var t=n.getSelectedRegions(),r=n.props.lockedTags,a=!r||!r.length,o=!t||!t.length;if(!(!e&&a||o)){var s;s=a?qt.toggleTag:r.find(function(t){return t===e})?qt.addIfMissing:qt.removeIfContained;var i=!0,c=!1,u=void 0;try{for(var l,p=t[Symbol.iterator]();!(i=(l=p.next()).done);i=!0){var d=l.value;d.tags=s(d.tags,e)}}catch(f){c=!0,u=f}finally{try{i||null==p.return||p.return()}finally{if(c)throw u}}n.updateRegions(t),n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged(t)}},n.copyRegions=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt.writeObject(n.getSelectedRegions());case 2:case"end":return e.stop()}},e,this)})),n.cutRegions=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getSelectedRegions(),e.next=3,Kt.writeObject(t);case 3:n.deleteRegions(t);case 4:case"end":return e.stop()}},e,this)})),n.pasteRegions=Object(d.a)(p.a.mark(function e(){var t,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt.readObject();case 2:t=e.sent,r=n.state.currentAsset,a=qt.duplicateRegionsAndMove(t,r.regions,r.asset.size.width,r.asset.size.height),n.addRegions(a);case 6:case"end":return e.stop()}},e,this)})),n.confirmRemoveAllRegions=function(){n.clearConfirm.current.open()},n.getSelectedRegions=function(){var e=n.editor.RM.getSelectedRegionsBounds().map(function(e){return e.id});return n.state.currentAsset.regions.filter(function(t){return e.find(function(e){return t.id===e})})},n.updateCanvasToolsRegionTags=function(){var e=!0,t=!1,r=void 0;try{for(var a,o=n.state.currentAsset.regions[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;n.editor.RM.updateTagsById(s.id,qt.getTagsDescriptor(n.props.project.tags,s))}}catch(i){t=!0,r=i}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}},n.forceResize=function(){n.onWindowResize()},n.removeAllRegions=function(){var e=n.state.currentAsset.regions.map(function(e){return e.id}),t=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var i=o.value;n.editor.RM.deleteRegionById(i)}}catch(c){r=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}n.deleteRegionsFromAsset(n.state.currentAsset.regions)},n.addRegions=function(e){n.addRegionsToCanvasTools(e),n.addRegionsToAsset(e)},n.addRegionsToAsset=function(e){n.updateAssetRegions(n.state.currentAsset.regions.concat(e))},n.addRegionsToCanvasTools=function(e){var t=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var i=o.value,c=qt.getRegionData(i),u=n.editor.scaleRegionToFrameSize(c,n.state.currentAsset.asset.size.width,n.state.currentAsset.asset.size.height);n.editor.RM.addRegion(i.id,u,qt.getTagsDescriptor(n.props.project.tags,i))}}catch(l){r=!0,a=l}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}},n.deleteRegions=function(e){n.deleteRegionsFromCanvasTools(e),n.deleteRegionsFromAsset(e)},n.deleteRegionsFromAsset=function(e){var t=n.state.currentAsset.regions.filter(function(t){return!e.find(function(e){return e.id===t.id})});n.updateAssetRegions(t)},n.deleteRegionsFromCanvasTools=function(e){var t=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var i=o.value;n.editor.RM.deleteRegionById(i.id)}}catch(c){r=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}},n.onSelectionEnd=function(e){if(!qt.isEmpty(e)){var t=E.generate();n.editor.RM.addRegion(t,e,null),n.template=new Jt.Rect(e.width,e.height);var r=n.editor.scaleRegionToSourceSize(e,n.state.currentAsset.asset.size.width,n.state.currentAsset.asset.size.height),a=n.props.lockedTags,o={id:t,type:n.editorModeToType(n.props.editorMode),tags:a||[],boundingBox:{height:r.height,width:r.width,left:r.x,top:r.y},points:r.points};a&&a.length&&n.editor.RM.updateTagsById(t,qt.getTagsDescriptor(n.props.project.tags,o)),n.updateAssetRegions([].concat(Object(ie.a)(n.state.currentAsset.regions),[o])),n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged([o])}},n.updateAssetRegions=function(e){var t=Object(w.a)({},n.state.currentAsset,{regions:e});n.setState({currentAsset:t},function(){n.props.onAssetMetadataChanged(t)})},n.onRegionMoveEnd=function(e,t){var r=n.state.currentAsset.regions,a=r.findIndex(function(t){return t.id===e}),o=r[a],s=n.editor.scaleRegionToSourceSize(t,n.state.currentAsset.asset.size.width,n.state.currentAsset.asset.size.height);o&&(o.points=s.points,o.boundingBox={height:s.height,width:s.width,left:s.x,top:s.y}),r[a]=o,n.updateAssetRegions(r)},n.onRegionDelete=function(e){n.editor.RM.deleteRegionById(e);var t=n.state.currentAsset.regions,r=t.findIndex(function(t){return t.id===e});t.splice(r,1),n.updateAssetRegions(t),n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged([])},n.onRegionSelected=function(e,t){var r=n.getSelectedRegions();n.props.onSelectedRegionsChanged&&n.props.onSelectedRegionsChanged(r);var a=n.editor.RM.getSelectedRegionsBounds().find(function(t){return t.id===e});if(a&&(n.template=new Jt.Rect(a.width,a.height)),n.props.lockedTags&&n.props.lockedTags.length){var o=!0,s=!1,i=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;l.tags=qt.addAllIfMissing(l.tags,n.props.lockedTags)}}catch(p){s=!0,i=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}n.updateRegions(r)}},n.renderChildren=function(){return i.a.cloneElement(n.props.children,{onAssetChanged:n.onAssetChanged,onLoaded:n.onAssetLoaded,onError:n.onAssetError,onActivated:n.onAssetActivated,onDeactivated:n.onAssetDeactivated})},n.onAssetChanged=function(){n.setState({enabled:!1})},n.onAssetLoaded=function(e){n.setState({contentSource:e}),n.positionCanvas(e)},n.onAssetError=function(){n.setState({enabled:!1})},n.onAssetActivated=function(){n.setState({enabled:!1})},n.onAssetDeactivated=function(e){n.setState({contentSource:e,enabled:!0})},n.setContentSource=function(){var e=Object(d.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.editor.addContentSource(t);case 3:n.props.onCanvasRendered&&(r=n.canvasZone.current.querySelector("canvas"),n.props.onCanvasRendered(r)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),n.positionCanvas=function(e){if(e){var t=n.canvasZone.current;if(t){var r=function(e){T.a.null(e);var t=null;return(t=e instanceof HTMLVideoElement?e.videoWidth/e.videoHeight:e instanceof HTMLImageElement?e.naturalWidth/e.naturalHeight:e.width/e.height)>=1?(e.offsetWidth,e.offsetWidth/t>e.offsetHeight?Gt(e,t):Ht(e,t)):[e.offsetHeight*t,e.offsetHeight][0]>e.offsetWidth?Ht(e,t):Gt(e,t)}(e);t.style.top="".concat(r.top,"px"),t.style.left="".concat(r.left,"px"),t.style.width="".concat(r.width,"px"),t.style.height="".concat(r.height,"px"),n.editor.resize(r.width,r.height)}}},n.onWindowResize=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.contentSource){e.next=2;break}return e.abrupt("return");case 2:n.positionCanvas(n.state.contentSource);case 3:case"end":return e.stop()}},e,this)})),n.updateRegions=function(e){var t=qt.updateRegions(n.state.currentAsset.regions,e),r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var c=s.value;n.editor.RM.updateTagsById(c.id,qt.getTagsDescriptor(n.props.project.tags,c))}}catch(u){a=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}n.updateAssetRegions(t),n.updateCanvasToolsRegionTags()},n.clearAllRegions=function(){n.editor.RM.deleteAllRegions()},n.refreshCanvasToolsRegions=function(){n.clearAllRegions(),n.state.currentAsset.regions&&0!==n.state.currentAsset.regions.length&&n.state.currentAsset.regions.forEach(function(e){var t=qt.getRegionData(e);n.editor.RM.addRegion(e.id,n.editor.scaleRegionToFrameSize(t,n.state.currentAsset.asset.size.width,n.state.currentAsset.asset.size.height),qt.getTagsDescriptor(n.props.project.tags,e))})},n.editorModeToType=function(e){var t;switch(e){case S.d.CopyRect:case S.d.Rectangle:t=S.g.Rectangle;break;case S.d.Polygon:t=S.g.Polygon;break;case S.d.Point:t=S.g.Point;break;case S.d.Polyline:t=S.g.Polyline}return t},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize)}}]),t}(i.a.Component);Yt.defaultProps={selectionMode:bt.SelectionMode.NONE,editorMode:S.d.Select,selectedAsset:null,project:null,lockedTags:[]};n(1090);var Qt,Xt=n(393),Zt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={scrollToIndex:n.props.selectedAsset?n.props.assets.findIndex(function(e){return e.id===n.props.selectedAsset.id}):0},n.listRef=i.a.createRef(),n.getRowHeight=function(e){return e/(4/3)+16},n.selectAsset=function(e){var t=n.props.assets.findIndex(function(t){return t.id===e.id});n.setState({scrollToIndex:t},function(){n.listRef.current.forceUpdateGrid()})},n.onAssetClicked=function(e){n.props.onBeforeAssetSelected&&!n.props.onBeforeAssetSelected()||(n.selectAsset(e),n.props.onAssetSelected(e))},n.rowRenderer=function(e){var t=e.key,r=e.index,a=e.style,o=n.props.assets[r],s=n.props.selectedAsset;return i.a.createElement("div",{key:t,style:a,className:n.getAssetCssClassNames(o,s),onClick:function(){return n.onAssetClicked(o)}},i.a.createElement("div",{className:"asset-item-image"},n.renderBadges(o),i.a.createElement(Ft,{asset:o})),i.a.createElement("div",{className:"asset-item-metadata"},i.a.createElement("span",{className:"asset-filename",title:o.name},o.name),o.size&&i.a.createElement("span",null,o.size.width," x ",o.size.height)))},n.renderBadges=function(e){switch(e.state){case S.b.Tagged:return i.a.createElement("span",{title:j.c.editorPage.tagged,className:"badge badge-tagged"},i.a.createElement("i",{className:"fas fa-tag"}));case S.b.Visited:return i.a.createElement("span",{title:j.c.editorPage.visited,className:"badge badge-visited"},i.a.createElement("i",{className:"fas fa-eye"}));default:return null}},n.getAssetCssClassNames=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=["asset-item"];return t&&t.id===e.id&&n.push("selected"),n.join(" ")},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"editor-page-sidebar-nav"},i.a.createElement(Xt.a,null,function(t){var n=t.height,r=t.width;return i.a.createElement(Xt.b,{ref:e.listRef,className:"asset-list",height:n,width:r,rowCount:e.props.assets.length,rowHeight:function(){return e.getRowHeight(r)},rowRenderer:e.rowRenderer,overscanRowCount:2,scrollToIndex:e.state.scrollToIndex})}))}},{key:"componentDidUpdate",value:function(e){e.thumbnailSize!==this.props.thumbnailSize&&this.listRef.current.recomputeRowHeights(),(e.selectedAsset||this.props.selectedAsset)&&(!e.selectedAsset&&this.props.selectedAsset||e.selectedAsset.id!==this.props.selectedAsset.id)&&this.selectAsset(this.props.selectedAsset)}}]),t}(i.a.Component),en=n(66),tn=(n(1099),function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={selectedItem:jt.a.SelectCanvas},n.onToolbarItemSelected=function(e){n.setState({selectedItem:e.props.name},function(){n.props.onToolbarItemSelected(e)})},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=C()(this.props.items).groupBy("config.group").values().value();return i.a.createElement("div",{className:"btn-toolbar",role:"toolbar"},t.map(function(t,n){return i.a.createElement("div",{key:n,className:"btn-group mr-2",role:"group"},t.map(function(t){var n=Object(w.a)({},t.config,{actions:e.props.actions,project:e.props.project,active:e.isComponentActive(e.state.selectedItem,t),onClick:e.onToolbarItemSelected}),r=t.component;return i.a.createElement(r,Object.assign({key:n.name},n))}))}))}},{key:"isComponentActive",value:function(e,t){return!!e&&(e===t.config.name&&t.config.type===en.b.State)}}]),t}(i.a.Component)),nn=n(271),rn=n(278),an=n(97),on=n.n(an),sn=n(99),cn=function(){function e(t){Object(f.a)(this,e);var n={folderPath:t};this.provider=new Ie.a(n)}return Object(g.a)(e,[{key:"load",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,r,a,o,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,this.provider.readText("/model.json");case 3:if(e.t1=e.sent,t=e.t0.parse.call(e.t0,e.t1),n={modelTopology:t.modelTopology},null==t.weightsManifest){e.next=15;break}return e.next=9,this.loadWeights(t.weightsManifest);case 9:r=e.sent,a=Object(rn.a)(r,2),o=a[0],s=a[1],n.weightSpecs=o,n.weightData=s;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadClasses",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.readText("/classes.json");case 2:return t=e.sent,e.abrupt("return",t?JSON.parse(t):null);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r,a,o,s,i,c,u,l,d,f,g,m,h,v;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],a=!0,o=!1,s=void 0,e.prev=5,i=t[Symbol.iterator]();case 7:if(a=(c=i.next()).done){e.next=41;break}u=c.value,l=!0,d=!1,f=void 0,e.prev=12,g=u.paths[Symbol.iterator]();case 14:if(l=(m=g.next()).done){e.next=23;break}return h=m.value,e.next=18,this.provider.readBinary("/"+h);case 18:v=e.sent,n.push(v);case 20:l=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),d=!0,f=e.t0;case 29:e.prev=29,e.prev=30,l||null==g.return||g.return();case 32:if(e.prev=32,!d){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(29);case 37:r.push.apply(r,Object(ie.a)(u.weights));case 38:a=!0,e.next=7;break;case 41:e.next=47;break;case 43:e.prev=43,e.t1=e.catch(5),o=!0,s=e.t1;case 47:e.prev=47,e.prev=48,a||null==i.return||i.return();case 50:if(e.prev=50,!o){e.next=53;break}throw s;case 53:return e.finish(50);case 54:return e.finish(47);case 55:return e.abrupt("return",[r,this.toArrayBuffer(n)]);case 56:case"end":return e.stop()}},e,this,[[5,43,47,55],[12,25,29,37],[30,,32,36],[48,,50,54]])}));return function(t){return e.apply(this,arguments)}}()},{key:"toArrayBuffer",value:function(e){if(Array.isArray(e)){var t=0,n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){t+=o.value.length}}catch(m){r=!0,a=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}var i=new ArrayBuffer(t),c=new Uint8Array(i),u=0,l=!0,p=!1,d=void 0;try{for(var f,g=e[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){u+=f.value.copy(c,u)}}catch(m){p=!0,d=m}finally{try{l||null==g.return||g.return()}finally{if(p)throw d}}return i}return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}]),e}(),un=function(){function e(){Object(f.a)(this,e),this.modelLoaded=!1}return Object(g.a)(e,[{key:"dispose",value:function(){this.model&&this.model.dispose()}},{key:"load",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.toLowerCase().startsWith("http://")&&!t.toLowerCase().startsWith("https://")){e.next=11;break}return e.next=4,sn.f(t+"/model.json");case 4:return this.model=e.sent,e.next=7,on.a.get(t+"/classes.json");case 7:n=e.sent,this.jsonClasses=JSON.parse(JSON.stringify(n.data)),e.next=18;break;case 11:return r=new cn(t),e.next=14,sn.f(r);case 14:return this.model=e.sent,e.next=17,r.loadClasses();case 17:this.jsonClasses=e.sent;case 18:return e.next=20,this.model.executeAsync(sn.j([1,300,300,3]));case 20:(a=e.sent).forEach(function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),a.forEach(function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.dispose());case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),this.modelLoaded=!0,e.next=30;break;case 26:throw e.prev=26,e.t0=e.catch(0),this.modelLoaded=!1,e.t0;case 30:case"end":return e.stop()}},e,this,[[0,26]])}));return function(t){return e.apply(this,arguments)}}()},{key:"predictImage",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n,r,a){var o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.next=3,this.detect(t);case 3:return e.sent.forEach(function(e){var t=Math.max(0,e.bbox[0]*r),s=Math.max(0,e.bbox[1]*a),i=Math.max(0,e.bbox[2]*r),c=Math.max(0,e.bbox[3]*a);o.push({id:E.generate(),type:S.g.Rectangle,tags:n?[e.class]:[],boundingBox:{left:t,top:s,width:i,height:c},points:[{x:t,y:s},{x:t+i,y:s},{x:t+i,y:s+c},{x:t,y:s+c}]})}),e.abrupt("return",o);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"detect",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:20,!this.model){e.next=3;break}return e.abrupt("return",this.infer(t,n));case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"infer",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n,r,a,o,s,i,c,u,l,d,f,g,m,h,v=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:20,r=sn.i(function(){return t instanceof sn.a||(t=sn.b.fromPixels(t)),t.expandDims(0)}),a=r.shape[1],o=r.shape[2],e.next=6,this.model.executeAsync(r);case 6:return s=e.sent,i=s[0].dataSync(),c=s[1].dataSync(),r.dispose(),sn.c(s),u=this.calculateMaxScores(i,s[0].shape[1],s[0].shape[2]),l=Object(rn.a)(u,2),d=l[0],f=l[1],g=sn.d(),sn.g("cpu"),m=sn.i(function(){var e=sn.h(c,[s[1].shape[1],s[1].shape[3]]);return sn.e.nonMaxSuppression(e,d,n,.5,.5)}),h=m.dataSync(),m.dispose(),sn.g(g),e.abrupt("return",this.buildDetectedObjects(o,a,c,d,h,f));case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"buildDetectedObjects",value:function(e,t,n,r,a,o){for(var s=a.length,i=[],c=0;c<s;c++){for(var u=[],l=0;l<4;l++)u[l]=n[4*a[c]+l];var p=u[0]*t,d=u[1]*e,f=u[2]*t,g=u[3]*e;u[0]=d,u[1]=p,u[2]=g-d,u[3]=f-p,i.push({bbox:u,class:this.getClass(c,a,o),score:r[a[c]]})}return i}},{key:"getClass",value:function(e,t,n){if(this.jsonClasses&&e<t.length&&t[e]<n.length){var r=n[t[e]]-1,a=this.jsonClasses[r];return a?a.displayName:j.c.tags.warnings.unknownTagName}return""}},{key:"calculateMaxScores",value:function(e,t,n){for(var r=[],a=[],o=0;o<t;o++){for(var s=Number.MIN_VALUE,i=-1,c=0;c<n;c++)e[o*n+c]>s&&(s=e[o*n+c],i=c);r[o]=s,a[o]=i}return[r,a]}},{key:"loaded",get:function(){return this.modelLoaded}}]),e}(),ln=n(135),pn=function(){function e(t){Object(f.a)(this,e),this.settings=t,this.modelLoaded=!1,this.getAppPath=function(){return window.require("electron").remote.app.getAppPath()},T.a.null(t),this.objectDetection=new un}return Object(g.a)(e,[{key:"isModelLoaded",value:function(){return this.modelLoaded}},{key:"predictRegions",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r,a,o,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.a.null(t),T.a.null(n),t.width&&t.height&&n.asset&&n.asset.size){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,this.ensureModelLoaded();case 6:return r=n.asset.size.width/t.width,a=n.asset.size.height/t.height,e.next=10,this.objectDetection.predictImage(t,this.settings.predictTag,r,a);case 10:return o=e.sent,s=Object(ie.a)(n.regions),o.forEach(function(e){var t=s.find(function(t){return t.boundingBox&&t.boundingBox.left===e.boundingBox.left&&t.boundingBox.top===e.boundingBox.top&&t.boundingBox.width===e.boundingBox.width&&t.boundingBox.height===e.boundingBox.height});0!==s.length&&t||s.push(e)}),e.abrupt("return",Object(w.a)({},n,{regions:s,asset:Object(w.a)({},n.asset,{state:s.length>0?S.b.Tagged:S.b.Visited,predicted:!0})}));case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"ensureModelLoaded",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.modelLoaded){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.next=4,this.loadModel();case 4:this.modelLoaded=!0;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadModel",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",this.settings.modelPathType===S.f.Coco?Object(Pe.e)()?(n=this.getAppPath(),t="production"!==ln.a.get()?n+"/cocoSSDModel":n+"/../../cocoSSDModel"):t="https://vott.blob.core.windows.net/coco-ssd-model":this.settings.modelPathType===S.f.File?Object(Pe.e)()&&(t=this.settings.modelPath):t=this.settings.modelUrl,e.next=4,this.objectDetection.load(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();var dn,fn=Object(b.b)(function(e){return{recentProjects:e.recentProjects,project:e.currentProject,appSettings:e.appSettings}},function(e){return{actions:Object(y.bindActionCreators)(r,e),applicationActions:Object(y.bindActionCreators)(a,e)}})(Qt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={selectedTag:null,lockedTags:[],selectionMode:bt.SelectionMode.RECT,assets:[],childAssets:[],editorMode:S.d.Rectangle,additionalSettings:{videoSettings:n.props.project?n.props.project.videoSettings:null,activeLearningSettings:n.props.project?n.props.project.activeLearningSettings:null},thumbnailSize:n.props.appSettings.thumbnailSize||{width:175,height:155},isValid:!0,showInvalidRegionWarning:!1},n.activeLearningService=null,n.loadingProjectAssets=!1,n.toolbarItems=yt.a.getToolbarItems(),n.canvas=i.a.createRef(),n.renameTagConfirm=i.a.createRef(),n.deleteTagConfirm=i.a.createRef(),n.onPageClick=function(){n.setState({selectedRegions:[]})},n.onSideBarResize=function(e){n.setState({thumbnailSize:{width:e,height:e/(4/3)}},function(){return n.canvas.current.forceResize()})},n.onSideBarResizeComplete=function(){var e=Object(w.a)({},n.props.appSettings,{thumbnailSize:n.state.thumbnailSize});n.props.applicationActions.saveAppSettings(e)},n.onTagClicked=function(e){n.setState({selectedTag:e.name,lockedTags:[]},function(){return n.canvas.current.applyTag(e.name)})},n.confirmTagRenamed=function(e,t){n.renameTagConfirm.current.open(e,t)},n.onTagRenamed=function(){var e=Object(d.a)(p.a.mark(function e(t,r){var a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.updateProjectTag(n.props.project,t,r);case 2:a=e.sent,(o=a.find(function(e){return e.asset.id===n.state.selectedAsset.asset.id}))&&o&&n.setState({selectedAsset:o});case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.confirmTagDeleted=function(e){n.deleteTagConfirm.current.open(e)},n.onTagDeleted=function(){var e=Object(d.a)(p.a.mark(function e(t){var r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.deleteProjectTag(n.props.project,t);case 2:r=e.sent,(a=r.find(function(e){return e.asset.id===n.state.selectedAsset.asset.id}))&&n.setState({selectedAsset:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onCtrlTagClicked=function(e){var t=n.state.lockedTags;n.setState({selectedTag:e.name,lockedTags:qt.toggleTag(t,e.name)},function(){return n.canvas.current.applyTag(e.name)})},n.getTagFromKeyboardEvent=function(e){var t,r=parseInt(e.key,10);if(isNaN(r))try{r=parseInt(e.key.split("+")[1],10)}catch(o){return}var a=n.props.project.tags;return 0===r&&a.length>=10?t=9:r<10&&(t=r-1),t<a.length?a[t]:null},n.handleTagHotKey=function(e){var t=n.getTagFromKeyboardEvent(e);t&&n.onTagClicked(t)},n.handleCtrlTagHotKey=function(e){var t=n.getTagFromKeyboardEvent(e);t&&n.onCtrlTagClicked(t)},n.onChildAssetSelected=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.selectedAsset||n.state.selectedAsset.asset.id===t.id){e.next=3;break}return e.next=3,n.selectAsset(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.isTaggableAssetType=function(e){return e.type!==S.c.Unknown&&e.type!==S.c.Video},n.onAssetMetadataChanged=function(){var e=Object(d.a)(p.a.mark(function e(t){var r,a,o,s,i,c,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.regions.filter(function(e){return 0===e.tags.length}).length>0)){e.next=4;break}return n.setState({isValid:!1}),e.abrupt("return");case 4:if(r=t.asset.state,a=Object(w.a)({},t.asset.parent||t.asset),n.isTaggableAssetType(t.asset)?t.asset.state=t.regions.length>0?S.b.Tagged:S.b.Visited:t.asset.state===S.b.NotVisited&&(t.asset.state=S.b.Visited),a.id!==t.asset.id){e.next=11;break}a.state=t.asset.state,e.next=19;break;case 11:return e.next=13,n.props.actions.loadAssetMetadata(n.props.project,a);case 13:if((o=e.sent).asset.state===S.b.Tagged){e.next=18;break}return o.asset.state=t.asset.state,e.next=18,n.props.actions.saveAssetMetadata(n.props.project,o);case 18:a.state=o.asset.state;case 19:if(r===t.asset.state&&n.state.selectedAsset===t){e.next=22;break}return e.next=22,n.props.actions.saveAssetMetadata(n.props.project,t);case 22:return e.next=24,n.props.actions.saveProject(n.props.project);case 24:s=new D.a(n.props.project),i=s.getChildAssets(a),c=Object(ie.a)(n.state.assets),(u=c.findIndex(function(e){return e.id===a.id}))>-1&&(c[u]=Object(w.a)({},a)),n.setState({childAssets:i,assets:c,isValid:!0});case 30:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onCanvasRendered=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.project.activeLearningSettings.autoDetect||n.state.selectedAsset.asset.predicted){e.next=3;break}return e.next=3,n.predictRegions(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onSelectedRegionsChanged=function(e){n.setState({selectedRegions:e})},n.onTagsChanged=function(){var e=Object(d.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(w.a)({},n.props.project,{tags:t}),e.next=3,n.props.actions.saveProject(r);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onLockedTagsChanged=function(e){n.setState({lockedTags:e})},n.onToolbarItemSelected=function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.props.name,e.next=e.t0===jt.a.DrawRectangle?3:e.t0===jt.a.DrawPolygon?5:e.t0===jt.a.CopyRectangle?7:e.t0===jt.a.SelectCanvas?9:e.t0===jt.a.PreviousAsset?11:e.t0===jt.a.NextAsset?14:e.t0===jt.a.CopyRegions?17:e.t0===jt.a.CutRegions?19:e.t0===jt.a.PasteRegions?21:e.t0===jt.a.RemoveAllRegions?23:e.t0===jt.a.ActiveLearning?25:28;break;case 3:return n.setState({selectionMode:bt.SelectionMode.RECT,editorMode:S.d.Rectangle}),e.abrupt("break",28);case 5:return n.setState({selectionMode:bt.SelectionMode.POLYGON,editorMode:S.d.Polygon}),e.abrupt("break",28);case 7:return n.setState({selectionMode:bt.SelectionMode.COPYRECT,editorMode:S.d.CopyRect}),e.abrupt("break",28);case 9:return n.setState({selectionMode:bt.SelectionMode.NONE,editorMode:S.d.Select}),e.abrupt("break",28);case 11:return e.next=13,n.goToRootAsset(-1);case 13:return e.abrupt("break",28);case 14:return e.next=16,n.goToRootAsset(1);case 16:return e.abrupt("break",28);case 17:return n.canvas.current.copyRegions(),e.abrupt("break",28);case 19:return n.canvas.current.cutRegions(),e.abrupt("break",28);case 21:return n.canvas.current.pasteRegions(),e.abrupt("break",28);case 23:return n.canvas.current.confirmRemoveAllRegions(),e.abrupt("break",28);case 25:return e.next=27,n.predictRegions();case 27:return e.abrupt("break",28);case 28:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.predictRegions=function(){var e=Object(d.a)(p.a.mark(function e(t){var r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||document.querySelector("canvas")){e.next=3;break}return e.abrupt("return");case 3:if(n.activeLearningService.isModelLoaded()){e.next=18;break}return r=null,e.prev=5,r=Ne.toast.info(j.c.activeLearning.messages.loadingModel,{autoClose:!1}),e.next=9,n.activeLearningService.ensureModelLoaded();case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),Ne.toast.error(j.c.activeLearning.messages.errorLoadModel),e.abrupt("return");case 15:return e.prev=15,Ne.toast.dismiss(r),e.finish(15);case 18:return e.prev=18,e.next=21,n.activeLearningService.predictRegions(t,n.state.selectedAsset);case 21:return a=e.sent,e.next=24,n.onAssetMetadataChanged(a);case 24:n.setState({selectedAsset:a}),e.next=30;break;case 27:throw e.prev=27,e.t1=e.catch(18),new S.a(S.e.ActiveLearningPredictionError,"Error predicting regions");case 30:case"end":return e.stop()}},e,this,[[5,11,15,18],[18,27]])}));return function(t){return e.apply(this,arguments)}}(),n.goToRootAsset=function(){var e=Object(d.a)(p.a.mark(function e(t){var r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.selectedAsset.asset.parent||n.state.selectedAsset.asset,a=n.state.assets.findIndex(function(e){return e.id===r.id}),!(t>0)){e.next=7;break}return e.next=5,n.selectAsset(n.state.assets[Math.min(n.state.assets.length-1,a+1)]);case 5:e.next=9;break;case 7:return e.next=9,n.selectAsset(n.state.assets[Math.max(0,a-1)]);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onBeforeAssetSelected=function(){return n.state.isValid||n.setState({showInvalidRegionWarning:!0}),n.state.isValid},n.selectAsset=function(){var e=Object(d.a)(p.a.mark(function e(t){var r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.selectedAsset||n.state.selectedAsset.asset.id!==t.id){e.next=2;break}return e.abrupt("return");case 2:if(n.state.isValid){e.next=5;break}return n.setState({showInvalidRegionWarning:!0}),e.abrupt("return");case 5:return e.next=7,n.props.actions.loadAssetMetadata(n.props.project,t);case 7:if(r=e.sent,e.prev=8,r.asset.size){e.next=14;break}return e.next=12,ke.a.readAssetAttributes(t);case 12:a=e.sent,r.asset.size={width:a.width,height:a.height};case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.warn("Error computing asset size");case 19:n.setState({selectedAsset:r},Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.onAssetMetadataChanged(r);case 2:case"end":return e.stop()}},e,this)})));case 20:case"end":return e.stop()}},e,this,[[8,16]])}));return function(t){return e.apply(this,arguments)}}(),n.loadProjectAssets=Object(d.a)(p.a.mark(function e(){var t,r,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.loadingProjectAssets||n.state.assets.length>0)){e.next=2;break}return e.abrupt("return");case 2:return n.loadingProjectAssets=!0,t=C.a.values(n.props.project.assets).filter(function(e){return!e.parent}),e.next=6,n.props.actions.loadAssets(n.props.project);case 6:r=e.sent,a=C()(t).concat(r).uniqBy(function(e){return e.id}).value(),o=a.find(function(e){return e.id===n.props.project.lastVisitedAssetId}),n.setState({assets:a},Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length>0)){e.next=3;break}return e.next=3,n.selectAsset(o||a[0]);case 3:n.loadingProjectAssets=!1;case 4:case"end":return e.stop()}},e,this)})));case 10:case"end":return e.stop()}},e,this)})),n.updateRootAssets=function(){var e=Object(ie.a)(n.state.assets);e.forEach(function(e){var t=n.props.project.assets[e.id];t&&(e.state=t.state)}),n.setState({assets:e})},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.projectId,!this.props.project){e.next=6;break}return e.next=4,this.loadProjectAssets();case 4:e.next=10;break;case 6:if(!t){e.next=10;break}return n=this.props.recentProjects.find(function(e){return e.id===t}),e.next=10,this.props.actions.loadProject(n);case 10:this.activeLearningService=new pn(this.props.project.activeLearningSettings);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.project||0!==this.state.assets.length){e.next=3;break}return e.next=3,this.loadProjectAssets();case 3:this.props.project&&!t.project&&this.setState({additionalSettings:{videoSettings:this.props.project?this.props.project.videoSettings:null,activeLearningSettings:this.props.project?this.props.project.activeLearningSettings:null}}),this.props.project&&t.project&&this.props.project.tags!==t.project.tags&&this.updateRootAssets();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.project,n=this.state,r=n.assets,a=n.selectedAsset,o=r.filter(function(e){return!e.parent});return t?i.a.createElement("div",{className:"editor-page"},Object(ie.a)(Array(10).keys()).map(function(t){return i.a.createElement(Ot.a,{displayName:j.c.editorPage.tags.hotKey.apply,key:t,keyEventType:kt.a.KeyDown,accelerators:["".concat(t)],icon:"fa-tag",handler:e.handleTagHotKey})}),Object(ie.a)(Array(10).keys()).map(function(t){return i.a.createElement(Ot.a,{displayName:j.c.editorPage.tags.hotKey.lock,key:t,keyEventType:kt.a.KeyDown,accelerators:["CmdOrCtrl+".concat(t)],icon:"fa-lock",handler:e.handleCtrlTagHotKey})}),i.a.createElement(vt.a,{split:"vertical",defaultSize:this.state.thumbnailSize.width,minSize:100,maxSize:400,paneStyle:{display:"flex"},onChange:this.onSideBarResize,onDragFinished:this.onSideBarResizeComplete},i.a.createElement("div",{className:"editor-page-sidebar bg-lighter-1"},i.a.createElement(Zt,{assets:o,selectedAsset:a?a.asset:null,onBeforeAssetSelected:this.onBeforeAssetSelected,onAssetSelected:this.selectAsset,thumbnailSize:this.state.thumbnailSize})),i.a.createElement("div",{className:"editor-page-content",onClick:this.onPageClick},i.a.createElement("div",{className:"editor-page-content-main"},i.a.createElement("div",{className:"editor-page-content-main-header"},i.a.createElement(tn,{project:this.props.project,items:this.toolbarItems,actions:this.props.actions,onToolbarItemSelected:this.onToolbarItemSelected})),i.a.createElement("div",{className:"editor-page-content-main-body"},a&&i.a.createElement(Yt,{ref:this.canvas,selectedAsset:this.state.selectedAsset,onAssetMetadataChanged:this.onAssetMetadataChanged,onCanvasRendered:this.onCanvasRendered,onSelectedRegionsChanged:this.onSelectedRegionsChanged,editorMode:this.state.editorMode,selectionMode:this.state.selectionMode,project:this.props.project,lockedTags:this.state.lockedTags},i.a.createElement(Ft,{additionalSettings:this.state.additionalSettings,autoPlay:!0,controlsEnabled:this.state.isValid,onBeforeAssetChanged:this.onBeforeAssetSelected,onChildAssetSelected:this.onChildAssetSelected,asset:this.state.selectedAsset.asset,childAssets:this.state.childAssets})))),i.a.createElement("div",{className:"editor-page-right-sidebar"},i.a.createElement(zt,{tags:this.props.project.tags,lockedTags:this.state.lockedTags,selectedRegions:this.state.selectedRegions,onChange:this.onTagsChanged,onLockedTagsChange:this.onLockedTagsChanged,onTagClick:this.onTagClicked,onCtrlTagClick:this.onCtrlTagClicked,onTagRenamed:this.confirmTagRenamed,onTagDeleted:this.confirmTagDeleted})),i.a.createElement(Oe,{title:j.c.editorPage.tags.rename.title,ref:this.renameTagConfirm,message:j.c.editorPage.tags.rename.confirmation,confirmButtonColor:"danger",onConfirm:this.onTagRenamed}),i.a.createElement(Oe,{title:j.c.editorPage.tags.delete.title,ref:this.deleteTagConfirm,message:j.c.editorPage.tags.delete.confirmation,confirmButtonColor:"danger",onConfirm:this.onTagDeleted}))),i.a.createElement(nn.a,{show:this.state.showInvalidRegionWarning,title:j.c.editorPage.messages.enforceTaggedRegions.title,message:j.c.editorPage.messages.enforceTaggedRegions.description,closeButtonColor:"info",onClose:function(){return e.setState({showInvalidRegionWarning:!1})}})):i.a.createElement("div",null,"Loading...")}}]),t}(i.a.Component))||Qt,gn=n(78);function mn(e){var t=C.a.values(F.a.providers),n=C()([]).concat(t).orderBy("displayName").value();return i.a.createElement("select",{id:e.id,className:"form-control",value:e.value,onChange:function(t){e.onChange(t.target.value)}},n.map(function(e){return i.a.createElement("option",{key:e.name,value:e.name},e.displayName)}))}!function(e){e.Equals="eq",e.GreaterThan="gt",e.LessThan="lt"}(dn||(dn={}));var hn,vn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={items:[]},n.onChange=function(e){var t=e.target;n.props.onChange(""===t.value?void 0:t.value)},n.bindExternalData=Object(d.a)(p.a.mark(function e(){var t,r,a,o,s,i,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.options,r={},(a=Object(j.b)(t.authHeaderValue,{props:n.props}))&&"undefined"!==a){e.next=5;break}return e.abrupt("return");case 5:return r[t.authHeaderName]=a,o={method:t.method,url:Object(j.b)(t.url,{props:n.props}),headers:r},e.prev=7,e.next=10,on.a.request(o);case 10:s=e.sent,i=s.data,t.filter&&(i=i.filter(function(e){return n.filterPredicate(e,t.filter)})),c=i.map(function(e){return{key:Object(j.b)(t.keySelector,{item:e}),value:Object(j.b)(t.valueSelector,{item:e})}}),n.setState({items:c}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(7),n.setState({items:[]}),n.props.onChange(void 0);case 21:case"end":return e.stop()}},e,this,[[7,17]])})),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("select",{id:this.props.id,className:"form-control",value:this.props.value,onChange:this.onChange},i.a.createElement("option",{value:""},"Select ",this.props.schema.title),this.state.items.map(function(e){return i.a.createElement("option",{key:e.key,value:e.key},e.value)}))}},{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bindExternalData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.formContext===this.props.formContext){e.next=3;break}return e.next=3,this.bindExternalData();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterPredicate",value:function(e,t){var n=Object(j.b)(t.left,{item:e,props:this.props}),r=Object(j.b)(t.right,{item:e,props:this.props});switch(t.operator){case dn.Equals:return n===r;case dn.GreaterThan:return n>r;case dn.LessThan:return n<r;default:throw new Error("Invalid filter operator")}}}]),t}(i.a.Component),bn=n(640),yn=(n(1176),function(e){function t(){return Object(f.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"slider"},i.a.createElement("span",{className:"slider-value"},this.props.value),i.a.createElement(bn.a,this.props))}}]),t}(i.a.Component)),jn=Object(j.a)(n(1178)),wn=Object(j.a)(n(1179)),xn=function(e){function t(){var e,r;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(r=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={classNames:["needs-validation"],providerName:r.props.settings?r.props.settings.providerType:null,formSchema:Object(w.a)({},jn),uiSchema:Object(w.a)({},wn),formData:r.props.settings},r.widgets={externalPicker:vn,exportProviderPicker:mn,protectedInput:Ye,slider:yn,checkbox:Ue(_e.a,function(e){return{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},disabled:e.disabled}})},r.onFormChange=function(e){e.formData.providerType!==r.state.providerName?r.bindForm(e.formData,!0):r.bindForm(e.formData,!1)},r.onFormValidate=function(e,t){return-1===r.state.classNames.indexOf("was-validated")&&r.setState({classNames:[].concat(Object(ie.a)(r.state.classNames),["was-validated"])}),t},r.onFormSubmit=function(e){r.props.onSubmit(e.formData)},r.onFormCancel=function(){r.props.onCancel&&r.props.onCancel()},r.bindForm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e&&e.providerType?e.providerType:F.a.defaultProvider.name,o=r.state.formSchema,s=r.state.uiSchema;if(a){var i=Object(j.a)(n(1180)("./".concat(a,".json"))),c=n(1187)("./".concat(a,".ui.json"));(o=Object(w.a)({},jn)).properties.providerOptions=i,(s=Object(w.a)({},wn)).providerOptions=c}var u=Object(w.a)({},e),l=t?{}:e.providerOptions,p=Object(gn.getDefaultFormState)(o.properties.providerOptions,l);u.providerType=a,u.providerOptions=p,r.setState({providerName:a,formSchema:o,uiSchema:s,formData:u})},r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.settings&&this.bindForm(this.props.settings)}},{key:"componentDidUpdate",value:function(e){e.settings!==this.props.settings&&this.bindForm(this.props.settings)}},{key:"render",value:function(){return i.a.createElement(Be.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,FieldTemplate:Me,validate:this.onFormValidate,widgets:this.widgets,formContext:this.state.formData,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.formData,onChange:this.onFormChange,onSubmit:this.onFormSubmit},i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-success mr-1",type:"submit"},j.c.export.saveSettings),i.a.createElement("button",{className:"btn btn-secondary btn-cancel",type:"button",onClick:this.onFormCancel},j.c.common.cancel)))}}]),t}(i.a.Component);var Cn,En=Object(b.b)(function(e){return{project:e.currentProject,recentProjects:e.recentProjects}},function(e){return{actions:Object(y.bindActionCreators)(r,e)}})(hn=function(e){function t(e,n){var r;Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).emptyExportFormat={providerType:"",providerOptions:{assetState:R.a.All}},r.onFormSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(w.a)({},r.props.project,{exportFormat:t}),e.next=3,r.props.actions.saveProject(n);case 3:Ne.toast.success(j.c.export.messages.saveSuccess),r.props.history.goBack();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();var a=r.props.match.params.projectId;if(!r.props.project&&a){var o=r.props.recentProjects.find(function(e){return e.id===a});r.props.actions.loadProject(o)}return r.onFormSubmit=r.onFormSubmit.bind(Object(be.a)(Object(be.a)(r))),r.onFormCancel=r.onFormCancel.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.project&&this.props.project.exportFormat?this.props.project.exportFormat:Object(w.a)({},this.emptyExportFormat);return i.a.createElement("div",{className:"m-3"},i.a.createElement("h3",null,i.a.createElement("i",{className:"fas fa-sliders-h fa-1x"}),i.a.createElement("span",{className:"px-2"},j.c.export.settings)),i.a.createElement("div",{className:"m-3"},i.a.createElement(xn,{settings:e,onSubmit:this.onFormSubmit,onCancel:this.onFormCancel})))}},{key:"onFormCancel",value:function(){this.props.history.goBack()}}]),t}(i.a.Component))||hn,On=n(389),kn=n(1402),Sn=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).onChange=function(e){var t=r.props.connections.find(function(t){return t.id===e.target.value})||{};r.setState({value:t},function(){return r.props.onChange(t)})},r.createConnection=function(){r.props.history.push("/connections/create")},r.state={value:r.props.value},r.onChange=r.onChange.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value||null})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections,r=this.state.value?this.state.value.id:"";return i.a.createElement("div",{className:"input-group"},i.a.createElement("select",{id:t,value:r,onChange:this.onChange,className:"form-control"},i.a.createElement("option",null,"Select Connection"),n.map(function(e){return i.a.createElement("option",{className:"connection-option",key:e.id,value:e.id},e.name)})),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-primary add-connection",type:"button",onClick:this.createConnection},"Add Connection")))}}]),t}(i.a.Component),Tn=Object(kn.a)(Sn),An=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChange=n.onChange.bind(Object(be.a)(Object(be.a)(n))),n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("select",{id:this.props.id,className:"form-control",value:this.props.value,onChange:this.onChange},i.a.createElement("option",{value:""},"Generate New Security Token"),this.props.securityTokens.map(function(e){return i.a.createElement("option",{key:e.key,value:e.name},e.name)}))}},{key:"onChange",value:function(e){var t=e.target;this.props.onChange(t.value?t.value:void 0)}}]),t}(i.a.Component),Fn=(n(1339),Object(j.a)(n(1341))),Nn=Object(j.a)(n(1342)),Pn=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e,n))).widgets={localFolderPicker:De},r.onFormChange=function(e){r.props.onChange&&r.props.onChange(e.formData)},r.state={classNames:["needs-validation"],uiSchema:Object(w.a)({},Nn),formSchema:Object(w.a)({},Fn),formData:Object(w.a)({},r.props.project)},r.tagsInput=i.a.createRef(),r.tagEditorModal=i.a.createRef(),r.onFormSubmit=r.onFormSubmit.bind(Object(be.a)(Object(be.a)(r))),r.onFormCancel=r.onFormCancel.bind(Object(be.a)(Object(be.a)(r))),r.onFormValidate=r.onFormValidate.bind(Object(be.a)(Object(be.a)(r))),r.onTagShiftClick=r.onTagShiftClick.bind(Object(be.a)(Object(be.a)(r))),r.onTagModalOk=r.onTagModalOk.bind(Object(be.a)(Object(be.a)(r))),r}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){e.project!==this.props.project&&this.setState({formData:Object(w.a)({},this.props.project)})}},{key:"render",value:function(){return i.a.createElement(Be.a,{className:this.state.classNames.join(" "),showErrorList:!1,liveValidate:!0,noHtml5Validate:!0,FieldTemplate:Me,validate:this.onFormValidate,fields:this.fields(),widgets:this.widgets,schema:this.state.formSchema,uiSchema:this.state.uiSchema,formData:this.state.formData,onChange:this.onFormChange,onSubmit:this.onFormSubmit},i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-success mr-1",type:"submit"},j.c.projectSettings.save),i.a.createElement("button",{className:"btn btn-secondary btn-cancel",type:"button",onClick:this.onFormCancel},j.c.common.cancel)),i.a.createElement(On.TagEditorModal,{ref:this.tagEditorModal,onOk:this.onTagModalOk,tagNameText:j.c.tags.modal.name,tagColorText:j.c.tags.modal.color,saveText:j.c.common.save,cancelText:j.c.common.cancel}))}},{key:"fields",value:function(){var e=this;return{securityToken:ze(An,function(t){return{id:t.idSchema.$id,schema:t.schema,value:t.formData,securityTokens:e.props.appSettings.securityTokens,onChange:t.onChange}}),sourceConnection:ze(Tn,function(t){return{id:t.idSchema.$id,value:t.formData,connections:e.props.connections,onChange:t.onChange}}),targetConnection:ze(Tn,function(t){var n=e.props.connections.filter(function(e){return k.a.isRegistered(e.providerType)});return{id:t.idSchema.$id,value:t.formData,connections:n,onChange:t.onChange}}),tagsInput:ze(On.TagsInput,function(t){return{tags:t.formData,onChange:t.onChange,placeHolder:j.c.tags.placeholder,onShiftTagClick:e.onTagShiftClick,ref:e.tagsInput}})}}},{key:"onTagShiftClick",value:function(e){this.tagEditorModal.current.open(e)}},{key:"onTagModalOk",value:function(e,t){this.tagsInput.current.updateTag(e,t),this.tagEditorModal.current.close()}},{key:"onFormValidate",value:function(e,t){return 0===Object.keys(e.sourceConnection).length&&t.sourceConnection.addError("is a required property"),0===Object.keys(e.targetConnection).length&&t.targetConnection.addError("is a required property"),-1===this.state.classNames.indexOf("was-validated")&&this.setState({classNames:[].concat(Object(ie.a)(this.state.classNames),["was-validated"])}),t}},{key:"onFormSubmit",value:function(e){var t=Object(w.a)({},e.formData);this.props.onSubmit(t)}},{key:"onFormCancel",value:function(){this.props.onCancel&&this.props.onCancel()}}]),t}(i.a.Component),Rn=(n(587),n(129)),Ln=(n(1353),n(1355),function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={loading:!0,hoveredCell:null,sourceAssets:[],projectAssetsMetadata:[]},n.refresh=function(){n.forceUpdate()},n.getTaggedAssetCount=function(){var e=n.state.projectAssetsMetadata;return C.a.filter(e,function(e){return e.asset.state===S.b.Tagged&&e.regions.length>0}).length},n.getAverageTagCount=function(){var e=n.getTaggedAssetCount();return 0===e?0:(n.getAllTagReferences().length/e).toFixed(2)},n.getVisitedAssetsCount=function(){var e=n.state.projectAssetsMetadata;return C.a.filter(e,function(e){return e.asset.state===S.b.Visited||e.asset.state===S.b.Tagged}).length},n.getRegionsCount=function(){return n.getRegions().length},n.getSourceAssetCount=function(){var e=n.state.projectAssetsMetadata.map(function(e){return e.asset.name});return new Set(n.state.sourceAssets.map(function(e){return e.name}).concat(e)).size},n.getTagsCounts=function(){var e=C.a.keyBy(n.props.project.tags,function(e){return e.name}),t=n.getAllTagReferences(),r=new Map;return t.forEach(function(t){var n=e[t];if(n){var a=r.get(t)||{tag:n,count:0};a.count++,r.set(t,a)}}),n.props.project.tags.forEach(function(e){r.get(e.name)||r.set(e.name,{tag:e,count:0})}),r},n.getRegions=function(){var e=n.state.projectAssetsMetadata,t=[];return e.forEach(function(e){e.regions.length>0&&t.push(e.regions)}),C.a.flatten(t)},n.getAllTagReferences=function(){var e=n.getRegions(),t=[];return e.forEach(function(e){t.push(e.tags)}),C.a.flatten(t)},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.getAssetsAndMetadata();case 3:window.addEventListener("resize",this.refresh);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.refresh)}},{key:"render",value:function(){return i.a.createElement("div",{className:"condensed-list"},i.a.createElement("h6",{className:"condensed-list-header bg-darker-2 p-2"},i.a.createElement("i",{className:"fas fa-chart-bar"}),i.a.createElement("span",null,j.c.projectMetrics.title)),i.a.createElement("div",{className:"condensed-list-body"},this.state.loading&&i.a.createElement("div",{className:"loading"},i.a.createElement("i",{className:"fas fa-circle-notch fa-spin fa-2x"})),!this.state.loading&&this.renderMetrics()))}},{key:"buildValue",value:function(e){var t=e.radius,n=(e.angle+e.angle0)/2;return{x:t*Math.cos(n),y:t*Math.sin(n)}}},{key:"renderMetrics",value:function(){var e=this,t=this.getSourceAssetCount(),n=this.getTaggedAssetCount(),r=this.getVisitedAssetsCount(),a=window.innerWidth>=1920?250:200,o={animation:!0,title:"asset-count",children:[{title:Object(j.b)(j.c.projectMetrics.visitedAssets,{count:r}),children:[{title:Object(j.b)(j.c.projectMetrics.taggedAssets,{count:n}),bigness:1,children:[],clr:"#70c400",size:n,dontRotateLabel:!0},{bigness:1,children:[],clr:"#ff8c00",title:Object(j.b)(j.c.projectMetrics.nonTaggedAssets,{count:r-n}),size:r-n,dontRotateLabel:!0}],clr:"#4894fe",dontRotateLabel:!0},{title:Object(j.b)(j.c.projectMetrics.nonVisitedAssets,{count:t-r}),bigness:1,children:[],clr:"#e81123",dontRotateLabel:!0,labelStyle:{fontSize:15,fontWeight:"bold"},size:t-r}]},s=[];this.getTagsCounts().forEach(function(e){s.push({x:e.tag.name,y:e.count,color:e.tag.color})});var c=this.state.hoveredCell,u=[{title:Object(j.b)(j.c.projectMetrics.visitedAssets,{count:r}),color:"#4894fe"},{title:Object(j.b)(j.c.projectMetrics.nonVisitedAssets,{count:t-r}),color:"#e81123"},{title:Object(j.b)(j.c.projectMetrics.taggedAssets,{count:n}),color:"#70c400"},{title:Object(j.b)(j.c.projectMetrics.nonTaggedAssets,{count:r-n}),color:"#ff8c00"}];return i.a.createElement("div",{className:"m-3"},i.a.createElement("h4",null,j.c.projectMetrics.assetsSectionTitle),i.a.createElement("p",{className:"my-1"},j.c.projectMetrics.totalAssetCount,":",i.a.createElement("strong",{className:"px-1 metric-total-asset-count"},t),i.a.createElement("br",null)),i.a.createElement("div",{className:"asset-chart"},i.a.createElement(Rn.d,{data:o,style:{stroke:"#fff"},onValueMouseOver:function(t){return e.setState({hoveredCell:t.x&&t.y?t:null})},onValueMouseOut:function(t){return e.setState({hoveredCell:null})},height:a,margin:{top:50,bottom:50,left:50,right:50},getLabel:function(e){return e.name},getSize:function(e){return e.size},getColor:function(e){return e.clr},width:a,padAngle:function(){return.05},hideRootNode:!0},c?i.a.createElement(Rn.b,{value:this.buildValue(c)},i.a.createElement("div",{className:"hint-content"},i.a.createElement("div",{className:"hint-content-box",style:{background:c.clr}}),i.a.createElement("span",{className:"px-2"},c.title))):null),i.a.createElement(Rn.a,{items:u})),i.a.createElement("div",{className:"my-4"},i.a.createElement("h4",null,j.c.projectMetrics.tagsSectionTitle),i.a.createElement("p",{className:"my-1"},j.c.projectMetrics.totalTagCount,":",i.a.createElement("strong",{className:"px-1 metric-total-tag-count"},this.props.project.tags.length)),i.a.createElement("p",{className:"my-1"},j.c.projectMetrics.totalRegionCount,":",i.a.createElement("strong",{className:"px-1 metric-total-region-count"},this.getRegionsCount())),i.a.createElement("p",{className:"my-1"},j.c.projectMetrics.avgTagCountPerAsset,":",i.a.createElement("strong",{className:"px-1 metric-avg-tag-count"},this.getAverageTagCount())),i.a.createElement(Rn.g,{className:"tag-chart",margin:{bottom:150},xType:"ordinal",colorType:"literal",width:300,height:400},i.a.createElement(Rn.c,null),i.a.createElement(Rn.f,{tickLabelAngle:-45}),i.a.createElement(Rn.h,null),i.a.createElement(Rn.e,{data:s}))))}},{key:"getAssetsAndMetadata",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,r,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new D.a(this.props.project),e.next=3,t.getAssets();case 3:return n=e.sent,r=this.props.project.assets,a=C.a.values(r),e.next=8,a.mapAsync(function(e){return t.getAssetMetadata(e)});case 8:o=e.sent,this.setState({loading:!1,sourceAssets:n,projectAssetsMetadata:o});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(i.a.Component));var Bn="projectForm",Mn=Object(b.b)(function(e){return{project:e.currentProject,connections:e.connections,recentProjects:e.recentProjects,appSettings:e.appSettings}},function(e){return{projectActions:Object(y.bindActionCreators)(r,e),applicationActions:Object(y.bindActionCreators)(a,e)}})(Cn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={project:n.props.project},n.onFormChange=function(e){n.isPartialProject(e)&&localStorage.setItem(Bn,JSON.stringify(e))},n.onFormSubmit=function(){var e=Object(d.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!t.id,e.next=3,n.props.applicationActions.ensureSecurityToken(t);case 3:return e.next=5,n.props.projectActions.saveProject(t);case 5:localStorage.removeItem(Bn),Ne.toast.success(Object(j.b)(j.c.projectSettings.messages.saveSuccess,{project:t})),r?n.props.history.push("/projects/".concat(n.props.project.id,"/edit")):n.props.history.goBack();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onFormCancel=function(){localStorage.removeItem(Bn),n.props.history.goBack()},n.isPartialProject=function(e){return e&&!e.id&&(!!e.name||!!e.description||e.sourceConnection&&Object.keys(e.sourceConnection).length>0||e.targetConnection&&Object.keys(e.targetConnection).length>0||e.exportFormat&&Object.keys(e.exportFormat).length>0||e.tags&&e.tags.length>0)},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.projectId,"/projects/create"!==this.props.match.url){e.next=6;break}(n=localStorage.getItem(Bn))&&this.setState({project:JSON.parse(n)}),e.next=13;break;case 6:if(this.props.project||!t){e.next=13;break}if(!(r=this.props.recentProjects.find(function(e){return e.id===t}))){e.next=13;break}return e.next=11,this.props.applicationActions.ensureSecurityToken(r);case 11:return e.next=13,this.props.projectActions.loadProject(r);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.project!==this.props.project&&this.setState({project:this.props.project})}},{key:"render",value:function(){return i.a.createElement("div",{className:"project-settings-page"},i.a.createElement("div",{className:"project-settings-page-settings m-3"},i.a.createElement("h3",null,i.a.createElement("i",{className:"fas fa-sliders-h"}),i.a.createElement("span",{className:"px-2"},j.c.projectSettings.title)),i.a.createElement("div",{className:"m-3"},i.a.createElement(Pn,{project:this.state.project,connections:this.props.connections,appSettings:this.props.appSettings,onChange:this.onFormChange,onSubmit:this.onFormSubmit,onCancel:this.onFormCancel}))),this.props.project&&i.a.createElement("div",{className:"project-settings-page-metrics bg-lighter-1"},i.a.createElement(Ln,{project:this.props.project})))}}]),t}(i.a.Component))||Cn;function In(){return i.a.createElement("div",{className:"app-content text-light"},i.a.createElement(c.a,null,i.a.createElement(u.a,{path:"/",exact:!0,component:Re}),i.a.createElement(u.a,{path:"/settings",component:et}),i.a.createElement(u.a,{path:"/connections/:connectionId",component:ht}),i.a.createElement(u.a,{path:"/connections",exact:!0,component:ht}),i.a.createElement(u.a,{path:"/projects/:projectId/edit",component:fn}),i.a.createElement(u.a,{path:"/projects/create",component:Mn}),i.a.createElement(u.a,{path:"/projects/:projectId/settings",component:Mn}),i.a.createElement(u.a,{path:"/projects/:projectId/export",component:En}),i.a.createElement(u.a,{path:"/projects/:projectId/active-learning",component:Ke}),i.a.createElement(u.a,{component:Re})))}n.d(t,"a",function(){return In})},64:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(15),a=n(4),o=n.n(a),s=n(8),i=n(11),c=n(12),u=n(216),l=n.n(u),p=n(34),d=n.n(p),f=n(68),g=n(17),m=n(14),h=n(106),v=n(72),b=n(112),y=n(53),j=n(177),w=n(33),x=n(125),C=n(92),E=function(){function t(e){Object(i.a)(this,t),this.project=e,g.a.null(e)}return Object(c.a)(t,null,[{key:"createAssetFromFilePath",value:function(e,t){g.a.empty(e);var n=e.toLowerCase();n.startsWith("http://")||n.startsWith("https://")||n.startsWith("file:")||(e=Object(C.c)(e,!0));var r=(new l.a).update(e).digest("hex"),a=e.split(/[\\\/]/),o=(t=t||a[a.length-1]).split("."),s=o[o.length-1].split(/[\?#]/)[0],i=this.getAssetType(s);return{id:r,format:s,state:m.b.NotVisited,type:i,name:t,path:e,size:null}}},{key:"getAssetType",value:function(e){switch(e.toLowerCase()){case"gif":case"jpg":case"jpeg":case"tif":case"tiff":case"png":case"bmp":return m.c.Image;case"mp4":case"mov":case"avi":case"m4v":case"mpg":case"wmv":return m.c.Video;case"tfrecord":return m.c.TFRecord;default:return m.c.Unknown}}}]),Object(c.a)(t,[{key:"getAssets",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assetProvider.getAssets();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getChildAssets",value:function(e){return g.a.null(e),e.type!==m.c.Video?[]:d.a.values(this.project.assets).filter(function(t){return t.parent&&t.parent.id===e.id}).sort(function(e,t){return e.timestamp-t.timestamp})}},{key:"save",value:function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.a.null(t),n="".concat(t.asset.id).concat(b.a.assetMetadataFileExtension),t.asset.state!==m.b.Tagged){e.next=7;break}return e.next=5,this.storageProvider.writeText(n,JSON.stringify(t,null,4));case 5:e.next=14;break;case 7:return e.prev=7,e.next=10,this.storageProvider.deleteFile(n);case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(7);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},e,this,[[7,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetMetadata",value:function(){var e=Object(s.a)(o.a.mark(function e(t){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.a.null(t),n="".concat(t.id).concat(b.a.assetMetadataFileExtension),e.prev=2,e.next=5,this.storageProvider.readText(n);case 5:return a=e.sent,e.abrupt("return",JSON.parse(a));case 9:if(e.prev=9,e.t0=e.catch(2),t.type!==m.c.TFRecord){e.next=20;break}return e.t1=Object(r.a)({},t),e.next=15,this.getRegionsFromTFRecord(t);case 15:return e.t2=e.sent,e.t3=x.a.version,e.abrupt("return",{asset:e.t1,regions:e.t2,version:e.t3});case 20:return e.abrupt("return",{asset:Object(r.a)({},t),regions:[],version:x.a.version});case 21:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTag",value:function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return e.filter(function(e){return e!==t})},e.next=3,this.getUpdatedAssets(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renameTag",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return e.map(function(e){return e===t?n:e})},e.next=3,this.getUpdatedAssets(t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUpdatedAssets",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var r,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.values(this.project.assets).mapAsync(function(){var e=Object(s.a)(o.a.mark(function e(r){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAssetMetadata(r);case 2:return s=e.sent,i=a.updateTagInAssetMetadata(s,t,n),e.abrupt("return",i?s:null);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:return r=e.sent,e.abrupt("return",r.filter(function(e){return!!e}));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTagInAssetMetadata",value:function(e,t,n){var r=!1,a=!0,o=!1,s=void 0;try{for(var i,c=e.regions[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var u=i.value;u.tags.find(function(e){return e===t})&&(r=!0,u.tags=n(u.tags))}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return!!r&&(e.regions=e.regions.filter(function(e){return e.tags.length>0}),e.asset.state=e.regions.length?m.b.Tagged:m.b.Visited,!0)}},{key:"getRegionsFromTFRecord",value:function(){var e=Object(s.a)(o.a.mark(function e(t){var n,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTFRecordMetadata(t);case 2:for(n=e.sent,r=[],a=0;a<n.textArray.length;a++)r.push({id:f.generate(),type:m.g.Rectangle,tags:[n.textArray[a]],boundingBox:{left:n.xminArray[a]*n.width,top:n.yminArray[a]*n.height,width:(n.xmaxArray[a]-n.xminArray[a])*n.width,height:(n.ymaxArray[a]-n.yminArray[a])*n.height},points:[{x:n.xminArray[a]*n.width,y:n.yminArray[a]*n.height},{x:n.xmaxArray[a]*n.width,y:n.ymaxArray[a]*n.height}]});return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTFRecordMetadata",value:function(){var t=Object(s.a)(o.a.mark(function t(n){var r,a,s,i,c,u,l,p,d;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,y.a.getAssetArray(n);case 3:return t.t1=t.sent,r=new t.t0(t.t1),a=new j.a(r),s=a.getFeature(0,"image/width",w.a.Int64),i=a.getFeature(0,"image/height",w.a.Int64),c=a.getArrayFeature(0,"image/object/bbox/xmin",w.a.Float),u=a.getArrayFeature(0,"image/object/bbox/ymin",w.a.Float),l=a.getArrayFeature(0,"image/object/bbox/xmax",w.a.Float),p=a.getArrayFeature(0,"image/object/bbox/ymax",w.a.Float),d=a.getArrayFeature(0,"image/object/class/text",w.a.String),t.abrupt("return",{width:s,height:i,xminArray:c,yminArray:u,xmaxArray:l,ymaxArray:p,textArray:d});case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"assetProvider",get:function(){if(!this.assetProviderInstance)return this.assetProviderInstance=h.a.create(this.project.sourceConnection.providerType,this.project.sourceConnection.providerOptions),this.assetProviderInstance}},{key:"storageProvider",get:function(){return this.storageProviderInstance||(this.storageProviderInstance=v.a.create(this.project.targetConnection.providerType,this.project.targetConnection.providerOptions)),this.storageProviderInstance}}]),t}()}).call(this,n(39).Buffer)},643:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(1401),s=n(642);function i(e){var t=e.to,n=e.disabled,r=Object(s.a)(e,["to","disabled"]);return n?a.a.createElement("span",{className:"disabled",title:r.title},r.children):a.a.createElement(o.a,{title:r.title,to:t},r.children)}var c=n(7);function u(e){var t=e.project,n=t?t.id:null;return a.a.createElement("div",{className:"bg-lighter-2 app-sidebar"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(o.a,{title:"Home",to:"/"},a.a.createElement("i",{className:"fas fa-home"}))),a.a.createElement("li",null,a.a.createElement(i,{disabled:!n,title:c.c.tags.editor,to:"/projects/".concat(n,"/edit")},a.a.createElement("i",{className:"fas fa-bookmark"}))),a.a.createElement("li",null,a.a.createElement(i,{disabled:!n,title:c.c.projectSettings.title,to:"/projects/".concat(n,"/settings")},a.a.createElement("i",{className:"fas fa-sliders-h"}))),a.a.createElement("li",null,a.a.createElement(i,{disabled:!n,title:c.c.export.title,to:"/projects/".concat(n,"/export")},a.a.createElement("i",{className:"fas fa-external-link-square-alt"}))),a.a.createElement("li",null,a.a.createElement(i,{disabled:!n,title:c.c.activeLearning.title,to:"/projects/".concat(n,"/active-learning")},a.a.createElement("i",{className:"fas fa-graduation-cap"}))),a.a.createElement("li",null,a.a.createElement(o.a,{title:c.c.connections.title,to:"/connections"},a.a.createElement("i",{className:"fas fa-plug"})))),a.a.createElement("div",{className:"app-sidebar-fill"}),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(o.a,{title:c.c.appSettings.title,to:"/settings"},a.a.createElement("i",{className:"fas fa-cog"})))))}n.d(t,"a",function(){return u})},644:function(e,t,n){e.exports=n(1385)},65:function(e,t,n){"use strict";function r(e){return function(){return{type:e}}}function a(e){return function(t){return{type:e,payload:t}}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});r(n(30).a.ANY_OTHER_ACTION)},657:function(e,t,n){},659:function(e,t,n){},66:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return g});var r,a=n(11),o=n(12),s=n(20),i=n(18),c=n(19),u=n(16),l=n(1),p=n.n(l),d=n(86),f=n(126);!function(e){e[e.Action=0]="Action",e[e.State=1]="State"}(r||(r={}));var g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).getTitle=function(){return"".concat(n.props.tooltip).concat(n.getShortcut())},n.getShortcut=function(){return" (".concat(n.consolidateKeyCasings(n.props.accelerators).join(", "),")")},n.consolidateKeyCasings=function(e){var t=[];if(e){var n=!0,r=!1,a=void 0;try{for(var o,s=function(){var e=o.value;t.find(function(t){return t.toLowerCase()===e.toLowerCase()})||t.push(e)},i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)s()}catch(c){r=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}return t},n.onClick=function(e){e.stopPropagation(),n.onItemClick&&n.onItemClick(),n.props.onClick(Object(u.a)(Object(u.a)(n)))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.unregisterKeyboardHandler&&this.unregisterKeyboardHandler()}},{key:"render",value:function(){var e=["toolbar-btn ".concat(this.props.name)];this.props.active&&e.push("active");var t=this.props.accelerators;return p.a.createElement(l.Fragment,null,t&&p.a.createElement(f.a,{displayName:this.props.tooltip,accelerators:t,handler:this.onClick,icon:this.props.icon,keyEventType:d.a.KeyDown}),p.a.createElement("button",{type:"button",className:e.join(" "),title:this.getTitle(),onClick:this.onClick},p.a.createElement("i",{className:"fas "+this.props.icon})))}}]),t}(p.a.Component);g.contextType=d.b},7:function(e,t,n){"use strict";var r=n(268),a=n(28),o=n(608),s=n.n(o);n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var i=new s.a({en:{appName:"Visual Object Tagging Tool",common:{displayName:"Display Name",description:"Description",submit:"Submit",cancel:"Cancel",save:"Save",delete:"Delete",provider:"Provider",homePage:"Home Page"},titleBar:{help:"Help",minimize:"Minimize",maximize:"Maximize",restore:"Restore",close:"Close"},homePage:{newProject:"New Project",openLocalProject:{title:"Open Local Project"},openCloudProject:{title:"Open Cloud Project",selectConnection:"Select a Connection"},recentProjects:"Recent Projects",deleteProject:{title:"Delete Project",confirmation:"Are you sure you want to delete project"},importProject:{title:"Import Project",confirmation:"Are you sure you want to convert project ${project.file.name} project settings to v2 format? We recommend you backup the project file first."},messages:{deleteSuccess:"Successfully deleted ${project.name}"}},appSettings:{title:"Application Settings",storageTitle:"Storage Settings",uiHelp:"Where your settings are stored",save:"Save Settings",securityToken:{name:{title:"Name"},key:{title:"Key"}},securityTokens:{title:"Security Tokens",description:"Security tokens are used to encrypt sensitive data within your project configuration"},version:{description:"Version:"},commit:"Commit SHA",devTools:{description:"Open application developer tools to help diagnose issues",button:"Toggle Developer Tools"},reload:{description:"Reload the app discarding all current changes",button:"Refresh Application"},messages:{saveSuccess:"Successfully saved application settings"}},projectSettings:{title:"Project Settings",securityToken:{title:"Security Token",description:"Used to encrypt sensitive data within project files"},save:"Save Project",sourceConnection:{title:"Source Connection",description:"Where to load assets from"},targetConnection:{title:"Target Connection",description:"Where to save the project and exported data"},videoSettings:{title:"Video Settings",description:"The rate at which frames are extracted for tagging.",frameExtractionRate:"Frame Extraction Rate (frames per a video second)"},addConnection:"Add Connection",messages:{saveSuccess:"Successfully saved ${project.name} project settings"}},projectMetrics:{title:"Project Metrics",assetsSectionTitle:"Assets",totalAssetCount:"Total Assets",visitedAssets:"Visited Assets (${count})",taggedAssets:"Tagged Assets (${count})",nonTaggedAssets:"Not Tagged Assets (${count})",nonVisitedAssets:"Not Visited Assets (${count})",tagsSectionTitle:"Tags & Labels",totalRegionCount:"Total Tagged Regions",totalTagCount:"Total Tags",avgTagCountPerAsset:"Average tags per asset"},tags:{title:"Tags",placeholder:"Add new tag",editor:"Tags Editor",modal:{name:"Tag Name",color:"Tag Color"},colors:{white:"White",gray:"Gray",red:"Red",maroon:"Maroon",yellow:"Yellow",olive:"Olive",lime:"Lime",green:"Green",aqua:"Aqua",teal:"Teal",blue:"Blue",navy:"Navy",fuschia:"Fuschia",purple:"Purple"},warnings:{existingName:"Tag name already exists. Choose another name",emptyName:"Cannot have an empty tag name",unknownTagName:"Unknown"},toolbar:{add:"Add new tag",search:"Search tags",edit:"Edit tag",lock:"Lock tag",moveUp:"Move tag up",moveDown:"Move tag down",delete:"Delete tag"}},connections:{title:"Connections",details:"Connection Details",settings:"Connection Settings",instructions:"Please select a connection to edit",save:"Save Connection",messages:{saveSuccess:"Successfully saved ${connection.name}",deleteSuccess:"Successfully deleted ${connection.name}"},imageCorsWarning:"Warning: When using VoTT in a Web browser, some assets from Bing Image                           Search may not export correctly due to CORS (Cross Origin Resource Sharing) restrictions.",blobCorsWarning:"Warning: CORS (Cross Domain Resource Sharing) must be enabled on the Azure Blob Storage                           account, in order to use it as a source or target connection. More information on                           enabling CORS can be found in the {0}",azDocLinkText:"Azure Documentation.",providers:{azureBlob:{title:"Azure Blob Storage",description:"",accountName:{title:"Account Name",description:""},containerName:{title:"Container Name",description:""},sas:{title:"SAS",description:"Shared access signature used to authenticate to the blob storage account"},createContainer:{title:"Create Container",description:"Creates the blob container if it does not already exist"}},bing:{title:"Bing Image Search",options:"Bing Image Search Options",apiKey:"API Key",query:"Query",aspectRatio:{title:"Aspect Ratio",all:"All",square:"Square",wide:"Wide",tall:"Tall"}},local:{title:"Local File System",folderPath:"Folder Path",selectFolder:"Select Folder",chooseFolder:"Choose Folder"}}},editorPage:{width:"Width",height:"Height",tagged:"Tagged",visited:"Visited",toolbar:{select:"Select (V)",pan:"Pan",drawRectangle:"Draw Rectangle",drawPolygon:"Draw Polygon",copyRectangle:"Copy Rectangle",copy:"Copy Regions",cut:"Cut Regions",paste:"Paste Regions",removeAllRegions:"Remove All Regions",previousAsset:"Previous Asset",nextAsset:"Next Asset",saveProject:"Save Project",exportProject:"Export Project",activeLearning:"Active Learning"},videoPlayer:{previousTaggedFrame:{tooltip:"Previous Tagged Frame"},nextTaggedFrame:{tooltip:"Next Tagged Frame"},previousExpectedFrame:{tooltip:"Previous Frame"},nextExpectedFrame:{tooltip:"Next Frame"}},help:{title:"Toggle Help Menu",escape:"Escape Help Menu"},assetError:"Unable to load asset",tags:{hotKey:{apply:"Apply Tag with Hot Key",lock:"Lock Tag with Hot Key"},rename:{title:"Rename Tag",confirmation:"Are you sure you want to rename this tag? It will be renamed throughout all assets"},delete:{title:"Delete Tag",confirmation:"Are you sure you want to delete this tag? It will be deleted throughout all assets                 and any regions where this is the only tag will also be deleted"}},canvas:{removeAllRegions:{title:"Remove All Regions",confirmation:"Are you sure you want to remove all regions?"}},messages:{enforceTaggedRegions:{title:"Invalid region(s) detected",description:"1 or more regions have not been tagged.  Ensure all regions are tagged before                     continuing to next asset."}}},export:{title:"Export",settings:"Export Settings",saveSettings:"Save Export Settings",providers:{common:{properties:{assetState:{title:"Asset State",description:"Which assets to include in the export",options:{all:"All Assets",visited:"Only Visited Assets",tagged:"Only tagged Assets"}},testTrainSplit:{title:"Test / Train Split",description:"The test train split to use for exported data"},includeImages:{title:"Include Images",description:"Whether or not to include binary image assets in target connection"}}},vottJson:{displayName:"VoTT JSON"},azureCV:{displayName:"Azure Custom Vision Service",regions:{australiaEast:"Australia East",centralIndia:"Central India",eastUs:"East US",eastUs2:"East US 2",japanEast:"Japan East",northCentralUs:"North Central US",northEurope:"North Europe",southCentralUs:"South Central US",southeastAsia:"Southeast Asia",ukSouth:"UK South",westUs2:"West US 2",westEurope:"West Europe"},properties:{apiKey:{title:"API Key"},region:{title:"Region",description:"The Azure region where your service is deployed"},classificationType:{title:"Classification Type",options:{multiLabel:"Multiple tags per image",multiClass:"Single tag per image"}},name:{title:"Project Name"},description:{title:"Project Description"},domainId:{title:"Domain"},newOrExisting:{title:"New or Existing Project",options:{new:"New Project",existing:"Existing Project"}},projectId:{title:"Project Name"},projectType:{title:"Project Type",options:{classification:"Classification",objectDetection:"Object Detection"}}}},tfRecords:{displayName:"Tensorflow Records"},pascalVoc:{displayName:"Pascal VOC",exportUnassigned:{title:"Export Unassigned",description:"Whether or not to include unassigned tags in exported data"}},cntk:{displayName:"Microsoft Cognitive Toolkit (CNTK)"},csv:{displayName:"Comma Separated Values (CSV)"}},messages:{saveSuccess:"Successfully saved export settings"}},activeLearning:{title:"Active Learning",form:{properties:{modelPathType:{title:"Model Provider",description:"Where to load the training model from",options:{preTrained:"Pre-trained Coco SSD",customFilePath:"Custom (File path)",customWebUrl:"Custom (Url)"}},autoDetect:{title:"Auto Detect",description:"Whether or not to automatically make predictions as you navigate between assets"},modelPath:{title:"Model path",description:"Select a model from your local file system"},modelUrl:{title:"Model URL",description:"Load your model from a public web URL"},predictTag:{title:"Predict Tag",description:"Whether or not to automatically include tags in predictions"}}},messages:{loadingModel:"Loading active learning model...",errorLoadModel:"Error loading active learning model",saveSuccess:"Successfully saved active learning settings"}},profile:{settings:"Profile Settings"},errors:{unknown:{title:"Unknown Error",message:"The app encountered an unknown error. Please try again."},projectUploadError:{title:"Error Uploading File",message:"There was an error uploading the file.\n                Please verify the file is of the correct format and try again."},genericRenderError:{title:"Error Loading Application",message:"An error occured while rendering the application. Please try again"},projectInvalidSecurityToken:{title:"Error loading project file",message:"The security token referenced by the project is invalid.\n                Verify that the security token for the project has been set correctly within your application settings"},projectInvalidJson:{title:"Error parsing project file",message:"The selected project files does not contain valid JSON. Please check the file any try again."},projectDeleteError:{title:"Error deleting project",message:"An error occured while deleting the project.\n                Validate the project file and security token exist and try again"},securityTokenNotFound:{title:"Error loading project file",message:"The security token referenced by the project cannot be found in your current application settings.\n                Verify the security token exists and try to reload the project."},canvasError:{title:"Error loading canvas",message:"There was an error loading the canvas, check the project's assets and try again."},importError:{title:"Error importing V1 project",message:"There was an error importing the V1 project. Check the project file and try again"},pasteRegionTooBigError:{title:"Error pasting region",message:"Region too big for this asset. Try copying another region"},exportFormatNotFound:{title:"Error exporting project",message:"Project is missing export format.  Please select an export format in the export setting page."},activeLearningPredictionError:{title:"Active Learning Error",message:"An error occurred while predicting regions in the current asset.                 Please verify your active learning configuration and try again"}}},es:{appName:"Herramienta Visual de Etiquetado de Objetos",common:{displayName:"Nombre para Mostrar",description:"Descripci\xf3n",submit:"Enviar",cancel:"Cancelar",save:"Guardar",delete:"Borrar",provider:"Proveedor",homePage:"P\xe1gina de Inicio"},titleBar:{help:"Ayuda",minimize:"Minimizar",maximize:"Maximizar",restore:"Restaurar",close:"Cerrar"},homePage:{newProject:"Nuevo Proyecto",recentProjects:"Proyectos Recientes",openLocalProject:{title:"Abrir Proyecto Local"},openCloudProject:{title:"Abrir Proyecto de la Nube",selectConnection:"Select a Connection"},deleteProject:{title:"Borrar Proyecto",confirmation:"\xbfEst\xe1 seguro que quiere borrar el proyecto"},importProject:{title:"Importar Proyecto",confirmation:"\xbfEst\xe1 seguro que quiere convertir el proyecto ${project.file.name} a formato v2? Le recomendamos que haga una copia de seguridad de su archivo de proyecto."},messages:{deleteSuccess:"${project.name} eliminado correctamente"}},appSettings:{title:"Configuraci\xf3n de Aplicaci\xf3n",storageTitle:"Configuraci\xf3n de Almacenamiento",uiHelp:"Donde se guardan sus configuraciones",save:"Guardar configuraci\xf3n",securityToken:{name:{title:"Nombre"},key:{title:"Clave"}},securityTokens:{title:"Tokens de seguridad",description:"Los tokens de seguridad se utilizan para cifrar datos confidenciales                 dentro de la configuraci\xf3n del proyecto"},version:{description:"Versi\xf3n:"},commit:"Cometer SHA",devTools:{description:"Abrir herramientas de desarrollo de aplicaciones para ayudar a diagnosticar problemas.",button:"Alternar Herramientas de Desarrollo"},reload:{description:"Recargar la aplicaci\xf3n descartando todos los cambios actuales",button:"Recargar la aplicaci\xf3n"},messages:{saveSuccess:"Configuraci\xf3n de la aplicaci\xf3n guardada correctamente"}},projectSettings:{title:"Configuraci\xf3n de Proyecto",securityToken:{title:"Token de seguridad",description:"Se utiliza para cifrar datos confidenciales dentro de archivos de proyecto"},save:"Guardar el Proyecto",sourceConnection:{title:"Conexi\xf3n de Origen",description:"De donde se gargan sus activos"},targetConnection:{title:"Conexi\xf3n de Destino",description:"Donde se guarda su proyecto y sus datos exportados"},videoSettings:{title:"Ajustes de video",description:"La velocidad a la que se extraen los marcos para el etiquetado.",frameExtractionRate:"Tasa de extracci\xf3n de cuadros (cuadros por segundo de video)"},addConnection:"Agregar Conexi\xf3n",messages:{saveSuccess:"Guardado correctamente ${project.name} configuraci\xf3n del proyecto"}},projectMetrics:{title:"M\xe9tricas del proyecto",assetsSectionTitle:"Activos",totalAssetCount:"Total de activos",visitedAssets:"Activos visitados (${count})",taggedAssets:"Activos etiquetados (${count})",nonTaggedAssets:"Activos no etiquetados (${count})",nonVisitedAssets:"Activos no visitados (${count})",tagsSectionTitle:"Etiquetas & etiquetas",totalRegionCount:"Total de regiones",totalTagCount:"Total de etiquetas",avgTagCountPerAsset:"Recuento promedio de etiquetas por activo"},tags:{title:"Etiquetas",placeholder:"Agregar nuevo etiqueta",editor:"Editor de Etiquetas",modal:{name:"Nombre de Etiqueta",color:"Color de Etiqueta"},colors:{white:"Blanco",gray:"Gris",red:"Rojo",maroon:"Granate",yellow:"Amarillo",olive:"Olivo",lime:"Lima",green:"Verde",aqua:"Aqua",teal:"Trullo",blue:"Azul",navy:"Azul Marino",fuschia:"Fuschia",purple:"P\xfarpura"},warnings:{existingName:"Nombre de etiqueta ya existe. Elige otro nombre",emptyName:"El nombre de etiqueta no puede ser vac\xedo",unknownTagName:"Desconocido"},toolbar:{add:"Agregar nueva etiqueta",search:"Buscar entre etiquetas",edit:"Editar etiqueta",lock:"Bloquear etiqueta",moveDown:"Mover etiqueta hacia abajo",moveUp:"Mover etiqueta hacia arriba",delete:"Borrar etiqueta"}},connections:{title:"Conexiones",save:"Guardar Conexi\xf3n",details:"Detalles de Conexi\xf3n",settings:"Configuraci\xf3n de Conexi\xf3n",instructions:"Por favor seleccione una conexi\xf3n para editar",messages:{saveSuccess:"${connection.name} guardado correctamente",deleteSuccess:"${connection.name} eliminado correctamente"},imageCorsWarning:"Advertencia: Cuando se usa VoTT en un navegador web, es posible que algunos activos de este                           B\xfasqueda de Im\xe1genes Bing no se exporten correctamente debido a las restricciones de CORS                           (Recursos de Origen Cruzado).",blobCorsWarning:"Advertencia: CORS (Recursos de Origen Cruzado) debe estar habilitado en la                           cuenta de Azure Blob Storage para poder usarlo como una conexi\xf3n de origen o destino. Puede                           encontrar m\xe1s informaci\xf3n sobre c\xf3mo habilitar CORS en la {0}.",azDocLinkText:"documentaci\xf3n de Azure.",providers:{azureBlob:{title:"Azure Blob Storage",description:"",accountName:{title:"Nombre de cuenta",description:""},containerName:{title:"Nombre del contenedor",description:""},sas:{title:"SAS",description:"Firma de acceso compartido utilizada para autenticarse en la cuenta de BLOB Storage"},createContainer:{title:"Crear contenedor",description:"Crea el contenedor de blobs si a\xfan no existe"}},bing:{title:"B\xfasqueda de Im\xe1genes Bing",options:"Opciones de B\xfasqueda de Im\xe1genes Bing",apiKey:"Clave API",query:"Consulta",aspectRatio:{title:"Relaci\xf3n de Aspecto",all:"Todos",square:"Cuadrado",wide:"Ancho",tall:"Alto"}},local:{title:"Sistema de Archivos Local",folderPath:"Ruta de la carpeta",selectFolder:"Seleccionar la carpeta",chooseFolder:"Elijir la carpeta"}}},editorPage:{width:"Anchura",height:"Altura",tagged:"Etiquetado",visited:"Visitado",toolbar:{select:"Seleccionar",pan:"Pan",drawRectangle:"Dibujar Rect\xe1ngulo",drawPolygon:"Dibujar Pol\xedgono",copyRectangle:"Copia rect\xe1ngulo",copy:"Copiar regiones",cut:"Cortar regiones",paste:"Pegar regiones",removeAllRegions:"Eliminar Todas Las Regiones",previousAsset:"Activo anterior",nextAsset:"Siguiente activo",saveProject:"Guardar Proyecto",exportProject:"Exprtar Proyecto",activeLearning:"Aprendizaje Activo"},videoPlayer:{previousTaggedFrame:{tooltip:"Fotograma etiquetado anterior"},nextTaggedFrame:{tooltip:"Siguiente marco etiquetado"},previousExpectedFrame:{tooltip:"Fotograma anterior"},nextExpectedFrame:{tooltip:"Siguiente marco"}},help:{title:"Abrir/cerrar el men\xfa de ayuda",escape:"Escapar el men\xfa de ayuda"},assetError:"No se puede mostrar el activo",tags:{hotKey:{apply:"Aplicar etiqueta con tecla de acceso r\xe1pido",lock:"Bloquear etiqueta con tecla de acceso r\xe1pido"},rename:{title:"Cambiar el nombre de la etiqueta",confirmation:"\xbfEst\xe1 seguro que quiere cambiar el nombre de esta etiqueta?                 Ser\xe1 cambiada en todos los activos"},delete:{title:"Delete Tag",confirmation:"\xbfEst\xe1 seguro que quiere borrar esta etiqueta? Ser\xe1 borrada en todos                 los activos y en las regiones donde esta etiqueta sea la \xfanica, la region tambi\xe9n ser\xe1 borrada"}},canvas:{removeAllRegions:{title:"Borrar Regiones",confirmation:"\xbfEst\xe1 seguro que quiere borrar todas las regiones?"}},messages:{enforceTaggedRegions:{title:"Las regiones no v\xe1lidas detectadas",description:"1 o m\xe1s regiones no se han etiquetado.                      Por favor, etiquete todas las regiones antes de continuar con el siguiente activo."}}},export:{title:"Exportar",settings:"Configuraci\xf3n de Exportaci\xf3n",saveSettings:"Guardar Configuraci\xf3n de Exportaci\xf3n",providers:{common:{properties:{assetState:{title:"Estado del activo",description:"Qu\xe9 activos incluir en la exportaci\xf3n",options:{all:"Todos los activos",visited:"Solo activos visitados",tagged:"Solo activos etiquetados"}},testTrainSplit:{title:"La divisi\xf3n para entrenar y comprobar",description:"La divisi\xf3n de datos para utilizar entre el entrenamiento y la comprobaci\xf3n"},includeImages:{title:"Incluir im\xe1genes",description:"Si desea o no incluir activos de imagen binaria en la conexi\xf3n de destino"}}},vottJson:{displayName:"VoTT JSON"},azureCV:{displayName:"Servicio de Visi\xf3n Personalizada Azure",regions:{australiaEast:"Australia este",centralIndia:"Centro de la India",eastUs:"Este de EE.",eastUs2:"Este US 2",japanEast:"Jap\xf3n este",northCentralUs:"Centro norte de EE.",northEurope:"Europa del norte",southCentralUs:"Centro sur de EE.",southeastAsia:"Sudeste asi\xe1tico",ukSouth:"UK sur",westUs2:"West US 2",westEurope:"Europa occidental"},properties:{apiKey:{title:"Clave de API"},region:{title:"Regi\xf3n",description:"La regi\xf3n de Azure donde se implementa el servicio"},classificationType:{title:"Tipo de clasificaci\xf3n",options:{multiLabel:"Varias etiquetas por imagen",multiClass:"Una sola etiqueta por imagen"}},name:{title:"Nombre del proyecto"},description:{title:"Descripci\xf3n del proyecto"},domainId:{title:"Dominio"},newOrExisting:{title:"Proyecto nuevo o existente",options:{new:"Nuevo proyecto",existing:"Proyecto existente"}},projectId:{title:"Nombre del proyecto"},projectType:{title:"Tipo de proyecto",options:{classification:"Clasificaci\xf3n",objectDetection:"Detecci\xf3n de objetos"}}}},tfRecords:{displayName:"Registros de Tensorflow"},pascalVoc:{displayName:"Pascal VOC",exportUnassigned:{title:"Exportar sin asignar",description:"Si se incluyen o no etiquetas no asignadas en los datos exportados"}},cntk:{displayName:"Microsoft Cognitive Toolkit (CNTK)"},csv:{displayName:"Los valores separados por comas (CSV)"}},messages:{saveSuccess:"Configuraci\xf3n de exportaci\xf3n guardada correctamente"}},activeLearning:{title:"Aprendizaje Activo",form:{properties:{modelPathType:{title:"Proveedor del modelo",description:"Fuente desde la cual cargar el modelo",options:{preTrained:"SSD de coco pre-entrenado",customFilePath:"Personalizado (ruta de archivo)",customWebUrl:"Personalizado (URL)"}},autoDetect:{title:"Detecci\xf3n autom\xe1tica",description:"Si desea o no realizar autom\xe1ticamente predicciones a                         medida que navega entre activos"},modelPath:{title:"Ruta de modelo",description:"Seleccione un modelo de su sistema de archivos local"},modelUrl:{title:"URL del modelo",description:"Cargue el modelo desde una URL web p\xfablica"},predictTag:{title:"Predecir etiqueta",description:"Si se incluir\xe1n o no autom\xe1ticamente las etiquetas en las predicciones"}}},messages:{loadingModel:"Cargando modelo...",errorLoadModel:"Error al cargar el modelo",saveSuccess:"La configuraci\xf3n de aprendizaje activa se ha guardada correctamente"}},profile:{settings:"Configuraci\xf3n de Perf\xedl"},errors:{unknown:{title:"Error desconocido",message:"La aplicaci\xf3n cont\xf3 un error desconocido.  Por favor int\xe9ntalo de nuevo."},projectUploadError:{title:"Error al cargar el archivo",message:"Se ha cargado un error al cargar el archivo.\n                Compruebe que el archivo es del tipo correcto e int\xe9ntelo de nuevo."},genericRenderError:{title:"Error desconocido",message:"La aplicaci\xf3n cont\xf3 un error desconocido.  Por favor int\xe9ntalo de nuevo."},projectInvalidSecurityToken:{title:"Error al cargar el archivo de proyecto",message:"Aseg\xfarese de que el token de seguridad del proyecto existe"},projectInvalidJson:{title:"Error al analizar el archivo de proyecto",message:"El archivo de proyecto no es v\xe1lido JSON"},projectDeleteError:{title:"Error al eliminar el proyecto",message:"Se ha producido un error al eliminar el proyecto.\n                Validar el archivo de proyecto y el token de seguridad existen e int\xe9ntelo de nuevo"},securityTokenNotFound:{title:"Error al cargar el archivo del proyecto",message:"El token de seguridad al que hace referencia el proyecto no se encuentra en la\n                configuraci\xf3n de la aplicaci\xf3n actual. Compruebe que existe el token de seguridad e intente\n                volver a cargar el proyecto."},canvasError:{title:"Error al cargar el lienzo",message:"Se produjo un error al cargar el lienzo, verifique los activos del\n                proyecto y vuelva a intentarlo."},importError:{title:"Error al importar el proyecto V1",message:"Hubo un error al importar el proyecto V1. Revisa el archivo del proyecto y vuelve a intentarlo"},pasteRegionTooBigError:{title:"Error al pegar region al activo",message:"Hubo un error al pagar el region al activo. Intenta copiar otra region"},exportFormatNotFound:{title:"Error exportando proyecto",message:"Proyecto falta el formato de exportaci\xf3n. Seleccione un formato de exportaci\xf3n en la p\xe1gina\n            de configuraci\xf3n de exportaci\xf3n."},activeLearningPredictionError:{title:"Error de aprendizaje",message:"Se ha producido un error al predecir regiones en el activo actual.                 Compruebe la configuraci\xf3n de aprendizaje activa y vuelva a intentarlo"}}}});function c(e){return function(e,t){var n=u(JSON.stringify(e),t);return JSON.parse(n)}(e,{strings:i})}function u(e,t){var n=Object.keys(t),o=Object.values(t);return Object(r.a)(Function,Object(a.a)(n).concat(["return `".concat(e,"`;")])).apply(void 0,Object(a.a)(o))}},710:function(e,t){},712:function(e,t){},72:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(15),a=n(11),o=n(12),s=n(17),i=n(62),c=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"register",value:function(t,n){s.a.null(t);var r=t;"string"===typeof t&&(s.a.null(n),r={name:t,displayName:t,factory:n}),r.platformSupport||(r.platformSupport=i.a.All),0!==(r.platformSupport&Object(i.c)().type)&&(e.providerRegistry[r.name]=r)}},{key:"createFromConnection",value:function(e){return this.create(e.providerType,e.providerOptions)}},{key:"create",value:function(t,n){s.a.empty(t);var r=e.providerRegistry[t];if(!r)throw new Error("No storage provider has been registered with name '".concat(t,"'"));return r.factory(n)}},{key:"isRegistered",value:function(e){return void 0!==this.providers[e]}},{key:"providers",get:function(){return Object(r.a)({},e.providerRegistry)}}]),e}();c.providerRegistry={}},740:function(e,t,n){},82:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return p}),n.d(t,"g",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return g});var r=n(17),a=n(609),o=n.n(a),s=n(610),i=n.n(s);function c(e){r.a.null(e);var t=[],n=4294967295,a=0,o=0,s=0;function i(e,t){for(var n=0;t;)n=2*n+e%2,e/=2,e-=e%1,t--;return n}for(a=255;a>=0;a--){for(s=i(a,32),o=0;o<8;o++)s=(2*s^(s>>>31)%2*517762881)>>>0;t[a]=i(s,32)}for(a=0;a<e.length;a++){if((s=e[a])>255)throw new RangeError;n=(n/256^t[o=n%256^s])>>>0}return(4294967295^n)>>>0}function u(e){r.a.null(e);return(2726488792+(e>>>15|e<<17))%Math.pow(2,32)}function l(t){r.a.null(t);var n=new ArrayBuffer(8),a=new Uint8Array(n,0,8),o=new DataView(n,0,8);return o.setUint32(4,0,!0),o.setUint32(0,t,!0),new e(a)}function p(t){r.a.null(t);var n=t%Math.pow(2,32),a=new ArrayBuffer(4),o=new Uint8Array(a,0,4);return new DataView(a,0,4).setUint32(0,n,!0),new e(o)}function d(e){r.a.null(e);for(var t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}function f(e){r.a.null(e);var t=Array.from(e).map(function(e){return String.fromCharCode(e)}).join("");return decodeURIComponent(escape(t))}function g(e){return r.a.null(e),r.a.expression(e.length,function(e){return e>=8}),e=i()(e.slice(0,8)),new o.a(e,0).toNumber(!0)}}).call(this,n(39).Buffer)},85:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return h});var r,a=n(4),o=n.n(a),s=n(8),i=n(11),c=n(12),u=n(17),l=n(14),p=n(72),d=n(106),f=n(34),g=n.n(f),m=n(64);!function(e){e.All="all",e.Visited="visited",e.Tagged="tagged"}(r||(r={}));var h=function(){function e(t,n){Object(i.a)(this,e),this.project=t,this.options=n,u.a.null(t),this.assetService=new m.a(this.project)}return Object(c.a)(e,[{key:"getAssetsForExport",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,i,c=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n=function(){return Promise.resolve(g.a.values(c.project.assets))},a=function(){var e=Object(s.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return t=e.sent,e.t0=g()(t),e.next=6,c.assetProvider.getAssets();case 6:return e.t1=e.sent,e.t2=function(e){return e.id},e.abrupt("return",e.t0.concat.call(e.t0,e.t1).uniqBy(e.t2).value());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i=n,e.t0=this.options.assetState,e.next=e.t0===r.Visited?7:e.t0===r.Tagged?9:(e.t0,r.All,11);break;case 7:return t=function(e){return e.state===l.b.Visited||e.state===l.b.Tagged},e.abrupt("break",14);case 9:return t=function(e){return e.state===l.b.Tagged},e.abrupt("break",14);case 11:return i=a,t=function(){return!0},e.abrupt("break",14);case 14:return e.next=16,i();case 16:return e.t1=function(e){return e.type!==l.c.Video},e.t2=t,e.t3=function(){var e=Object(s.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.assetService.getAssetMetadata(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",e.sent.filter(e.t1).filter(e.t2).mapAsync(e.t3));case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"storageProvider",get:function(){return this.storageProviderInstance?this.storageProviderInstance:(this.storageProviderInstance=p.a.create(this.project.targetConnection.providerType,this.project.targetConnection.providerOptions),this.storageProviderInstance)}},{key:"assetProvider",get:function(){return this.assetProviderInstance?this.assetProviderInstance:(this.assetProviderInstance=d.a.create(this.project.sourceConnection.providerType,this.project.sourceConnection.providerOptions),this.assetProviderInstance)}}]),e}()},86:function(e,t,n){"use strict";var r,a=n(11),o=n(12),s=n(20),i=n(18),c=n(19),u=n(1),l=n.n(u),p=n(17),d=n(14),f=function(){function e(){var t=this;Object(a.a)(this,e),this.registrations={},this.registerBinding=function(e){var n=e.keyEventType,r=e.accelerators,a=e.handler,o=e.displayName;p.a.null(n),p.a.expression(r,function(e){return e.length>0}),p.a.null(a);var s=t.registrations[n];return s||(s={},t.registrations[n]=s),r.forEach(function(r){var a=t.registrations[n][r];if(a){var s="Key code ".concat(r,' on key event "').concat(n,'" ');throw s+='already has binding registered: "'.concat(a.displayName,'." '),s+='Cannot register binding "'.concat(o,'" with the same key code and key event type'),new d.a(d.e.OverloadedKeyBinding,s)}t.registrations[n][r]=e}),function(){e.accelerators.forEach(function(n){delete t.registrations[e.keyEventType][n]})}},this.getRegistrations=function(){return t.registrations}}return Object(o.a)(e,[{key:"getHandler",value:function(e,t){p.a.null(e),p.a.null(t);var n=this.registrations[e];return n&&n[t]?n[t].handler:null}},{key:"invokeHandler",value:function(e,t,n){p.a.null(t),p.a.null(n);var r=this.getHandler(e,t);null!==r&&r(n)}}]),e}();n.d(t,"a",function(){return r}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return m}),function(e){e.KeyDown="keydown",e.KeyUp="keyup",e.KeyPress="keypress"}(r||(r={}));var g=l.a.createContext(null),m=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={keyboard:new f},n.nonSupportedKeys=new Set(["Meta","Ctrl"," Control","Alt"]),n.inputElementTypes=new Set(["input","select","textarea"]),n.onKeyboardEvent=function(e){n.isDisabled()||n.nonSupportedKeys.has(e.key)||n.state.keyboard.invokeHandler(e.type,n.getKeyParts(e),e)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener(r.KeyDown,this.onKeyboardEvent),window.addEventListener(r.KeyUp,this.onKeyboardEvent),window.addEventListener(r.KeyPress,this.onKeyboardEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(r.KeyDown,this.onKeyboardEvent),window.removeEventListener(r.KeyUp,this.onKeyboardEvent),window.removeEventListener(r.KeyPress,this.onKeyboardEvent)}},{key:"render",value:function(){return l.a.createElement(g.Provider,{value:this.state},this.props.children)}},{key:"getKeyParts",value:function(e){var t=[];return(e.ctrlKey||e.metaKey)&&t.push("CmdOrCtrl+"),e.altKey&&t.push("Alt+"),t.push(e.key),t.join("")}},{key:"isDisabled",value:function(){return document.activeElement&&this.inputElementTypes.has(document.activeElement.tagName.toLowerCase())}}]),t}(l.a.Component);m.contextType=g},87:function(e,t,n){"use strict";var r,a,o=n(88),s=n(4),i=n.n(s),c=n(8),u=n(11),l=n(20),p=n(18),d=n(19),f=n(66),g=n(48),m=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onItemClick=Object(c.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.toast.info("Started export for ".concat(n.props.project.name,"..."),{autoClose:!1}),e.next=3,n.props.actions.exportProject(n.props.project);case 3:r=e.sent,g.toast.dismiss(t),!r||r&&0===r.errors.length?g.toast.success("Export completed successfully!"):r&&r.errors.length>0&&g.toast.warn("Successfully exported ".concat(r.completed.length,"/").concat(r.count," assets"));case 6:case"end":return e.stop()}},e,this)})),n}return Object(d.a)(t,e),t}(f.a),h=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onItemClick=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.actions.saveProject(n.props.project);case 3:g.toast.success("".concat(n.props.project.name," saved successfully!")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g.toast.error("Error saving ".concat(n.props.project.name));case 9:case"end":return e.stop()}},e,this,[[0,6]])})),n}return Object(d.a)(t,e),t}(f.a),v=n(7);function b(){o.a.register({name:r.SelectCanvas,tooltip:v.c.editorPage.toolbar.select,icon:"fa-mouse-pointer",group:a.Canvas,type:f.b.State,accelerators:["V","v"]}),o.a.register({name:r.DrawRectangle,tooltip:v.c.editorPage.toolbar.drawRectangle,icon:"fa-vector-square",group:a.Canvas,type:f.b.State,accelerators:["R","r"]}),o.a.register({name:r.DrawPolygon,tooltip:v.c.editorPage.toolbar.drawPolygon,icon:"fa-draw-polygon",group:a.Canvas,type:f.b.State,accelerators:["P","p"]}),o.a.register({name:r.CopyRectangle,tooltip:v.c.editorPage.toolbar.copyRectangle,icon:"far fa-clone",group:a.Canvas,type:f.b.State,accelerators:["CmdOrCtrl+W","CmdOrCtrl+w"]}),o.a.register({name:r.CopyRegions,tooltip:v.c.editorPage.toolbar.copy,icon:"fa-copy",group:a.Regions,type:f.b.Action,accelerators:["CmdOrCtrl+C","CmdOrCtrl+c"]}),o.a.register({name:r.CutRegions,tooltip:v.c.editorPage.toolbar.cut,icon:"fa-cut",group:a.Regions,type:f.b.Action,accelerators:["CmdOrCtrl+X","CmdOrCtrl+x"]}),o.a.register({name:r.PasteRegions,tooltip:v.c.editorPage.toolbar.paste,icon:"fa-paste",group:a.Regions,type:f.b.Action,accelerators:["CmdOrCtrl+V","CmdOrCtrl+v"]}),o.a.register({name:r.RemoveAllRegions,tooltip:v.c.editorPage.toolbar.removeAllRegions,icon:"fa-ban",group:a.Regions,type:f.b.Action,accelerators:["CmdOrCtrl+Delete","CmdOrCtrl+Backspace"]}),o.a.register({name:r.ActiveLearning,tooltip:v.c.editorPage.toolbar.activeLearning,icon:"fas fa-graduation-cap",group:a.Canvas,type:f.b.Action,accelerators:["CmdOrCtrl+D","CmdOrCtrl+d"]}),o.a.register({name:r.PreviousAsset,tooltip:v.c.editorPage.toolbar.previousAsset,icon:"fas fa-arrow-circle-up",group:a.Navigation,type:f.b.Action,accelerators:["ArrowUp","W","w"]}),o.a.register({name:r.NextAsset,tooltip:v.c.editorPage.toolbar.nextAsset,icon:"fas fa-arrow-circle-down",group:a.Navigation,type:f.b.Action,accelerators:["ArrowDown","S","s"]}),o.a.register({name:r.SaveProject,tooltip:v.c.editorPage.toolbar.saveProject,icon:"fa-save",group:a.Project,type:f.b.Action,accelerators:["CmdOrCtrl+S","CmdOrCtrl+s"]},h),o.a.register({name:r.ExportProject,tooltip:v.c.editorPage.toolbar.exportProject,icon:"fa-external-link-square-alt",group:a.Project,type:f.b.Action,accelerators:["CmdOrCtrl+E","CmdOrCtrl+e"]},m)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return b}),function(e){e.SelectCanvas="selectCanvas",e.DrawRectangle="drawRectangle",e.DrawPolygon="drawPolygon",e.CopyRectangle="copyRectangle",e.CopyRegions="copyRegions",e.CutRegions="cutRegions",e.PasteRegions="pasteRegions",e.RemoveAllRegions="removeAllRegions",e.PreviousAsset="navigatePreviousAsset",e.NextAsset="navigateNextAsset",e.SaveProject="saveProject",e.ExportProject="exportProject",e.ActiveLearning="activeLearning"}(r||(r={})),function(e){e.Canvas="canvas",e.Regions="regions",e.Navigation="navigation",e.Project="project"}(a||(a={}))},871:function(e){e.exports={type:"object",properties:{modelPathType:{type:"string",title:"${strings.activeLearning.form.properties.modelPathType.title}",description:"${strings.activeLearning.form.properties.modelPathType.description}",enum:["coco","file","url"],default:"coco",enumNames:["${strings.activeLearning.form.properties.modelPathType.options.preTrained}","${strings.activeLearning.form.properties.modelPathType.options.customFilePath}","${strings.activeLearning.form.properties.modelPathType.options.customWebUrl}"]},autoDetect:{title:"${strings.activeLearning.form.properties.autoDetect.title}",description:"${strings.activeLearning.form.properties.autoDetect.description}",type:"boolean"},predictTag:{title:" ${strings.activeLearning.form.properties.predictTag.title}",description:"${strings.activeLearning.form.properties.predictTag.description}",type:"boolean"}},dependencies:{modelPathType:{oneOf:[{properties:{modelPathType:{enum:["coco"]}}},{required:["modelPath"],properties:{modelPathType:{enum:["file"]},modelPath:{title:"${strings.activeLearning.form.properties.modelPath.title}",description:"${strings.activeLearning.form.properties.modelPath.description}",type:"string"}}},{required:["modelUrl"],properties:{modelPathType:{enum:["url"]},modelUrl:{title:"${strings.activeLearning.form.properties.modelUrl.title}",description:"${strings.activeLearning.form.properties.modelUrl.description}",default:"http://",pattern:"^https?\\\\://[a-zA-Z0-9\\\\-\\\\.]+\\\\.[a-zA-Z]{2,3}(/\\\\S*)?$",type:"string"}}}]}}}},872:function(e){e.exports={modelPath:{"ui:widget":"localFolderPicker"},predictTag:{"ui:widget":"checkbox"},autoDetect:{"ui:widget":"checkbox"},"ui:order":["modelPathType","*","predictTag","autoDetect"]}},873:function(e,t,n){},875:function(e){e.exports={type:"object",properties:{securityTokens:{title:"${strings.appSettings.securityTokens.title}",description:"${strings.appSettings.securityTokens.description}",type:"array",items:{type:"object",required:["name","key"],properties:{name:{type:"string",title:"${strings.appSettings.securityToken.name.title}"},key:{type:"string",title:"${strings.appSettings.securityToken.key.title}"}}}}}}},876:function(e){e.exports={securityTokens:{"ui:options":{addable:!0,orderable:!1,removable:!0},items:{key:{"ui:field":"securityToken"}}}}},878:function(e){e.exports={required:["name","providerType"],type:"object",properties:{name:{title:"${strings.common.displayName}",type:"string"},description:{title:"${strings.common.description}",type:"string"},providerType:{title:"${strings.common.provider}",type:"string"}}}},879:function(e){e.exports={description:{"ui:widget":"textarea"},providerType:{"ui:widget":"connectionProviderPicker"}}},88:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(28),a=n(11),o=n(12),s=n(66),i=n(17),c=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"register",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a;i.a.null(n),i.a.null(t),e.componentRegistry.push({component:n,config:t})}},{key:"getToolbarItems",value:function(){return Object(r.a)(e.componentRegistry)}},{key:"reset",value:function(){e.componentRegistry=[]}}]),e}();c.componentRegistry=[]},880:function(e,t,n){var r={"./azureBlobStorage.json":881,"./azureBlobStorage.ui.json":449,"./bingImageSearch.json":882,"./bingImageSearch.ui.json":450,"./localFileSystemProxy.json":883,"./localFileSystemProxy.ui.json":451};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=880},881:function(e){e.exports={title:"${strings.connections.providers.azureBlob.title}",description:"${strings.connections.providers.azureBlob.description}",required:["accountName","containerName","sas"],type:"object",properties:{accountName:{title:"${strings.connections.providers.azureBlob.accountName.title}",type:"string"},containerName:{title:"${strings.connections.providers.azureBlob.containerName.title}",type:"string"},sas:{title:"${strings.connections.providers.azureBlob.sas.title}",description:"${strings.connections.providers.azureBlob.sas.description}",type:"string"},createContainer:{title:"${strings.connections.providers.azureBlob.createContainer.title}",description:"${strings.connections.providers.azureBlob.createContainer.description}",type:"boolean"}}}},882:function(e){e.exports={type:"object",title:"${strings.connections.providers.bing.options}",required:["apiKey","query"],properties:{apiKey:{type:"string",title:"${strings.connections.providers.bing.apiKey}"},query:{type:"string",title:"${strings.connections.providers.bing.query}"},aspectRatio:{type:"string",title:"${strings.connections.providers.bing.aspectRatio.title}",enum:["all","square","wide","tall"],default:"all",enumNames:["${strings.connections.providers.bing.aspectRatio.all}","${strings.connections.providers.bing.aspectRatio.square}","${strings.connections.providers.bing.aspectRatio.wide}","${strings.connections.providers.bing.aspectRatio.tall}"]}}}},883:function(e){e.exports={title:"${strings.connections.providers.local.title}",required:["folderPath"],type:"object",properties:{folderPath:{title:"${strings.connections.providers.local.folderPath}",type:"string"}}}},884:function(e,t,n){var r={"./azureBlobStorage.ui.json":449,"./bingImageSearch.ui.json":450,"./localFileSystemProxy.ui.json":451};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=884},885:function(e,t,n){},92:function(e,t,n){"use strict";n.d(t,"f",function(){return s}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return p});var r=n(15),a=n(17),o=n(152);function s(e,t){if(e>t)throw new Error("min (".concat(e,") can't be bigger than max (").concat(t,")"));return e===t?e:(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e)}function i(e){a.a.null(e);var t=[],n=!0,r=!1,o=void 0;try{for(var s,i=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var c=s.value;t.push("".concat(c,"=").concat(encodeURIComponent(e[c])))}}catch(u){r=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t.join("&")}function c(e,t){var n={"#":"%23","?":"%3F"},r="file:".concat(encodeURI(u(e)));return t?r.replace(/(#|\?)/g,function(e){return n[e]}):r}function u(e){return e.replace(/\\/g,"/")}function l(e,t){var n=Object(r.a)({},e,{sourceConnection:Object(r.a)({},e.sourceConnection),targetConnection:Object(r.a)({},e.targetConnection),exportFormat:e.exportFormat?Object(r.a)({},e.exportFormat):null});return n.sourceConnection.providerOptions=d(e.sourceConnection.providerOptions,t.key),n.targetConnection.providerOptions=d(e.targetConnection.providerOptions,t.key),n.exportFormat&&(n.exportFormat.providerOptions=d(e.exportFormat.providerOptions,t.key)),n}function p(e,t){var n=Object(r.a)({},e,{sourceConnection:Object(r.a)({},e.sourceConnection),targetConnection:Object(r.a)({},e.targetConnection),exportFormat:e.exportFormat?Object(r.a)({},e.exportFormat):null});return n.sourceConnection.providerOptions=f(n.sourceConnection.providerOptions,t.key),n.targetConnection.providerOptions=f(n.targetConnection.providerOptions,t.key),n.exportFormat&&(n.exportFormat.providerOptions=f(n.exportFormat.providerOptions,t.key)),n}function d(e,t){return e?e.encrypted?e:{encrypted:Object(o.b)(e,t)}:null}function f(e,t){return e&&e.encrypted?Object(o.a)(e.encrypted,t):e}},93:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(15),a=n(11),o=n(12),s=n(17),i=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"register",value:function(t){s.a.null(t),s.a.empty(t.name),s.a.empty(t.displayName),s.a.null(t.factory),null===e.defaultProviderOptions&&(e.defaultProviderOptions=t),e.providerRegistry[t.name]=t}},{key:"create",value:function(t,n,r){s.a.empty(t),s.a.null(n);var a=e.providerRegistry[t];if(!a)throw new Error("No export provider has been registered with name '".concat(t,"'"));return a.factory(n,r)}},{key:"createFromProject",value:function(t){return e.create(t.exportFormat.providerType,t,t.exportFormat.providerOptions)}},{key:"providers",get:function(){return Object(r.a)({},e.providerRegistry)}},{key:"defaultProvider",get:function(){return e.defaultProviderOptions}}]),e}();i.providerRegistry={},i.defaultProviderOptions=null},94:function(e,t,n){"use strict";var r=n(11),a=n(12),o=n(68),s=function e(){var t=this;Object(r.a)(this,e),this.resolve=function(e){},this.reject=function(e){},this.then=function(e){throw new Error("Not implemented yet")},this.catch=function(e){throw new Error("Not implemented yet")},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)};n.d(t,"a",function(){return i});var i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"initialize",value:function(){e.initialized||(e.ipcRenderer=window.require("electron").ipcRenderer,e.ipcRenderer.on("ipc-renderer-proxy",function(t,n){var r=e.pending[n.id];if(!r)throw new Error("Cannot find deferred with id '".concat(n.id,"'"));n.error?r.reject(n.error):r.resolve(n.result),delete e.pending[n.id]}),e.initialized=!0)}},{key:"send",value:function(t,n){e.initialize();var r=o.generate(),a=new s;e.pending[r]=a;var i={id:r,type:t,args:n};return e.ipcRenderer.send("ipc-main-proxy",i),a.promise}}]),e}();i.pending={},i.initialized=!1}},[[644,2,1]]]);
//# sourceMappingURL=main.5b8da1bf.chunk.js.map